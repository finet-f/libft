if (self.CavalryLogger) { CavalryLogger.start_js(["2ARYw"]); }

__d("FBRTCMessageType",[],(function(a,b,c,d,e,f){e.exports={JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,EXPERIMENT:12,APPROVAL:17}}),null);
__d("IrisProtocolMessageLifetime",[],(function(a,b,c,d,e,f){e.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:3e4,TTL_1MINUTE:6e4,TTL_3MINUTES:18e4,TTL_5MINUTES:3e5,TTL_10MINUTES:6e5,TTL_15MINUTES:9e5,TTL_30MINUTES:18e5,TTL_1HOUR:36e5,TTL_2HOURS:72e5,TTL_4HOURS:144e5,TTL_8HOURS:288e5,TTL_12HOURS:432e5,TTL_24HOURS:864e5}}),null);
__d("MercuryAPIArgsSource",[],(function(a,b,c,d,e,f){e.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"}}),null);
__d("MercuryAudioType",[],(function(a,b,c,d,e,f){e.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"}}),null);
__d("MessageLiveLocationClientSyncProtocolStopReason",[],(function(a,b,c,d,e,f){e.exports={EXPIRED:1,CANCELED:2,ARRIVED:3}}),null);
__d("MessengerEmojiConfig",[],(function(a,b,c,d,e,f){e.exports={emoji_colors:[0,127995,127996,127997,127998,127999]}}),null);
__d("MessengerView",[],(function(a,b,c,d,e,f){e.exports={DETAIL:{COMPOSE:"detail/compose",THREAD:"detail/thread",PAYTHREAD:"detail/paythread",PAYFRIENDPICKER:"detail/payfriendpicker"},MASTER:{PAYMENT:"master/payment",PEOPLE:"master/people",RECENT:"master/recent",SUPPORT:"master/support",SEARCH:"master/search",WORK_NEW_CHAT:"master/work_new_chat"}}}),null);
__d("PageCommItemStatus",[],(function(a,b,c,d,e,f){e.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM",DELETED:"DELETED"}}),null);
__d("BonfireFeatureGating",["gkx"],(function(a,b,c,d,e,f){"use strict";a={canReceiveBonfireRingInterop:function(){return b("gkx")("678201")},shouldUseH264:function(){return b("gkx")("692620")}};e.exports=a}),null);
__d("NubController",["csx","ArbiterMixin","Dock"],(function(a,b,c,d,e,f,g){__p&&__p();function a(){}Object.assign(a.prototype,b("ArbiterMixin"),{init:function(a){this.el=a;this.nubButton=a.querySelector(".fbNubButton");this.closeButton=a.querySelector("._2dv8");b("Dock").registerNubController(a,this);this.closeButton&&this.closeButton.addEventListener("click",this.hide.bind(this));return this},buttonContentChanged:function(){this.inform("nub/button/content-changed")},flyoutContentChanged:function(){this.inform("nub/flyout/content-changed")},hide:function(){b("Dock").hide(this.el)},show:function(){b("Dock").show(this.el)}});e.exports=a}),null);
__d("BuddyListNub",["csx","cx","fbt","Arbiter","AsyncRequest","AvailableList","BootloadedComponent.react","ChannelConnection","ChatConfig","ChatOptions","ChatSidebarActions","ChatSidebarStore","ChatSidebarVisibility","ChatVisibility","CSS","Dock","DOM","Event","JSLogger","JSResource","KeyboardShortcuts","Keys","NubController","OrderedFriendsList","Parent","PresencePrivacy","PresenceStatus","PresenceUtil","React","ReactDOM","Run","SidebarType","Style","Toggler","emptyFunction","intlNumUtils","translateKey"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k=b("ChatConfig").get("chat_tab_m4_header"),l=40,m=253,n=k?"277px":"285px",o=b("JSLogger").create("buddylist_nub");c=babelHelpers.inherits(a,b("NubController"));j=c&&c.prototype;function a(a,c,d,e){"use strict";__p&&__p();j.constructor.call(this);j.init.call(this,a);this.root=a;this.orderedList=c;this.button=b("DOM").find(a,"a.fbNubButton");this.unreadCount=b("DOM").find(a,"span._5ayx");this.label=b("DOM").find(a,"span.label");this.buddyListTitle=b("DOM").find(a,".titlebarTextWrapper");this.body=b("DOM").scry(a,"div.fbNubFlyoutBody")[0];this.container=b("Parent").bySelector(a,"._56ox");var f=b("DOM").find(a,"div.fbNubFlyoutTitlebar");b("Toggler").createInstance(f).setSticky(!1);b("Toggler").createInstance(a).setSticky(!0);e&&b("Run").onAfterLoad(function(){this.dropdown=b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarDropdown.react").__setRef("BuddyListNub"),onToggleSidebar:function(){},sidebarType:b("SidebarType").BUDDYLIST}),e)}.bind(this));c.subscribeOnce("render",this.flyoutContentChanged.bind(this));b("Run").onAfterLoad(function(){__p&&__p();var a=b("DOM").find(f,"div._4k48");a&&b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarComposeLink.react").__setRef("BuddyListNub"),className:"_3a-4"}),a);a=b("DOM").find(this.button,"div._1us9");a&&b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarComposeLink.react").__setRef("BuddyListNub"),className:"_3a-4"}),a);a=b("DOM").find(this.button,"div._1usa");a&&b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarDropdown.react").__setRef("BuddyListNub"),onToggleSidebar:function(){},sidebarType:b("SidebarType").BUDDYLIST_NUB}),a);a=b("DOM").find(f,"div._3gl7");a&&b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarGroupCreateButtonReactComponent").__setRef("BuddyListNub")}),a);a=b("DOM").find(this.button,"div._3gll");a&&b("ReactDOM").render(b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("ChatSidebarGroupCreateButtonReactComponent").__setRef("BuddyListNub"),className:"newGCF"}),a)}.bind(this));c.setScrollContainer(this.body);b("AvailableList").subscribe("buddylist/availability-changed",this._updateCount.bind(this));b("Arbiter").subscribe("chat/connect",function(){return this._handleConnect(!0)}.bind(this));b("Arbiter").subscribe("chat/option-changed",function(a,b){b.name=="hide_groups"?this.onResize():b.name==="hide_buddylist"&&(b.value?this.hide():this.show())}.bind(this));b("ChannelConnection").subscribe(b("ChannelConnection").CONNECTED,function(){return this._updateView()}.bind(this));b("ChannelConnection").subscribe(b("ChannelConnection").SHUTDOWN,function(){return this._updateView()}.bind(this));b("ChannelConnection").subscribe(b("ChannelConnection").RECONNECTING,function(){return this._updateView()}.bind(this));b("ChannelConnection").subscribe([b("ChannelConnection").MUTE_WARNING,b("ChannelConnection").UNMUTE_WARNING],function(){return this._updateView()}.bind(this));this.subscribe("show",this.onShow.bind(this));this.subscribe("hide",this.onHide.bind(this));this.subscribe("resize",this.onResize.bind(this));b("Event").listen(a,"keydown",this._onKeyDown.bind(this));b("Event").listen(this.button,"click",this.onButtonClick.bind(this));b("KeyboardShortcuts").register("q",function(event){this._isOpen||(this.onButtonClick(),this.show()),event.prevent()}.bind(this),{persistOnTransition:!0,shortcutInfo:{displayKeys:[b("translateKey")("q")],description:i._("Rechercher dans les contacts Messenger")}});b("Arbiter").subscribe("minisidebar/show",this.hide.bind(this));b("Arbiter").subscribe("sidebar/visibility",function(a,b){b?this.hide():this._onSidebarHide()}.bind(this));b("Style").set(this.body,"min-height",n);b("Arbiter").subscribe("sidebar/typeahead/active",function(a,c){c?(this._typeaheadActive=!0,b("CSS").hide(this.body.parentNode),this.orderedList.hide(),this.onResize()):(this._typeaheadActive=!1,this.onResize(),b("CSS").show(this.body.parentNode),this.orderedList.show())}.bind(this));b("OrderedFriendsList").getList(function(a){b("ChatSidebarStore").isEnabled()&&b("ChatSidebarStore").getVisibleType()===b("SidebarType").BUDDYLIST&&!b("ChatOptions").getSetting("hide_buddylist")&&!b("ChannelConnection").disconnected()&&!b("PresencePrivacy").isUserOffline()&&a.length>0&&this.show(),b("Event").listen(f,"click",function(a){b("CSS").matchesSelector(a.target,".titlebarTextWrapper")&&this._syncHideBuddylist(!0)}.bind(this)),this._updateView(),o.log("buddylist_initialized")}.bind(this))}a.prototype._handleVisibilityChange=function(){"use strict";this._updateView(),b("ChatVisibility").isOnline()||this.hide()};a.prototype._updateView=function(a){"use strict";__p&&__p();var c;if(!b("ChatVisibility").isOnline())a=i._("{Chat} (Off)",[i._param("Chat",i._("Discussion instantan\u00e9e"))]);else if(b("ChannelConnection").disconnected())a=i._("{Chat} (d\u00e9connect\u00e9e)",[i._param("Chat",i._("Discussion instantan\u00e9e"))]);else{var d=b("PresenceStatus").getOnlineCount();if(d){var e=b("DOM").create("span",{className:"count"},"("+b("intlNumUtils").formatNumberWithThousandDelimiters(d)+")");a=i._({"*":"{Chat} {number-available}"},[i._param("Chat",i._("Discussion instantan\u00e9e")),i._param("number-available",e,[0,d])])}else a=i._("Discussion instantan\u00e9e"),c=!0}this._setPresenceIcon();this._setUnread();this._setLabel(a,c);this._updateBuddyListTitle();this.buttonContentChanged()};a.prototype._updateBuddyListTitle=function(){"use strict";__p&&__p();if(!k)return;var a,c=i._("Discussion instantan\u00e9e"),d="_6d4h";if(!b("ChatVisibility").isOnline()||b("ChannelConnection").disconnected())a=b("DOM").create("div",{"class":d},c);else{var e=b("PresenceStatus").getOnlineCount(),f;e&&(d="_6d4h _6d4i",f=b("DOM").create("div",{"class":"_6d4j"},i._("{subTitle} en ligne",[i._param("subTitle",b("intlNumUtils").formatNumberWithThousandDelimiters(e))])));e=b("DOM").create("div",{"class":d},c);f&&b("DOM").appendContent(e,f);a=e}d=this.buddyListTitle.textContent||this.buddyListTitle.innerText;if(a&&d!==a){c=this.buddyListTitle.cloneNode(!0);b("DOM").setContent(c,a);b("DOM").replace(this.buddyListTitle,c);this.buddyListTitle=c}};a.prototype._setPresenceIcon=function(){"use strict";b("CSS").conditionClass(this.root,"offline",!b("ChatVisibility").isOnline()||b("ChannelConnection").disconnected())};a.prototype.onButtonClick=function(){"use strict";if(!b("ChatSidebarStore").isInitialized())return!0;b("ChatSidebarVisibility").shouldShowSidebarIgnoreEnabled(null,function(a,c){c=b("ChatSidebarStore").isEnabled();!c&&a?b("ChatSidebarActions").enable(b("SidebarType").SIDEBAR):b("ChatSidebarActions").show(c&&a?b("SidebarType").SIDEBAR:b("SidebarType").BUDDYLIST)})};a.prototype.onHide=function(){"use strict";this._isOpen=!1,this._buddyListRenderSubscription&&(this.orderedList.unsubscribe(this._buddyListRenderSubscription),this._buddyListRenderSubscription=null),this._hideBuddyList(),b("Arbiter").inform("buddylist/hide")};a.prototype._onKeyDown=function(event){"use strict";var a=b("Event").getKeyCode(event);if(a===b("Keys").ESC&&!b("CSS").hasClass(this.root,"menuOpened")){this.hide();return!1}else a==b("Keys").RETURN&&b("ChatSidebarVisibility").shouldShowSidebarIgnoreEnabled(null,function(a,c){b("ChatSidebarActions").enable(a?b("SidebarType").SIDEBAR:b("SidebarType").BUDDYLIST)})};a.prototype._onSidebarHide=function(event){"use strict";b("OrderedFriendsList").getList(function(a){b("ChatSidebarStore").isEnabled()&&!b("ChatOptions").getSetting("hide_buddylist")&&!b("ChannelConnection").disconnected()&&!b("PresencePrivacy").isUserOffline()&&a.lenth>0?this.show():this.hide()}.bind(this))};a.prototype.onResize=function(){"use strict";var a=this._typeaheadActive?b("Dock").getMaxFlyoutHeight(this.root)-60:m;b("Arbiter").inform("buddyList/resized",a,"persistent");this._typeaheadActive?b("Style").set(this.body,"max-height","none"):b("Style").set(this.body,"max-height",n);a=Math.max(250,a);a=Math.floor(a/l);this.orderedList.setNumTopFriends(a,!1,b("SidebarType").BUDDYLIST)};a.prototype._showBuddyList=function(){"use strict";this._buddyListRenderSubscription=this.orderedList.subscribe("render",function(){b("Style").get(this.body,"height")!=n&&b("Style").set(this.body,"height",n)}.bind(this)),this.orderedList.show(),o.bump("buddylist_show")};a.prototype._hideBuddyList=function(){"use strict";this.orderedList.hide(),o.bump("buddylist_hide")};a.prototype.onShow=function(){"use strict";this._isOpen=!0,b("ChannelConnection").disconnected()?(b("ChannelConnection").reconnect(),this._showBuddyList()):b("ChatVisibility").goOnline(this._showBuddyList.bind(this)),this._syncHideBuddylist(!1)};a.prototype._setLabel=function(a,c){"use strict";var d=this.label.textContent||this.label.innerText;if(d!==a){d=this.label.cloneNode(!0);b("DOM").setContent(d,a);b("DOM").replace(this.label,d);this.label=d}this.throbber&&b("CSS").conditionShow(this.throbber,!!c)};a.prototype._setUnread=function(a){"use strict";b("CSS").conditionShow(this.unreadCount,!!a)};a.prototype._updateCount=function(){"use strict";this._updateView()};a.prototype._syncHideBuddylist=function(a){"use strict";b("ChatOptions").setSetting("hide_buddylist",a,"buddylist"),new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(b("emptyFunction")).setErrorHandler(b("emptyFunction")).setData({hide_buddylist:a,window_id:b("PresenceUtil").getSessionID()}).setAllowCrossPageTransition(!0).send()};b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,c){c.buddylist_visible=b("ChatSidebarStore").getVisibleType()===b("SidebarType").BUDDYLIST});e.exports=a}),null);
__d("NotificationBeeperConst",["keyMirror"],(function(a,b,c,d,e,f){a={IDLE_DELAY:1e4,ACTIVE_DELAY_LONG:4e3,FADE_OUT_LENGTH:1500,BeepStates:b("keyMirror")({PENDING:!0,RENDERED:!0,READY_TO_HIDE:!0,FADING_OUT:!0})};e.exports=a}),null);
__d("NotificationBeeperItemCloseButton.react",["cx","fbt","React","XUIAbstractGlyphButton.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){"use strict";var a=h._("Fermer");return b("React").createElement(b("XUIAbstractGlyphButton.react"),babelHelpers["extends"]({},this.props,{className:"_3soc",title:a,label:a,labelIsHidden:!0}))};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("NotificationURI",["BusinessURI.brands","URI","VideoPermalinkURI","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();a={localize:function(a){try{a=b("BusinessURI.brands")(a)}catch(b){return a.toString()}var c=a.getSubdomain();return a.getUnqualifiedURI().getQualifiedURI().setSubdomain(c).toString()},snowliftable:function(a){if(!a)return!1;a=new(b("URI"))(a);var c=a.getQueryData();return b("isFacebookURI")(a)&&(b("VideoPermalinkURI").isValid(a)||"fbid"in c)},isVaultSetURI:function(a){return this._areEquals(a,"/ajax/vault/sharer_preview.php")},isAlbumDraftRecoveryDialogURI:function(a){return this._areEquals(a,"/ajax/photos/upload/overlay/")},isQuicksilverURI:function(a){return this._areEquals(a,"/games/quicksilver/spotlight/")},isDirectURI:function(a){return this._startsWith(a,"/direct/")},isIGAccountCreationURI:function(a){return this._areEquals(a,"/ads/growth/aymt/instagram/account-creation-dialog/")},_areEquals:function(a,c){if(!a)return!1;a=new(b("URI"))(a);return b("isFacebookURI")(a)&&a.getPath()===c},_startsWith:function(a,c){if(!a)return!1;a=new(b("URI"))(a);return b("isFacebookURI")(a)&&a.getPath().startsWith(c)}};e.exports=a}),null);
__d("XLiveVideoLoadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live/video/load/",{video_id:{type:"FBID",required:!0}})}),null);
__d("NotificationListRendererUtils",["AsyncRequest","Bootloader","FBLogger","FeedQuickLogModule","NavigationMetrics","NotificationURI","PageTransitions","QPLTimeToLoadHelper","URI","VideoChainingCaller","XLiveVideoLoadController","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(event,a){b("Bootloader").loadModules(["FBStoriesLiveNotificationHandler"],function(b){b.renderLiveStory(a)},"NotificationListRendererUtils")}function h(event,a,c){b("Bootloader").loadModules(["TahoeController"],function(d){var e=b("NotificationURI").localize(new(b("URI"))(c.url)),f=a.video_channel_caller;d.openFromVideoLink(new(b("URI"))(e),{channelID:a.video_channel_id,caller:f?(d=b("VideoChainingCaller"))!=null?d[f]:d:null})},"NotificationListRendererUtils")}function i(a,c){b("QPLTimeToLoadHelper").start({source:"notifications",qplMarker:b("FeedQuickLogModule").COMMENT_TTL_WWW,time:a.timeStamp}),c.notif_type?b("QPLTimeToLoadHelper").annotateString({source:"notifications",qplMarker:b("FeedQuickLogModule").COMMENT_TTL_WWW,annotationKey:"NOTIF_TYPE",annotationValue:c.notif_type}):b("FBLogger")("comet_notifications").addMetadata("COMET_NOTIFICATION","ALERT_ID",c.alert_id||"UNKONWN").mustfix("Missing notification type",c.alert_id)}function j(a,c){b("QPLTimeToLoadHelper").start({source:"notifications",qplMarker:b("FeedQuickLogModule").LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW,time:a.timeStamp}),c.notif_type?b("QPLTimeToLoadHelper").annotateString({source:"notifications",qplMarker:b("FeedQuickLogModule").LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW,annotationKey:"NOTIF_TYPE",annotationValue:c.notif_type}):b("FBLogger")("comet_notifications").addMetadata("COMET_NOTIFICATION","ALERT_ID",c.alert_id||"UNKONWN").mustfix("Missing notification type"),b("NavigationMetrics").once(b("NavigationMetrics").Events.NAVIGATION_DONE,function(a,c){a=c.tti;c.tti||(a=c.e2e,b("QPLTimeToLoadHelper").annotateString({qplMarker:b("FeedQuickLogModule").LOAD_STORY_PERMALINK_FROM_ANYWHERE_WWW,annotationKey:"TIMESTAMP_ERROR",annotationValue:"NO_TTI"}));b("QPLTimeToLoadHelper").end({qplMarker:b("FeedQuickLogModule").LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW,time:a})})}var k={openNotification:function(event,a){__p&&__p();var c=a.renderer_data;if(c==null)return;if(!k.isStoryOnlyLiveVideoNotification(a)&&(event.metaKey||event.ctrlKey||event.button===1))return;if(c.__typename==="LiveVideoNotificationRendererData"){event.preventDefault();c=b("XLiveVideoLoadController").getURIBuilder().setFBID("video_id",c.video_id).getURI();c=new(b("AsyncRequest"))(c).setHandler(function(c){c.payload?k.openNotificationInSurface(event,a):b("PageTransitions").go(a.url)});c.send()}},openNotificationInSurface:function(event,a){var b=a.renderer_data;if(b==null)return;b.bucket_data?g(event,b):b.can_render_in_tahoe&&h(event,b,a)},isStoryOnlyLiveVideoNotification:function(a){a=a.renderer_data;return a==null?!1:a.__typename==="LiveVideoNotificationRendererData"&&!!a.bucket_data},startTTLMarkers:function(a,c){b("gkx")("678283")&&i(a,c),b("gkx")("678284")&&j(a,c)}};e.exports=k}),null);
__d("NotificationBeeperItemContents.react",["cx","Animation","AsyncRequest","BootloadedComponent.react","Bootloader","FBProfilePhotoShadow.react","Image.react","ImageBlock.react","JSResource","NotificationBeeperItemCloseButton.react","NotificationInterpolator","NotificationListRendererUtils","NotificationURI","NotificationUserActions","React","ReactDOM","RelationshipDelightUtils","TextWithEntities.react","Timestamp.react","URI"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.isLiveVideo=null,this.$2=function(a){__p&&__p();this.$1();this.props.onHide();if(a.button===1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)return;var c=this.props.notification;b("NotificationListRendererUtils").openNotification(a,c);if(a.isDefaultPrevented()===!0)return;var d=c.primerAttributes;if(d&&(d.rel==="async"||d.rel==="async-post")){var e=new(b("AsyncRequest"))(d.ajaxify||c.url);d.rel==="async-post"&&e.setMethod("POST");e.send();a.preventDefault()}else d&&d.rel==="theater"?(a.persist(),b("Bootloader").loadModules(["PhotoSnowlift"],function(b){b.bootstrap(d.ajaxify||c.url,a.currentTarget)},"NotificationBeeperItemContents.react"),a.preventDefault()):d&&(d.rel==="dialog"||d.rel==="dialog-post")&&(b("Bootloader").loadModules(["AsyncDialog"],function(b){b.bootstrap(d.ajaxify||c.url,a.currentTarget,"dialog")},"NotificationBeeperItemContents.react"),a.preventDefault())}.bind(this),this.$3=function(){this.$1(),this.props.onHide()}.bind(this),c}a.prototype.$1=function(){"use strict";b("NotificationUserActions").markNotificationsAsRead([this.props.notification.alert_id])};a.prototype.$4=function(){"use strict";new(b("Animation"))(b("ReactDOM").findDOMNode(this.refs.inner)).from("opacity","0").to("opacity","1").duration(200).go()};a.prototype.$5=function(){"use strict";var a=this.$6();a=JSON.parse(a);return a.content_id};a.prototype.$7=function(){"use strict";if(this.isLiveVideo===null){var a=this.$6();this.isLiveVideo=a.indexOf("live_video")!==-1}return!!this.isLiveVideo};a.prototype.$6=function(){"use strict";return this.props.notification.tracking||"{}"};a.prototype.$8=function(){"use strict";var a=this.props.notification,c=b("RelationshipDelightUtils").shouldHeartBeeper(a);if(!c)return null;b("RelationshipDelightUtils").logBeeperAnimation(a.alert_id);return b("React").createElement("div",{className:"_5_xp"},b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("RelationshipDelightsActorAnimation.react").__setRef("NotificationBeeperItemContents.react")}))};a.prototype.componentDidMount=function(){"use strict";this.props.onReadyToHide(this.props.notification.alert_id),this.$7()&&b("Bootloader").loadModules(["VideoPlayerMetaData","PhotoSnowliftVideoNode"],function(a,b){b=this.$5();b&&a.genVideoData(b)}.bind(this),"NotificationBeeperItemContents.react")};a.prototype.componentDidUpdate=function(a){"use strict";(a.notification.alert_id!==this.props.notification.alert_id||a.notification.creation_time!==this.props.notification.creation_time)&&(this.$4(),this.props.onReadyToHide(this.props.notification.alert_id))};a.prototype.render=function(){"use strict";var a=this.props.notification,c=a.thumbnail?a.thumbnail.uri:null,d=a.icon?a.icon.uri:null,e=b("NotificationURI").localize(new(b("URI"))(a.url));return b("React").createElement("div",{ref:"inner",className:this.props.className},b("React").createElement(b("NotificationBeeperItemCloseButton.react"),{onClick:this.$3}),b("React").createElement("a",{href:e,onClick:this.$2,className:"_3soi"},b("React").createElement(b("ImageBlock.react"),{className:"_3soj",spacing:"medium"},b("React").createElement(b("FBProfilePhotoShadow.react"),{className:"_2yt7"},b("React").createElement(b("Image.react"),{src:c,className:"_3sok"+(c?"":" hidden_elem")})),b("React").createElement("div",{className:"_3sol"},b("React").createElement(b("TextWithEntities.react"),{renderEmoticons:!0,renderEmoji:!0,interpolator:b("NotificationInterpolator"),ranges:a.title.ranges,aggregatedranges:a.title.aggregated_ranges,text:a.title.text}),b("React").createElement(b("ImageBlock.react"),{className:"_3som"},b("React").createElement(b("Image.react"),{className:"_1x8t"+(d?"":" hidden_elem"),src:d}),b("React").createElement(b("Timestamp.react"),{time:a.timestamp.time,text:a.timestamp.text,verbose:a.timestamp.verbose})))),this.$8()))};e.exports=a}),null);
__d("NotificationBeeperItem.react",["cx","CSSFade","NotificationBeeperConst","NotificationBeeperItemContents.react","NotificationBeeperItemRenderersList","React","ReactDOM","Style","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("NotificationBeeperConst").FADE_OUT_LENGTH;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={encounteredException:!1,fadedIn:!1,hidden:!1},this.$3=function(){this.setState({hidden:!0})}.bind(this),b}a.prototype.componentDidCatch=function(){"use strict";this.props.onReadyToHide(this.props.notification.alert_id),this.setState(function(a){return babelHelpers["extends"]({},a,{encounteredException:!0})})};a.prototype.componentDidMount=function(){"use strict";b("setTimeoutAcrossTransitions")(function(){this.setState({fadedIn:!0})}.bind(this),50),this.props.onInserted(this.props.notification.alert_id)};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.cancel()};a.prototype.render=function(){"use strict";if(this.state.encounteredException)return null;var a=this.props.notification,c=a.renderer_data;a=a.tracking;c=this.$4(c);return b("React").createElement("li",{className:this.state.hidden?"hidden_elem":"",ref:function(a){return this.$2=a}.bind(this),"data-gt":a},b("React").createElement(c,{className:"_3sod"+(this.state.fadedIn?" _3soe":""),notification:this.props.notification,onHide:this.$3,onReadyToHide:this.props.onReadyToHide,onPreventHide:this.props.onPreventHide}))};a.prototype.componentDidUpdate=function(a,c,d){"use strict";if(!this.$2)return;a=b("ReactDOM").findDOMNode(this.$2);if(!a)return;this.props.fadingOut?(this.$1=b("CSSFade").hide(a,{callback:this.$3,duration:i}),a.style.transitionDuration="0ms"):(this.$1&&(this.$1.cancel(),this.$1=undefined),b("Style").set(a,"opacity","1"))};a.prototype.$4=function(a){"use strict";return a&&a.__typename==="LiveVideoNotificationRendererData"&&a.video_id==null?b("NotificationBeeperItemContents.react"):b("NotificationBeeperItemRenderersList")[a&&a.__typename]||b("NotificationBeeperItemContents.react")};e.exports=a}),null);
__d("NotificationImpressions",["AsyncSignal","NotificationTokens","URI"],(function(a,b,c,d,e,f){var g="/ajax/notifications/impression.php";function a(a,c){var d={ref:c};b("NotificationTokens").untokenizeIDs(a).forEach(function(a,b){d["alert_ids["+b+"]"]=a});new(b("AsyncSignal"))(new(b("URI"))(g).getQualifiedURI().toString(),d).send()}e.exports={log:a}}),null);
__d("SoundPlayer",["URI","createArrayFromMixed"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a){var c=new(b("URI"))(a);return c.getDomain()?a:new(b("URI"))(window.location.href).setPath(c.getPath()).toString()}function i(a){a=new(b("URI"))(a).getPath();if(/\.mp3$/.test(a))return"audio/mpeg";return/\.og[ga]$/.test(a)?"audio/ogg":""}var j={preload:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(g.has(e))return;var f=document.createElement("audio");if(!f||!f.canPlayType||!f.canPlayType(i(e)))continue;f.preload="auto";f.src=h(e);document.body&&document.body.appendChild(f);g.set(e,f);return}},play:function(a,c){__p&&__p();c===void 0&&(c={});for(var a=b("createArrayFromMixed")(a),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;g.has(f)||j.preload(f);f=g.get(f);if(!f)continue;c.loop&&f.setAttribute("loop","");c.volume&&(f.volume=c.volume);f.play();return}},pause:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=g.get(e);if(e){e.pause();return}}},stop:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=g.get(e);if(f){f.pause();f.removeAttribute("src");f.src=h(e);return}}}};e.exports=j}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function(a,b,c,d,e,f){__p&&__p();var g="fb_sounds_playing3";function h(){__p&&__p();var a=b("WebStorage").getLocalStorage();if(a)try{a=a[g];if(a){a=JSON.parse(a);if(Array.isArray(a))return a}}catch(a){}return[]}function i(a){var c=b("WebStorage").getLocalStorage();if(c){var d=h();d.push(a);while(d.length>5)d.shift();try{c[g]=JSON.stringify(d)}catch(a){}}}function j(a){return h().some(function(b){return b===a})}a={play:function(a,c,d){a=b("createArrayFromMixed")(a);c=c||a[0]+Math.floor(Date.now()/1e3);if(j(c))return;b("SoundPlayer").play(a,{loop:!!d});i(c)},isSupported:function(){return!!b("WebStorage").getLocalStorage()}};e.exports=a}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c,d){b("SoundSynchronizer").play(a,c,d)}a={playLocal:g,playRemote:function(a,c,d,e){c={name:"SoundRPC",data:{paths:c,sync:d,loop:e}};a.postMessage(b("FBJSON").stringify(c),"*")},supportsRPC:function(){return!!window.postMessage},_listen:function(){b("Event").listen(window,"message",function(a){if(!/\.facebook.com$/.test(a.origin))return;var c={};try{c=b("FBJSON").parse(a.data)}catch(a){}c.name==="SoundRPC"&&g(c.data.paths,c.data.sync,c.data.loop)})}};e.exports=a}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=!1;c={init:function(a){},play:function(a,c,d){g?b("SoundRPC").playRemote(g.contentWindow,a,c,!1):b("SoundRPC").playLocal(a,c,d),h=!0},hasPlayedSoundBefore:function(){return h},playOnlyIfImmediate:function(a,c,d){if(!h&&b("Visibility").isHidden())return;this.play(a,c,d)},stop:function(a){g||b("SoundPlayer").stop(a)}};d=new(b("URI"))(location.href);d.getSubdomain()&&d.getSubdomain()!=="www"&&d.setSubdomain("www");f=d.getDomain();function a(){if(b("UserAgent_DEPRECATED").ie()<9)return!1;return b("SoundInitialData").RPC_DISABLED?!1:b("SoundSynchronizer").isSupported()&&b("SoundRPC").supportsRPC()}b("isFacebookURI")(d)&&location.host!==f&&a()&&(g=document.createElement("iframe"),g.setAttribute("src","//"+f+"/sound_iframe.php"),g.style.display="none",document.body&&document.body.appendChild(g));e.exports=c}),null);
__d("NotificationSound",["Sound"],(function(a,b,c,d,e,f){__p&&__p();var g=5e3;b("Sound").init(["audio/mpeg"]);function a(a){this._soundPath=a,this._lastPlayed=0}Object.assign(a.prototype,{play:function(a){if(!this._soundPath)return;var c=Date.now();if(c-this._lastPlayed<g)return;this._lastPlayed=c;b("Sound").playOnlyIfImmediate(this._soundPath,a,!1)}});e.exports=a}),null);
__d("NotificationBeeper.react",["cx","Arbiter","ChannelConstants","FacebookWebNotificationsSubscription","NotificationBeeperConst","NotificationBeeperItem.react","NotificationConstants","NotificationImpressions","NotificationSound","NotificationUpdates","NotificationUserActions","NotifTestIDs","React","SubscriptionsHandler","clearTimeout","setTimeoutAcrossTransitions","shield"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("NotificationBeeperConst").ACTIVE_DELAY_LONG,j=b("NotificationBeeperConst").BeepStates,k=b("NotificationBeeperConst").FADE_OUT_LENGTH,l=b("NotificationBeeperConst").IDLE_DELAY,m="beeper";c=b("NotificationConstants").PayloadSourceType;var n=c.CLIENT,o=c.OTHER_APPLICATION;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={beeps:{},fading:!1,hovering:!1,soundEnabled:this.props.soundEnabled},this.onMouseEnter=function(){this.$2&&b("clearTimeout")(this.$2);var a=[],c=this.state.beeps;Object.keys(c).forEach(function(b){c[b].state!=j.PENDING?a.push(b):c[b].state=j.RENDERED});b("NotificationUserActions").markNotificationsAsSeen(a);this.setState({hovering:!0,fading:!1,beeps:c})}.bind(this),this.onMouseLeave=function(){this.$5(i),this.setState({hovering:!1})}.bind(this),this.$6=function(a){this.state.hovering||this.$5(),this.state.soundEnabled&&this.state.beeps[a].shouldPlaySound&&(this.$3||(this.$3=new(b("NotificationSound"))(this.props.soundPath)),this.$3.play(a)),this.props.shouldLogImpressions&&b("NotificationImpressions").log([a],m)}.bind(this),this.onReadyToHide=function(a,b){this.setState(function(b){var c=babelHelpers["extends"]({},b.beeps);c[a]=babelHelpers["extends"]({},c[a],{state:j.READY_TO_HIDE});return babelHelpers["extends"]({},b,{beeps:c})}),this.$2||this.$5(b)}.bind(this),this.$8=function(a){this.setState(function(b){var c=babelHelpers["extends"]({},b.beeps);c[a]=babelHelpers["extends"]({},c[a],{state:j.RENDERED});return babelHelpers["extends"]({},b,{beeps:c})})}.bind(this),this.$7=function(){this.$2=null,this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.READY_TO_HIDE&&(b[a]=babelHelpers["extends"]({},b[a],{state:j.FADING_OUT}))});return babelHelpers["extends"]({},a,{beeps:b,fading:!0})}),b("setTimeoutAcrossTransitions")(b("shield")(this.$9,this),k)}.bind(this),this.$9=function(){__p&&__p();if(!this.state.fading)return;this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.FADING_OUT&&delete b[a]});return babelHelpers["extends"]({},a,{beeps:b,fading:!1})});b("setTimeoutAcrossTransitions")(function(){this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.PENDING&&(b[a]=babelHelpers["extends"]({},b[a],{state:j.RENDERED}))});return babelHelpers["extends"]({},a,{beeps:b})})}.bind(this))}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){"use strict";__p&&__p();var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("NotificationUpdates").subscribe("update-notifications",function(a,b){if(b.payloadsource===o||b.payloadsource===n){a=b.nodes;a&&a.length&&this.handleBeepChanges(this.$4(a))}}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notif_sound_pref_changed"),function(a,b){this.setState({soundEnabled:b.obj.enabled})}.bind(this)));a.addSubscriptions(b("FacebookWebNotificationsSubscription").subscribe({event:"NEW_BEEPER",callback:function(a){var b=a.notification;a=a.should_play_sound;if(b!==null){var c;this.handleBeepChanges((c={},c[b.alert_id]={notification:b,shouldPlaySound:a},c))}}.bind(this)}));this.$1=a;b("Arbiter").inform("NotificationBeeper/mounted",null,"persistent")};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.release(),this.$1=null};a.prototype.$5=function(a){"use strict";this.$2&&b("clearTimeout")(this.$2),this.$2=b("setTimeoutAcrossTransitions")(b("shield")(this.$7,this),a==null?l:a)};a.prototype.handleBeepChanges=function(a){"use strict";var b=this.state.fading?j.PENDING:j.RENDERED,c=!1,d=babelHelpers["extends"]({},this.state.beeps);Object.keys(a).reverse().forEach(function(e){var f=a[e],g=d[e];(!g||g.notification.alert_id!==f.notification.alert_id||g.notification.creation_time!==f.notification.creation_time)&&(g&&(c=!0,delete d[e]),d[e]=babelHelpers["extends"]({},f,{state:b}))});c&&this.$5();this.setState({beeps:d})};a.prototype.render=function(){"use strict";__p&&__p();var a=this.state.beeps,c=[];Object.keys(a).reverse().forEach(function(d){var e=a[d];if(e.state==j.PENDING)return;c.push(b("React").createElement(b("NotificationBeeperItem.react"),{key:d,fadingOut:this.state.fading&&e.state==j.FADING_OUT,notification:e.notification,onInserted:this.$6,onReadyToHide:this.onReadyToHide,onPreventHide:this.$8}))}.bind(this),this);var d=c.length>0;d=(d?"":"hidden_elem")+" _50d1";return b("React").createElement("ul",{ref:"container",className:d,"data-gt":this.props.tracking,"data-testid":b("NotifTestIDs").BEEPER_LIST,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},c)};a.prototype.$4=function(a){"use strict";return a.reduce(function(a,b){a[b.alert_id]={notification:b,shouldPlaySound:!1};return a},{})};e.exports=a}),null);
__d("NotificationBeeperContainer",["NotificationBeeper.react","React","ReactDOM"],(function(a,b,c,d,e,f){a={renderBeeper:function(a,c){b("ReactDOM").render(b("React").createElement(b("NotificationBeeper.react"),a),c)}};e.exports=a}),null);
__d("LiveVideoBeeperItemContents.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("LiveVideoBeeperItemContentsImpl.react").__setRef("LiveVideoBeeperItemContents.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),babelHelpers["extends"]({},this.props,{ref:"itemContents"}))})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("XWorkUserSettingsUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/user_settings/",{})}),null);
__d("DockNubs",["AsyncRequest","CSS","WorkUserSettings","XWorkUserSettingsUpdateController"],(function(a,b,c,d,e,f){__p&&__p();var g="hidden_elem",h=b("WorkUserSettings").hideDock,i=null,j=[];a={init:function(a){i=a,this.registerSubscriber(this._updateCssClasses)},isVisible:function(){return!h},registerSubscriber:function(a){j.push(a);a(h);return{unsubscribe:function(){this._unregisterSubscriber(a)}}},_unregisterSubscriber:function(a){j=j.filter(function(b){return b!==a})},_updateSubscribers:function(){j.forEach(function(a){return a(h)})},toggleVisibility:function(){if(!i)return;h=!h;this._saveVisibilityPreferences(h);this._updateSubscribers()},_saveVisibilityPreferences:function(a){var c=b("XWorkUserSettingsUpdateController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({hide_dock:a}).send()},_updateCssClasses:function(){if(!i)return;h?b("CSS").addClass(i,g):b("CSS").removeClass(i,g)}};e.exports=a}),null);
__d("DockTabsViewportFantaTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();f=9;var g=284,h=g+f;function a(){return h+1}function b(a){return Math.floor(a/h)}function c(a){if(!a)return null;a=a.fantaTabModelStateGetter;return a?a():null}function d(a){return a?a.size:0}e.exports={getTabCountToFitWidth:b,getMinRequiredWidthForFirstFantaTab:a,getFantaTabModelFromCallbacks:c,getNumFantaTabsFromModel:d}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=496+9+2,h=210+9+2,i=52;function j(){return g}function k(){return h}function a(){return i}function b(a){return a.getIsRaised()?j():k()}function c(){return j()+i}function d(a){a=a||{};a=a.pinnedConvoTabStateGetter;return a?a():null}function f(a){return a?a.getTotalTabCount():0}e.exports={getRaisedPinnedConvoTabWidth:j,getLoweredPinnedConvoTabWidth:k,getPinnedConvoSelectorWidth:a,getPinnedConvoTabWidth:b,getMinRequiredWidthForFirstConvoTab:c,getPinnedConvoTabsStateFromCallbacks:d,getNumPinnedConvoTabsFromModel:f}}),null);
__d("DockTabsViewportCalculator",["csx","Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=50;a=35;var i=a,j="dock-tab-viewport-inst",k=b("DockTabsViewportFantaTabUtils").getMinRequiredWidthForFirstFantaTab,l=b("DockTabsViewportFantaTabUtils").getFantaTabModelFromCallbacks,m=b("DockTabsViewportFantaTabUtils").getNumFantaTabsFromModel,n=b("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab,o=b("DockTabsViewportPinnedConversationTabUtils").getNumPinnedConvoTabsFromModel,p=b("DockTabsViewportPinnedConversationTabUtils").getPinnedConvoTabsStateFromCallbacks;function q(a){return a?b("Vector").getElementDimensions(a).x:0}function r(a){this.$1=a,this.$3=0,this.$4=0,this.$5=null,this.$6=null,this.$7=!1,this.$8=!1,this.$9=!1,this.$2=new(b("SubscriptionsHandler"))(),this.$10(),this.$11()}r.prototype.$10=function(){var a=this.$12.bind(this);this.$2.addSubscriptions(b("Event").listen(window,"resize",a),b("Dock").subscribe("resize",a),b("Arbiter").subscribeOnce("sidebar/initialized",a,"new"),b("FullScreen").subscribe("changed",function(){b("FullScreen").isFullScreen()?(this.$7=!0,this.$8=!1):(this.$7=!1,this.$8&&(b("setImmediate")(function(){a()}),this.$8=!1))}.bind(this)))};r.prototype.registerFantaTabCallbacks=function(a){this.$5=a};r.prototype.registerPinnedConvoTabCallbacks=function(a){this.$6=a};r.prototype.forceRecalculateFBDockWidth=function(){this.$11(),this.$13({forceRecalculateChatTabs:!1,pinnedConvoUpdateData:null})};r.prototype.forceRecalculateChatTabs=function(){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:null})};r.prototype.forceRecalculatePinnedConvoTabs=function(a){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:a})};r.prototype.$12=function(){if(b("FullScreen").isFullScreen()||this.$7){this.$8=!0;return}this.forceRecalculateFBDockWidth()};r.prototype.$13=function(a){var b=a.forceRecalculateChatTabs;a=a.pinnedConvoUpdateData;var c=this.$14(),d=c.chatTabAvailableWidth;c=c.pinnedConvoTabAvailableWidth;this.$15(d,!!b);this.$16(c,a)};r.prototype.$16=function(a,b){var c=this.$6||{};c=c.onAvailableWidthChanged;c&&c(a,b)};r.prototype.$15=function(a,b){b=this.$5||{};b=b.onAvailableWidthChanged;b&&b(a)};r.prototype.$17=function(){var a=l(this.$5);return m(a)};r.prototype.$18=function(){return k()};r.prototype.$14=function(){__p&&__p();var a=this.$3,b={chatTabAvailableWidth:a,pinnedConvoTabAvailableWidth:0},c={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:a},d=this.$17(),e=p(this.$6),f=o(e);if(!e||f===0)return b;else if(d===0)return c;e=this.$18();if(a<=e)return b;f=n();d=a-e;if(d<f)return b;else c=f;d=c;b=Math.max(e,a-c);return{chatTabAvailableWidth:b,pinnedConvoTabAvailableWidth:d}};r.prototype.$11=function(){this.$3=this.$19(),this.$20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};r.prototype.$21=function(){var a=this.$1;if(!a)return{buddyListNubWidth:0,employeeNubsWidth:0};var c=q(a),d=q(b("DOM").find(a,"._56ox")),e=q(b("DOM").scry(a,"._56oy")[0]);a=q(b("DOM").scry(a,"._ph1")[0]);c=Math.max(c-d-e-a,0);return{buddyListNubWidth:d,employeeNubsWidth:c}};r.prototype.$19=function(){__p&&__p();var a=b("getViewportDimensions").withoutScrollbars().width;a-=b("ViewportBounds").getLeft()+b("ViewportBounds").getRight();a-=h;var c=this.$21(),d=c.buddyListNubWidth;c=c.employeeNubsWidth;a-=d;this.$4=Math.max(this.$4,c);a-=this.$4;a-=i;return Math.max(a,0)};r.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$9=!0};r.prototype.$20=function(a){this.$9&&b("Arbiter").inform(a)};r.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().chatTabAvailableWidth};r.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().pinnedConvoTabAvailableWidth};r.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$3};e.exports={getInstance:function(a){__p&&__p();var c=b("ge")("pagelet_dock");if(!c||!b("DOM").contains(c,a))return null;a=b("DataStore").get(c,j);if(a instanceof r)return a;var d=b("DOM").scry(c,".fbDockWrapperRight .fbDock")[0];a=new r(d);b("DataStore").set(c,j,a);return a}}}),null);
__d("KeyboardShortcutFlyout.react",["cx","fbt","Bootloader","KeyboardShortcuts","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={shortcutInfos:b("KeyboardShortcuts").getShortcutInfos()},c}a.prototype.render=function(){return b("React").createElement("div",{className:"_yqu _2ph_ _2pim"},b("React").createElement("table",{className:"_67br"},b("React").createElement("tbody",null,this.$2())))};a.prototype.componentDidMount=function(){this.$1=b("KeyboardShortcuts").subscribe(["cleanup","token_added"],function(){this.setState({shortcutInfos:b("KeyboardShortcuts").getShortcutInfos()})}.bind(this)),b("Bootloader").loadModules(["KeyEventTypedLogger"],function(a){new a().setAction("key_shortcut_flyout_shown").log()},"KeyboardShortcutFlyout.react")};a.prototype.componentWillUnmount=function(){b("KeyboardShortcuts").unsubscribe(this.$1)};a.prototype.$2=function(){return this.state.shortcutInfos.length?this.state.shortcutInfos.map(this.$3):h._("Aucun raccourci sur cette Page")};a.prototype.$3=function(a,c){return b("React").createElement("tr",{key:"shortcut_info_"+c,className:"_3-12"},b("React").createElement("th",{className:"_2pin _52ju"},a.displayKeys.map(function(c,a){return b("React").createElement("span",{className:"_3-28 _2e42 _653d _52jv",key:a},c)})),b("React").createElement("td",{className:"_2pin _2pii"},a.description))};e.exports=a}),null);
__d("ReactNub",["csx","DOM","Focus","NubController","Parent","React","ReactDOM","getActiveElement"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("NubController"));h=c&&c.prototype;function a(a,c){__p&&__p();h.constructor.call(this);this.$ReactNub4=function(){b("ReactDOM").unmountComponentAtNode(this.$ReactNub1),b("Focus").set(this.$ReactNub3),this.$ReactNub3!==b("getActiveElement")()&&b("Focus").set(this.nubButton)}.bind(this);this.$ReactNub5=function(){this.$ReactNub3=b("getActiveElement")();var a=this.$ReactNub2;b("ReactDOM").render(b("React").createElement(a,null),this.$ReactNub1);b("Focus").set(this.closeButton)}.bind(this);this.$ReactNub1=a;this.$ReactNub2=c;c=b("Parent").bySelector(a,"._50-v");h.init.call(this,c);b("DOM").empty(a);this.subscribe("hide",this.$ReactNub4);this.subscribe("show",this.$ReactNub5)}e.exports=a}),null);
__d("FBPaymentsDialogContainerMount",["FBPaymentsDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").createElement(b("FBPaymentsDialogContainer.react"),null),a)}};e.exports=a}),null);
__d("FBRTCConstants",["keyMirror"],(function(a,b,c,d,e,f){__p&&__p();a=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",PING:"ping",PING_ACK:"ping_ack",HANGUP:"hang_up",OTHER_DISMISS:"other_dismiss",MSG_ACK:"msg_ack",PRANSWER:"pranswer",ICERESTART_OFFER:"icerestart_offer",ICERESTART_ANSWER:"icerestart_answer",PCRESTART_OFFER:"pcrestart_offer",PCRESTART_ANSWER:"pcrestart_answer",SDP_UPDATE:"sdp_update",OFFER_ACK:"offer_ack",OFFER_NACK:"offer_nack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",VIDEO_REQUEST:"video_request",ACK:"ack",SWITCH_TO_MULTIWAY:"switch_to_multiway"});c=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",CHILD_WINDOW_START_CALL:"rtc_child_window_start_call",CHILD_WINDOW_MESSAGE:"rtc_child_window_message"});d=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip"});f=b("keyMirror")({SCREEN:null,CAMERA:null});var g=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5}),h=Object.freeze({AUDIO_ONLY:"audio_only",AUDIO_VIDEO:"audio_video",SCREEN_CONTENT:"screen"}),i=Object.freeze({CUSTOM_VIDEO_STREAM_SIZE:"CUSTOM_VIDEO_STREAM_SIZE",CUSTOM_VIDEO:"CUSTOM_VIDEO",FHD_VIDEO:"FHD_VIDEO",HD_VIDEO:"HD_VIDEO",LQ_VIDEO:"LQ_VIDEO",NO_VIDEO:"NO_VIDEO",SD_VIDEO:"SD_VIDEO",HD_IDEAL_LQ_REQUIRED_VIDEO:"HD_IDEAL_LQ_REQUIRED_VIDEO"}),j=Object.freeze({FHD_HEIGHT:1080,HD_HEIGHT:720,LQ_HEIGHT:180,SD_HEIGHT:480,FHD_WIDTH:1920,HD_WIDTH:1280,LQ_WIDTH:320,SD_WIDTH:848,VLQ_FRAME_RATE:5,LQ_FRAME_RATE:15,FRAME_RATE:30}),k=Object.freeze({UNKNOWN:-1,IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,INACTIVE_TIMEOUT:20}),l=["IgnoreCall","HangupCall","InAnotherCall","CallEndAcceptAfterHangUp","NoAnswerTimeout","IncomingTimeout","OtherInstanceHandled","SignalingMessageFailed","ConnectionDropped","ClientInterrupted","WebRTCError","ClientError","NoPermission","OtherNotCapable","NoUIShown","VersionUnsupported","CallerNotVisible","CarrierBlocked","OtherCarrierBlocked","ClientEncryptionError","InactiveTimeout"],m=Object.freeze({CALL_INITIALIZATION_FAILED:"CollabCallInitializationFailed",CLOSED_AS_STALE:"CollabClosedAsStale",CLOSED_BY_MCU:"CollabClosedByMcu",INVALID_MEETING_ID:"CollabInvalidMeetingId",LOST_MCU_CONNECTION:"CollabLostMcuConnection",LOST_MCU_THRIFT_CONNECTION:"CollabLostMcuThriftConnection",LOST_SIP_ADAPTER_CONNECTION:"CollabLostSipAdapterConnection",MCU_INVALID_STREAM_CONFIGURATION:"CollabMcuInvalidStreamConfiguration",MCU_NO_AUDIO_STREAM:"CollabMcuNoAudioStream",REMOTE_PEER_HANGUP:"CollabRemotePeerHangup",REMOTE_PEER_REJECT:"CollabRemotePeerReject",SIP_CONNECTION_INITIALIZATION_FAILED:"CollabSipConnectionInitializationFailed",UNKNOWN:"CollabUnknown"}),n=Object.freeze({TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10}),o=Object.freeze({ONE_HOUR:"1hour",UNTIL_EIGHT_AM:"8am",ALWAYS:"always"});b=b("keyMirror")({AUDIO:null,VIDEO:null});var p=Object.freeze({CUSTOM:"custom",MULTIWAY:"multiway",P2P:"p2p"}),q=Object.freeze({DOMINANT_SPEAKER:"DOMINANT_SPEAKER",GRID:"GRID"});o={CallBlockingConstants:o,CallEndReason:k,CallType:d,ChildWindowMessageType:c,CollabCallEndSubreason:m,GroupVideoViewLayout:q,IncomingCallDialogTypes:b,PayloadType:a,RTCConstraints:j,SignalingProtocol:p,StreamType:h,UIEventType:n,UploadLogLevel:g,VideoQuality:i,MediaContentTypes:f,convertFromUploadLogLevel:function(a){switch(a){case g.LL_DEBUG:return"d";case g.LL_BASIC:return"b";case g.LL_WARNING:return"w";case g.LL_INFO:return"i";case g.LL_VERBOSE:return"v";case g.LL_NONE:default:return null}},convertToUploadLogLevel:function(a){switch(a){case"d":return g.LL_DEBUG;case"b":return g.LL_BASIC;case"w":return g.LL_WARNING;case"i":return g.LL_INFO;case"v":return g.LL_VERBOSE;default:return g.LL_NONE}},uploadLogLevelString:function(a){switch(a){case g.LL_BASIC:return"basic";case g.LL_DEBUG:return"debug";case g.LL_WARNING:return"warning";case g.LL_INFO:return"info";case g.LL_VERBOSE:return"verbose";default:return""}},endCallReasonFromString:function(a){return l.indexOf(a)},callEndReasonString:function(a){a=l[a];return!a?"Unknown":a},fullCallEndReasonString:function(a,b){return this.callEndReasonString(a)+"_"+(b?"remote":"local")}};e.exports=o}),null);
__d("FBRTCIceStatsParser",[],(function(a,b,c,d,e,f){__p&&__p();var g=null;h.getInstance=function(){"use strict";g||(g=new h());return g};h.prototype.extractIceInfo=function(a){"use strict";var b=[];a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];this.$1(d)&&b.push({gen:this.$2(d),type:this.$3(d)})}return b};h.prototype.$1=function(a){"use strict";return a.indexOf("candidate:")>-1};h.prototype.$2=function(a){"use strict";var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b};h.prototype.$3=function(a){"use strict";a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"};function h(){"use strict"}e.exports=h}),null);
__d("FBRTCLocalUploadLogLevel",["CurrentUser","FBRTCConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("FBRTCConstants").UploadLogLevel,h={getUploadLogLevel:function(a){return Math.max(h.getLocalUploadLogLevel(),a)},getLocalUploadLogLevel:function(){return b("CurrentUser").isEmployee()?g.LL_DEBUG:g.LL_NONE}};e.exports=h}),null);
__d("FBRTCConsoleLogger",["Log","LogHistory","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g||(g=new h());return g};function h(){this.$1=b("LogHistory").getInstance(h.MODULE_NAME)}h.prototype.getLogHistory=function(){return this.$1};h.prototype.log=function(a,b,c,event,d){event===void 0&&(event="Console");d===void 0&&(d="DEBUG");d=" "+JSON.stringify({conferenceName:b,callID:c});this.$1.log(event||"Console",a+d);return this};h.MODULE_NAME="webrtc";e.exports=h}),null);
__d("P2PReliabilityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppBuildNumber=function(a){this.$1.app_build_number=a;return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setDeviceID=function(a){this.$1.device_id=a;return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setExtra=function(a){this.$1.extra=a;return this};a.prototype.setMsgID=function(a){this.$1.msg_id=a;return this};a.prototype.setMsgType=function(a){this.$1.msg_type=a;return this};a.prototype.setProcessingTimeSinceRecvOnWww=function(a){this.$1.processing_time_since_recv_on_www=a;return this};a.prototype.setRawTime=function(a){this.$1.raw_time=a;return this};a.prototype.setReceiverID=function(a){this.$1.receiver_id=a;return this};a.prototype.setResultCode=function(a){this.$1.result_code=a;return this};a.prototype.setSenderID=function(a){this.$1.sender_id=a;return this};a.prototype.setServiceName=function(a){this.$1.service_name=a;return this};a.prototype.setUserCountry=function(a){this.$1.user_country=a;return this};c={app_build_number:!0,app_id:!0,app_version:!0,call_id:!0,device_id:!0,event_name:!0,extra:!0,msg_id:!0,msg_type:!0,processing_time_since_recv_on_www:!0,raw_time:!0,receiver_id:!0,result_code:!0,sender_id:!0,service_name:!0,user_country:!0};e.exports=a}),null);
__d("RTWebLoggingSharedInstance",["CurrentUser","UserAgentData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g==null&&(g=new h());return g};function h(){this.$1=b("UserAgentData").browserName+b("CurrentUser").getID().substr(-4)+"_"+Date.now().toString().substr(-5)}h.prototype.getDeviceID=function(){return this.$1};e.exports=h}),null);
__d("FBRTCLogger",["ChannelManager","FBRTCConsoleLogger","FBRTCMessageType","MarauderLogger","P2PReliabilityTypedLogger","RTWebLoggingSharedInstance","UserAgentData","CurrentUser","pageID"],(function(a,b,c,d,e,f){__p&&__p();var g=b("CurrentUser").getID(),h="call_action",i="rtc_client_call_summary",j="client_error",k="client_event",l="info",m="received_message",n="send_failed",o="send_succeeded",p="sent_message",q=null;r.getInstance=function(){"use strict";q==null&&(q=new r());return q};r.multiwayMessageTypeName=function(a){"use strict";__p&&__p();switch(a){case b("FBRTCMessageType").JOIN:return"JOIN";case b("FBRTCMessageType").SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case b("FBRTCMessageType").HANGUP:return"HANGUP";case b("FBRTCMessageType").ICE_CANDIDATE:return"ICE_CANDIDATE";case b("FBRTCMessageType").RING:return"RING";case b("FBRTCMessageType").DISMISS:return"DISMISS";case b("FBRTCMessageType").CONFERENCE_STATE:return"CONFERENCE_STATE";case b("FBRTCMessageType").ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case b("FBRTCMessageType").SUBSCRIPTION:return"SUBSCRIPTION";case b("FBRTCMessageType").CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case b("FBRTCMessageType").DATA_MESSAGE:return"DATA_MESSAGE";case b("FBRTCMessageType").REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case b("FBRTCMessageType").EXPERIMENT:return"EXPERIMENT";case b("FBRTCMessageType").CONNECT:return"CONNECT";case b("FBRTCMessageType").APPROVAL:return"APPROVAL"}return a.toString()};function r(){"use strict";this.$2=JSON.stringify({version:2,device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion}),this.$1=b("RTWebLoggingSharedInstance").getInstance().getDeviceID()}r.prototype.logToConsole=function(a){"use strict";this.$3(null,null,"Console",a)};r.prototype.$4=function(a){"use strict";return new(b("P2PReliabilityTypedLogger"))().setExtra(this.$2).setDeviceID(this.$1).setRawTime(Date.now()).setServiceName("WEB_CLIENT").setMsgType(a.toUpperCase())};r.prototype.logMultiwayMessageReceived=function(a,b){"use strict";var c=r.multiwayMessageTypeName(a.type());this.$3(a.conferenceName(),b,"Received MW",c+", "+a.transactionId(),c==="EXPERIMENT"?"DEBUG":"INFO")};r.prototype.logReceivedMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,from:a,msg_id:c.msg_id,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);var f=c.type||c.msgType;this.$4(f).setEventName("CLIENT_RECEIVED_CHAT_PROXY").setCallID(d).setMsgID(c.msg_id).setSenderID(a).setReceiverID(g).log();this.$5(m,e);this.$3(a,b,"Received P2P",c.type+", "+c.msg_id)};r.prototype.logSentMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,msg_id:c.msg_id,to:a,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);this.$4(c.type).setEventName("CLIENT_SENT").setCallID(d).setMsgID(c.msg_id).setSenderID(g).setReceiverID(a).log();this.$5(p,e);this.$3(a,b,"Sent",c.type+", "+c.msg_id)};r.prototype.logSentMessageSuccess=function(a,b,c,d){"use strict";var e={call_id:b,msg_id:d,peer_id:a,type:c};b=b?b.toString():null;this.$4(c).setEventName("CLIENT_SENT_SUCCESS").setCallID(b).setMsgID(d.toString()).setSenderID(g).setReceiverID(a).log();this.$5(o,e)};r.prototype.logSentMessageFailure=function(a,b,c,d,e){"use strict";var f={call_id:b,error_code:e,msg_id:d,peer_id:a,type:c},h=b?b.toString():null;this.$4(c).setEventName("CLIENT_SENT_FAILURE").setCallID(h).setMsgID(d.toString()).setSenderID(a).setSenderID(g).setReceiverID(a).setResultCode(e).log();this.$5(n,f);this.$3(a,b,"Send Failed",c+", "+e)};r.prototype.logCallAction=function(a,b,c,d,e){"use strict";var f={call_action:c,call_id:b,content:d,peer_id:a};e&&(f.trigger=e);this.$5(h,f);this.$3(a,b,"CallAction",c+", "+JSON.stringify(d))};r.prototype.logEvent=function(a,b,event){"use strict";var c={call_id:b,content:event,peer_id:a};this.$5(k,c);this.$3(a,b,"Event",JSON.stringify(event))};r.prototype.logInfo=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$5(l,d);this.$3(a,b,"Info",JSON.stringify(c))};r.prototype.logError=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$5(j,d);this.$3(a,b,"Error",JSON.stringify(c))};r.prototype.logErrorWithoutID=function(a){"use strict";this.logError(null,null,a)};r.prototype.logEndCallSummary=function(a){"use strict";if(!a)return;var c={call_id:a.callID,channel_session_id:b("ChannelManager").getCompleteConfig().sessionID,content:a.toString(),peer_id:a.peerID,tag:"endcallstats"},d=a.getExtraInfo();for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(c[e]=d[e]);this.$5(i,c);this.$3(a.peerID,a.callID,"Call Summary",JSON.stringify(c))};r.prototype.$5=function(a,c){"use strict";c.page_id=b("pageID"),b("FBRTCConsoleLogger").getInstance().getLogHistory().log(a,c),b("MarauderLogger").log(a,b("FBRTCConsoleLogger").MODULE_NAME,c)};r.prototype.$3=function(a,c,d,e,f){f===void 0&&(f="DEBUG"),b("FBRTCConsoleLogger").getInstance().log(e,a,c,d,f)};r.CallAction=Object.freeze({ANSWER_CALL:"answer_call",AUTO_DISABLE_VIDEO:"auto_disable_video",DENIED_PERMISSION:"denied_permission",END_CALL:"end_call",FAILED_GETTING_URI:"failed_getting_uri",OLD_URI:"old_uri",OPEN_POPUP:"open_popup",POPUP_OPENED:"popup_opened",RECEIVED_CALL:"received_call",SET_FULLSCREEN_ON:"set_fullscreen_on",SET_MUTE:"set_mute",SET_SELF_VIEW_ON:"set_self_view_on",SET_VIDEO_ON:"set_video_on",START_CALL:"start_call",START_SKYPE:"start_skype",TRY_NEW:"try_new",USER_SETTINGS_CHANGED:"user_settings_changed"});r.Trigger=Object.freeze({ADMIN_MESSAGE:"admin_message",CHAT_TAB_ICON_TOUR:"chat_tab_icon_tour",CHAT_TAB_ICON:"chat_tab_icon",CHAT_TAB_VOICE_ICON:"chat_tab_voice_icon",MULTIWAY_CHAT_TAB_SHEET_JOIN_CALL_BUTTON:"multiway_chat_tab_sheet_join_call_button",MULTIWAY_POPUP_START_CALL_BUTTON:"multiway_popup_start_call_button",MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:"multiway_thread_header_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_audio_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_audio_call_video_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_video_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_video_call_video_button",MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:"multiway_thread_header_video_button",MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON:"multiway_thread_list_join_call_button",POPUP_CALL_START_BUTTON:"popup_start_call_button",REDIAL_BUTTON:"redial_button",RESET_CALL:"install_screen_sharing_ext_dialog",RETURN_CALL:"return_call",SKYPE_DEPRECATION_DIALOG:"skype_deprecation_dialog",TIMELINE_PROFILE:"timeline_profile",VC_PRECALL_SETUP:"vc_precall_setup",UNKNOWN:"unknown",WEB_MESSENGER:"web_messenger"});r.Key=Object.freeze({CONNECTION_EFFECTIVE_TYPE:"conn_effective_type",CPU_CORES:"cpu_cores",DEVICE_INFO:"device_info",DEVICE_MEMORY:"device_memory",DEVICE_PIXEL_RATIO:"device_pixel_ratio",INITIATED_BY_PAGE_ID:"initiated_by_page_id",PEER_IS_MOBILE:"peer_is_mobile",RATING_SHOWN:"rating_shown",RATING:"rating5",SCREEN_DURATION:"screen_duration",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown",MEDIA_INPUTS:"media_inputs",VIDEO_CAPABILITIES:"video_capabilities"});e.exports=r}),null);
__d("FBRTCMediaMetricTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={count:0,current:-1,first:-1,min:-1,max:-1,mean:-1,median:-1,startedTime:-1,total:-1,updatedTime:-1};function h(){this.$1={},this.$2={},this.$3={}}h.prototype.getVideoStreamReportKeys=function(){return Object.keys(this.$3)};h.prototype.getJitterStreamReportKey=function(){return Object.keys(this.$1)};h.prototype.getAudioStreamReportKeys=function(){return Object.keys(this.$2)};h.prototype.addJitterBufferDelay=function(a,b){b!==null&&b!==undefined&&(this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b))};h.prototype.setVideoMetric=function(a,b,c){c!==null&&c!==undefined&&(this.$3[a]||(this.$3[a]={}),this.$3[a][b]=this.$4(this.$3[a][b],c))};h.prototype.$4=function(a,c){__p&&__p();if(a!==null&&a!==undefined){a.current=c;a.updatedTime=b("performanceNow")();a.total+=c;a.count+=1;a.min=Math.min(a.min,c);a.max=Math.max(a.max,c);a.mean=a.total/a.count;return a}else return{min:c,max:c,total:c,count:1,mean:c,first:c,startedTime:b("performanceNow")(),current:c,updatedTime:b("performanceNow")()}};h.prototype.getVideoMetric=function(a,b){return this.$3[a]?this.$3[a][b]:null};h.prototype.addMetricStat=function(a,b,c){c!==null&&c!==undefined&&(this.$2[a]||(this.$2[a]={}),this.$2[a][b]=this.$4(this.$2[a][b],c))};h.prototype.getMetricStats=function(a,b){return!this.$2[a]?null:this.$2[a][b]};h.prototype.getJitterBufferStats=function(a){__p&&__p();if(!this.$1[a])return g;var b=this.$1[a].length;if(b===0)return g;this.$1[a].sort(function(a,b){return a-b});var c=this.$1[a].reduce(function(a,b){return a+b});if(b%2===0){var d=Math.floor((b-1)/2),e=Math.ceil((b-1)/2);d=(this.$1[a][d]+this.$1[a][e])/2}else d=this.$1[a][(b-1)/2];return{max:this.$1[a][b-1],min:this.$1[a][0],mean:c/b,median:d,total:c,count:b,first:-1,startedTime:-1,current:-1,updatedTime:-1}};h.prototype.toJsonString=function(){return JSON.stringify({stats:this.$2,jitterBufferDelays:this.$1,videoMetric:this.$3})};h.fromJsonString=function(a){var b=new h();try{a=JSON.parse(a),a=a}catch(a){return b}a.stats&&(b.$2=a.stats);a.jitterBufferDelays&&(b.$1=a.jitterBufferDelays);a.videoMetric&&(b.$3=a.videoMetric);return b};e.exports=h}),null);
__d("FBRTCMediaMetricsConst",[],(function(a,b,c,d,e,f){"use strict";a={JITTER:"jitter",ACCELERATE_RATE:"accelerate_rate",DECODING_CNG:"decoding_cng",DECODING_NORMAL:"decoding_normal",DECODING_PLC:"decoding_plc",DECODING_PLC_CNG:"decoding_plc_cng",DISCARD_RATE:"discard_rate",EXPAND_RATE:"expand_rate",PREEMPTIVE_RATE:"preemptive_rate",AUDIO_PACKETS_RECEIVED:"audio_packets_received",AUDIO_PACKETS_RECEIVED_LOST:"audio_packets_received_lost",AUDIO_PACKETS_SENT:"audio_packets_sent",AUDIO_PACKETS_SENT_LOST:"audio_packets_sent_lost",VIDEO_BYTES_RECEIVED:"video_bytes_received",VIDEO_BYTES_SENT:"video_bytes_sent",INBOUND_QP:"inbound_qp",OUTBOUND_QP:"outbound_qp",FRAMES_ENCODED:"frames_encoded",FRAMES_DECODED:"frames_decoded",VIDEOBWE_SEND_BANDWIDTH:"videobwe_send_bandwidth",VIDEOBWE_TRANSMIT_BITRATE:"videobwe_transmit_bitrate",VIDEOBWE_RETRANSMIT_BITRATE:"videobwe_retransmit_bitrate",AUDIO_BYTES_SENT:"audio_bytes_sent",AUDIO_BYTES_RECEIVED:"audio_bytes_received",VIDEO_PKTS_SENT:"video_pkts_sent",VIDEO_PKTS_SEND_LOST:"video_pkts_send_lost",VIDEO_PKTS_RECEIVED:"video_pkts_received",VIDEO_PKTS_RECV_LOST:"video_pkts_receive_lost",AUDIO_RTT_RECEIVED:"audio_rtt_received",AUDIO_RTT_SENT:"audio_rtt_sent"};e.exports=a}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMediaMetricTracker","SiteData","UserAgentData","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g=5*60*1e3,h={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},i={FELLBACK_TO_AUDIO:"f_a",MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a"},j={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"},k={ESCALATION_INITIATION_BUTTON_CLICKED:"esc_init_button",ESCALATION_APPROVED_BUTTON_CLICKED:"esc_appr_button",ESCALATION_DECLINED_BUTTON_CLICKED:"esc_decl_button",USERMEDIA_REQUEST:"media_req",USERMEDIA_SUCCESS:"media_success",USERMEDIA_FAILURE:"media_fail",SENT_ESC_REQUEST:"s_esc_req",RECV_ESC_REQUEST:"r_esc_req",SENT_ESC_REQUEST_ACK:"s_esc_req_ack",RECV_ESC_REQUEST_ACK:"s_esc_req_ack",SENT_ESC_RESPONSE:"s_esc_rep",RECV_ESC_ACCEPT:"r_esc_accept",RECV_ESC_DECLINE:"r_esc_decl",RECV_ESC_TIMEOUT:"r_esc_timeout"},l=[b("FBRTCMediaMetricsConst").ACCELERATE_RATE,b("FBRTCMediaMetricsConst").DISCARD_RATE,b("FBRTCMediaMetricsConst").EXPAND_RATE,b("FBRTCMediaMetricsConst").PREEMPTIVE_RATE];m.nullSummary=function(){"use strict";return new m({peerID:"0",callID:"0",isCaller:!1,callTrigger:"NULL_SUMMARY"})};function m(a){"use strict";this.peerID=String(a.peerID),this.callID=String(a.callID),this.$2=a.isCaller,this.$1=a.version||m.CURRENT_SUMMARY_VERSION,this.$3=b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel(),this.$14=new Date().valueOf(),this.$4=a.callTrigger||null,this.$5={},this.$7={},this.$8={},this.$13={},this.$34=null,this.$35=null,this.$36=null,this.$16=0,this.$17=0,this.$33=!1,this.$24={},this.$9={},this.$10={},this.$11={},this.$12={},this.$37=null,this.$19=b("performanceNow")(),this.$15=0,this.$6={},this.$18=this.$19,this.$20=0,this.$21={},this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_INFO,this.$42()),this.addExtraInfo(b("FBRTCLogger").Key.CPU_CORES,navigator.hardwareConcurrency),window.navigator.deviceMemory!=null&&this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_MEMORY,window.navigator.deviceMemory),window.navigator.connection!=null&&window.navigator.connection.effectiveType!=null&&this.addExtraInfo(b("FBRTCLogger").Key.CONNECTION_EFFECTIVE_TYPE,window.navigator.connection.effectiveType),this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_PIXEL_RATIO,window.devicePixelRatio),this.$43(),this.$23=b("FBRTCIceStatsParser").getInstance(),this.$41=new(b("FBRTCMediaMetricTracker"))(),this.$22=b("FBRTCLogger").getInstance()}m.prototype.toJsonString=function(){"use strict";this.$17=new Date().valueOf();return JSON.stringify({version:this.$1,peerID:this.peerID,callID:this.callID,isCaller:this.$2,uploadLogLevel:this.$3,callType:this.$29,conferenceName:this.$26,joinWithSID:this.$27,activeConn:this.$25,escP2PCallID:this.$28,serverInfoData:this.$30,localVideoDuration:this.$31,remoteVideoDuration:this.$32,startTime:this.$14,trigger:this.$4,signalingTime:this.$5,escStateTimes:this.$7,applicationEventTime:this.$8,videoEscTimes:this.$13,endCallReason:this.$34,endCallSubreason:this.$35,isRemoteEnded:this.$36,lastUpdatedTime:this.$16,lastSerializedTime:this.$17,unsetOnRetrieve:this.$33,openCount:this.$20,extraInfo:this.$21,captureStats:this.$24,gen0IceSentCount:this.$9,gen0IceReceivedCount:this.$10,iceSentCount:this.$11,iceReceivedCount:this.$12,connectionType:this.$37,mediaMetricStats:this.$41.toJsonString(),newSignalingTime:this.$6,accumulatedCallTime:this.$44(),deviceCharged:this.$38,videoReceivedCodec:this.$39,videoSentCodec:this.$40})};m.fromJsonString=function(a){"use strict";__p&&__p();try{a=JSON.parse(a)}catch(a){return null}if(a.version<m.OLDEST_SUPPORTED_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(a,"peerID")||!Object.prototype.hasOwnProperty.call(a,"callID")||!Object.prototype.hasOwnProperty.call(a,"isCaller")||!Object.prototype.hasOwnProperty.call(a,"startTime")||!Object.prototype.hasOwnProperty.call(a,"trigger")||!Object.prototype.hasOwnProperty.call(a,"signalingTime")||!Object.prototype.hasOwnProperty.call(a,"endCallReason")||!Object.prototype.hasOwnProperty.call(a,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(a,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(a,"lastSerializedTime"))return null;var c=new m({peerID:a.peerID,callID:a.callID,isCaller:a.isCaller});c.$1=a.version;c.$3=a.uploadLogLevel;c.$14=a.startTime;c.$4=a.trigger;c.$5=a.signalingTime;c.$34=a.endCallReason;c.$35=a.endCallSubreason;c.$36=a.isRemoteEnded;c.$16=a.lastUpdatedTime;c.$17=a.lastSerializedTime;c.$27=a.joinWithSID;a.callType&&(c.$29=a.callType);a.conferenceName&&(c.$26=a.conferenceName);a.escP2PCallID&&(c.$28=a.escP2PCallID);a.activeConn&&(c.$25=a.activeConn);a.serverInfoData&&(c.$30=a.serverInfoData);a.localVideoDuration&&(c.$31=a.localVideoDuration);a.remoteVideoDuration&&(c.$32=a.remoteVideoDuration);a.unsetOnRetrieve&&(c.$33=a.unsetOnRetrieve);a.openCount&&(c.$20=a.openCount);a.extraInfo&&(c.$21=a.extraInfo);a.captureStats&&(c.$24=a.captureStats);a.gen0IceSentCount&&(c.$9=a.gen0IceSentCount);a.gen0IceReceivedCount&&(c.$10=a.gen0IceReceivedCount);a.iceSentCount&&(c.$11=a.iceSentCount);a.iceReceivedCount&&(c.$12=a.iceReceivedCount);a.newSignalingTime&&(c.$6=a.newSignalingTime);a.accumulatedCallTime&&(c.$15=a.accumulatedCallTime);a.escStateTimes&&(c.$7=a.escStateTimes);a.applicationEventTime&&(c.$8=a.applicationEventTime);a.videoEscTimes&&(c.$13=a.videoEscTimes);a.mediaMetricStats&&(c.$41=b("FBRTCMediaMetricTracker").fromJsonString(a.mediaMetricStats));a.connectionType&&(c.$37=a.connectionType);a.deviceCharged&&(c.$38=a.deviceCharged);a.videoReceivedCodec!==null&&(c.$39=a.videoReceivedCodec);a.videoSentCodec!==null&&(c.$40=a.videoSentCodec);return c};m.restoreOrInitialize=function(a,c,d,e,f,g){"use strict";c=String(c);d=String(d);a=a.retrieveCallSummary(c,d);!a?(a=new m({peerID:c,callID:d,isCaller:e}),f?(a.onFullMessageReceived({msg:f}),a.onOfferAckSent(f)):a.onCallStarted(g||b("FBRTCLogger").Trigger.UNKNOWN),b("FBRTCLogger").getInstance().logError(c,d,"Missing call summary from storage")):a.$33&&(a.$34=null,a.$35=null,a.$36=null,delete a.$5[h.CALL_ENDED],delete a.$6[h.CALL_ENDED],a.$19=0,a.$33=null);return a};m.logSavedSummaries=function(a){"use strict";__p&&__p();var c=a.getLoggableSummaries(),d=c.length;if(d<=0)return;var e=b("FBRTCLogger").getInstance(),f=[];for(var g=0;g<d;g++){var h=c[g];e.logEndCallSummary(h);f.push({peerID:h.peerID,callID:h.callID})}a.removeCallSummaries(f);e.logToConsole("Logged pending summaries: "+d)};m.prototype.isNull=function(){"use strict";var a=m.CANONICAL_NULL_SUMMARY;return this.peerID===a.peerID&&this.callID===a.callID&&this.isCaller()===a.isCaller()&&this.getCallTrigger()===a.getCallTrigger()};m.prototype.save=function(a){"use strict";var c=b("performanceNow")(),d=c-this.$18;if(d>g){this.$22.logInfo(this.peerID,this.callID,"Summary too old: "+d);return}a.storeCallSummary(this.peerID,this.callID,this);this.$18=c};m.prototype.getVersion=function(){"use strict";return this.$1};m.prototype.getLastUpdatedTime=function(){"use strict";return this.$16};m.prototype.setLastUpdatedTime=function(a){"use strict";this.$16=a};m.prototype.getExtraInfo=function(){"use strict";return this.$21};m.prototype.getCallTrigger=function(){"use strict";return this.$4};m.prototype.addExtraInfo=function(a,b){"use strict";this.$21[a]=b,this.$43()};m.prototype.isCaller=function(){"use strict";return this.$2};m.prototype.isNetworkReady=function(){"use strict";if(this.$5[h.NETWORK_READY])return!0;else return!1};m.prototype.isAnswerReceived=function(){"use strict";if(this.$5[h.RECV_ANSWER])return!0;else return!1};m.prototype.onCallStarted=function(a){"use strict";this.$4=a,this.$45(h.CALL_STARTED),this.$43()};m.prototype.setCallTrigger=function(a){"use strict";this.$4=a,this.$43()};m.prototype.onPopupOpened=function(){"use strict";this.$46(i.POPUP_OPENED),this.$20++,this.$43()};m.prototype.onPressedAnswer=function(){"use strict";this.$46(i.PRESSED_ANSWER),this.$43()};m.prototype.onMediaRequested=function(){"use strict";this.$46(i.MEDIA_REQUESTED),this.$43()};m.prototype.onMediaSucceeded=function(){"use strict";this.$46(i.MEDIA_SUCCEEDED),this.$43()};m.prototype.onFellbackToAudio=function(){"use strict";this.$46(i.FELLBACK_TO_AUDIO),this.$43()};m.prototype.setConnectionType=function(a){"use strict";this.$37=a,this.$43()};m.prototype.setVideoCaptureStats=function(a,b){"use strict";this.$24={w:a,h:b},this.$43()};m.prototype.setUploadLogLevel=function(a){"use strict";this.$3=a,this.$43()};m.prototype.getCallType=function(){"use strict";return this.$29};m.prototype.setCallType=function(a){"use strict";this.$29=a,this.addExtraInfo("call_type",a),this.$43()};m.prototype.setVideoDurations=function(a,b){"use strict";this.$31=a,this.$32=b,this.$43()};m.prototype.setScreenDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.SCREEN_DURATION,a)};m.prototype.setConferenceName=function(a){"use strict";this.$26=a,this.$43()};m.prototype.setTotalVideoFilterDuration=function(a){"use strict";this.addExtraInfo("rtc_video_duration_with_filter_enabled",Math.ceil(a).toString())};m.prototype.setCoExperienceEffectDuration=function(a){"use strict";this.addExtraInfo("rtc_effect_total_duration",Math.ceil(a).toString())};m.prototype.setEffectCount=function(a){"use strict";this.addExtraInfo("rtc_effect_count",a.toString())};m.prototype.setJoinWithSID=function(a){"use strict";this.$27=a,this.$43()};m.prototype.setServerInfoData=function(a){"use strict";this.$30=a,this.$43()};m.prototype.setActiveConnection=function(a){"use strict";this.$25=a,this.$43()};m.prototype.setEscalationP2PCallID=function(a){"use strict";this.$28=a,this.$43()};m.prototype.onOfferAckSent=function(a){"use strict";this.onMessageSent({type:b("FBRTCConstants").PayloadType.OFFER_ACK,flag:a.flag})};m.prototype.onMessageSent=function(a){"use strict";__p&&__p();var c=a.flag===1;switch(a.type){case b("FBRTCConstants").PayloadType.OFFER:this.$47(c,h.SENT_OFFER,h.SENT_RETRIED_OFFER);this.$48(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$47(c,h.SENT_ANSWER,h.SENT_RETRIED_ANSWER);this.$48(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.OK:this.$45(h.SENT_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$45(h.SENT_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$47(c,h.SENT_OFFER_ACK,h.SENT_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$47(c,h.SENT_ANSWER_ACK,h.SENT_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$48(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ACK:a.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$49(k.SENT_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:a.ack_id?this.$49(k.SENT_ESC_RESPONSE):this.$49(k.SENT_ESC_REQUEST);break;default:}this.$43()};m.prototype.$48=function(a,b,c){"use strict";var d,e=null;a=this.$23.extractIceInfo(a.sdp);for(var f=0;f<a.length;f++)d=a[f].gen,e=a[f].type,d===0&&this.$50(b,e),this.$50(c,e)};m.prototype.$50=function(a,b){"use strict";!a[b]?a[b]=1:a[b]+=1};m.prototype.$51=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.PEER_IS_MOBILE,a.isFromMobile()?"1":"0")};m.prototype.onFullMessageReceived=function(a){"use strict";__p&&__p();var c=a.msg,d=c.flag===1;switch(c.type){case b("FBRTCConstants").PayloadType.OFFER:this.$51(a);this.$47(d,h.RECV_OFFER,h.RECV_RETRIED_OFFER);this.$48(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$51(a);this.$47(d,h.RECV_ANSWER,h.RECV_RETRIED_ANSWER);this.$48(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.OK:this.$45(h.RECV_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$45(h.RECV_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$47(d,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$47(d,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$48(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.ACK:c.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$49(k.RECV_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:c.ack_id?c.videoon||c.reqVideoOn?this.$49(k.RECV_ESC_ACCEPT):this.$49(k.RECV_ESC_DECLINE):c.videoon||c.reqVideoOn?this.$49(k.RECV_ESC_REQUEST):this.$49(k.RECV_ESC_TIMEOUT);default:}this.$43()};m.prototype.onMsgAckReceived=function(a,b){"use strict";a=a.msg.flag===1;b?this.$47(a,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK):this.$47(a,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK)};m.prototype.onNetworkReady=function(){"use strict";this.$45(h.NETWORK_READY),this.$43()};m.prototype.onCallConnected=function(){"use strict";this.$45(h.CALL_CONNECTED),this.$43()};m.prototype.onCallEnded=function(a,b,c,d){"use strict";this.$33=c,this.$34=String(a),this.$35=d,this.$36=b,this.$45(h.CALL_ENDED),this.$43()};m.prototype.setOfferSentTime=function(){"use strict";this.$45(h.SENT_OFFER)};m.prototype.setOfferAckReceivedTime=function(){"use strict";this.$45(h.RECV_OFFER_ACK)};m.prototype.setAnswerSentTime=function(){"use strict";this.$45(h.SENT_ANSWER)};m.prototype.setAnswerReceivedTime=function(){"use strict";this.$45(h.RECV_ANSWER)};m.prototype.setJoinRequestSent=function(){"use strict";this.$45(h.SENT_JOIN_REQUEST),this.$43()};m.prototype.setJoinResponseReceived=function(){"use strict";this.$45(h.RECV_JOIN_RESPONSE),this.$43()};m.prototype.setJoinResponseProcessed=function(){"use strict";this.$45(h.PROC_JOIN_RESPONSE),this.$43()};m.prototype.setRingRequestReceived=function(){"use strict";this.$45(h.RECV_RING_REQUEST),this.$43()};m.prototype.setRingResponseSent=function(){"use strict";this.$45(h.SENT_RING_RESPONSE),this.$43()};m.prototype.setEscalationAvailable=function(){"use strict";this.$52(j.ESCALATION_IS_AVAILABLE)};m.prototype.setEscalationInitiated=function(){"use strict";this.$52(j.USER_INITIATED_REQUEST)};m.prototype.setReceivedEscalationRequest=function(){"use strict";this.$52(j.RECEIVED_INCOMING_REQUEST)};m.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$52(j.REJECTED_INVALID_P2P_STATE)};m.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$52(j.CONNECTING_TO_MULTIWAY)};m.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$52(j.CONNECTED_TO_MULTIWAY)};m.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$52(j.PEER_CONNECTING_TO_MULTIWAY)};m.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$52(j.PEER_CONNECTED_TO_MULTIWAY)};m.prototype.setReadyToEscalate=function(){"use strict";this.$52(j.READY_TO_ESCALATE)};m.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$52(j.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};m.prototype.setEscalationTimedOut=function(){"use strict";this.$52(j.TIMED_OUT)};m.prototype.setVidEscalationInitClick=function(){"use strict";this.$49(k.ESCALATION_INITIATION_BUTTON_CLICKED)};m.prototype.setVidEscalationAcceptedClick=function(){"use strict";this.$49(k.ESCALATION_APPROVED_BUTTON_CLICKED)};m.prototype.setVidEscalationDeclinedClick=function(){"use strict";this.$49(k.ESCALATION_DECLINED_BUTTON_CLICKED)};m.prototype.setVidEscalationMediaRequested=function(){"use strict";this.$49(k.USERMEDIA_REQUEST)};m.prototype.setVidEscalationMediaSuccess=function(){"use strict";this.$49(k.USERMEDIA_SUCCESS)};m.prototype.setVidEscalationMediaFailed=function(){"use strict";this.$49(k.USERMEDIA_FAILURE)};m.prototype.setVideoCapabilities=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.VIDEO_CAPABILITIES,a)};m.prototype.setMediaInputs=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.MEDIA_INPUTS,a)};m.prototype.getVideoReceivedCodec=function(){"use strict";return this.$39};m.prototype.setVideoReceivedCodec=function(a){"use strict";this.$39=a};m.prototype.getVideoSentCodec=function(){"use strict";return this.$40};m.prototype.setVideoSentCodec=function(a){"use strict";this.$40=a};m.prototype.toString=function(){"use strict";var a={};a.core_metrics=this.$53();a.time_series=null;return JSON.stringify(a)};m.prototype.$53=function(){"use strict";__p&&__p();var a={};a.ver=this.$1;a.log_level=b("FBRTCConstants").uploadLogLevelString(this.$3);a.caller=this.$2;a.call_type=this.$29;a.active_conn=this.$25;a.app_event_times=this.$8;a.conf_name=this.$26;a.join_with_sid=this.$27;a.esc_p2p_call_id=this.$28;a.esc_state_times=this.$7;a.vid_esc_times=this.$13;a.serv_info=this.$30;a.conn=this.$54();a.peer_id=this.peerID;a.has_video=!0;a.open_count=this.$20;a.signaling=this.$55();a.sender=this.$56();a.receiver=this.$57();a.end=this.$58();a.video=this.$59();a.push_phase=b("SiteData").push_phase;a.DebugAudioMetrics=this.$60();a.device_charged=this.$38;return a};m.prototype.$60=function(){"use strict";return{NetworkReceive:{jb_nm:this.$61()}}};m.prototype.$61=function(){"use strict";var a={},b=this.$41.getAudioStreamReportKeys().pop();l.forEach(function(c){var d=this.$41.getMetricStats(b,c);d&&(a[c]={m:d.min,M:d.max,avg:d.mean})}.bind(this));var c=this.$41.getJitterBufferStats(b);a.neteq={maxWait:c.max,meanWait:c.mean||0,mediaWait:c.median||0,minWait:c.min};return a};m.prototype.$54=function(){"use strict";var a={dtls:1},b=this.$56();b.avgrtt&&(a.avgrtt=b.avgrtt,a.maxrtt=b.maxrtt,a.minrtt=b.minrtt);return a};m.prototype.$55=function(){"use strict";__p&&__p();var a={};this.$4&&(a.trigger=this.$4);a.start_time=this.$14;a.time_from_start=this.$5;a.new_time_from_start=this.$6;var b=this.$6[h.CALL_CONNECTED]||this.$6[h.NETWORK_READY],c=this.$6[h.CALL_ENDED];if(b){c||(this.$15>0?c=this.$15:c=this.$44());c=c-b;c>0&&(a.duration=c)}return a};m.prototype.$56=function(){"use strict";__p&&__p();var a={},c=this.$41.getAudioStreamReportKeys();c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_BYTES_SENT);if(c!=null){a.bytes=c.current;var d=c.updatedTime-c.startedTime;d>0&&(a.ube_avg=(c.current-c.first)*8/d*1e3);return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST);if(c){a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT);if(c){a.psent=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_RTT_SENT);if(c){a.avgrtt=c.mean;a.maxrtt=c.max;a.minrtt=c.min;return!0}return!1}.bind(this));this.$9&&(a.ice_g0=this.$9);this.$11&&(a.ice=this.$11);return a};m.prototype.$57=function(){"use strict";__p&&__p();var a={},c=this.$41.getAudioStreamReportKeys();c.some(function(c){__p&&__p();var d=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_PLC),e=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_PLC_CNG),f=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_CNG);c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_NORMAL);if(f!=null&&c!=null&&d!=null&&e!=null){a.dec_cng=f.current;a.dec_normal=c.current;a.dec_plc=d.current;a.dec_plc_cng=e.current;a.neteq_calls=a.dec_cng+a.dec_normal+a.dec_plc+a.dec_plc_cng;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED);if(c){a.bytes=c.current;var d=c.updatedTime-c.startedTime;d>0&&(a.dbe_avg=(c.current-c.first)*8/d*1e3);return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST);if(c){a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED);if(c){a.precv=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_RTT_RECEIVED);if(c){a.avgrtt=c.mean;a.maxrtt=c.max;a.minrtt=c.min;return!0}return!1}.bind(this));this.$10&&(a.ice_g0=this.$10);this.$12&&(a.ice=this.$12);return a};m.prototype.$58=function(){"use strict";var a={};this.$34!==null&&(a.end_call_reason_string=b("FBRTCConstants").callEndReasonString(this.$34),this.$35!==null&&(a.end_call_subreason_string=this.$35),a.remote_ended=this.$36);this.$37&&(a.conn_type=this.$37);return a};m.prototype.$59=function(){"use strict";var a={capture:{},ename:this.$40,eqps:this.$62(),frames:this.$63(),psent:null,ploss:null};this.$24&&Object.assign(a.capture,this.$24);return{sender:this.$64(a),receiver:this.$65(),ld:this.$31,rd:this.$32,bwe:this.$66()}};m.prototype.$62=function(){"use strict";__p&&__p();var a=null,c=this.$41.getVideoStreamReportKeys();c.some(function(c){c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").OUTBOUND_QP);if(c){a=c.current;return!0}return!1}.bind(this));return a};m.prototype.$63=function(){"use strict";__p&&__p();var a=null,c=this.$41.getVideoStreamReportKeys();c.some(function(c){c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").FRAMES_ENCODED);if(c){a=c.current;return!0}return!1}.bind(this));return a};m.prototype.$66=function(){"use strict";__p&&__p();var a={avg_enc_bitrate:this.$67(),avg_send_bw:null,avg_trans_bitrate:null,avg_retrans_bitrate:null},c=this.$41.getVideoStreamReportKeys();c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH),e=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE);if(d&&e&&c){a.avg_send_bw=d.mean;a.avg_trans_bitrate=e.mean;a.avg_retrans_bitrate=c.mean;return!0}return!1}.bind(this));return a};m.prototype.$67=function(){"use strict";__p&&__p();var a=this.$41.getVideoStreamReportKeys(),c=null;a.some(function(a){a=this.$41.getVideoMetric(a,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT);if(a){var d=a.current-a.first;a=a.updatedTime-a.startedTime;a>0&&(c=d*8/a*1e3);return!0}return!1}.bind(this));return c};m.prototype.$64=function(a){"use strict";__p&&__p();var c=this.$41.getVideoStreamReportKeys();c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SENT);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST);if(d&&c){a.psent=d.current;a.ploss=c.current;return!0}return!1}.bind(this));return a};m.prototype.$65=function(){"use strict";__p&&__p();var a={dec_bytes:null,dec_time:null,dname:this.$39,frd:null,precv:null,ploss:null,qps:null},c=this.$41.getVideoStreamReportKeys();c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST);if(d&&c){a.precv=d.current;a.ploss=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED);if(c){a.dec_bytes=c.current-c.first;a.dec_time=c.updatedTime-c.startedTime;return!0}return!1}.bind(this));c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").FRAMES_DECODED);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").INBOUND_QP);if(d&&c){a.frd=d.current;a.qps=c.current;return!0}return!1}.bind(this));return a};m.prototype.$68=function(){"use strict";return new Date().valueOf()-this.$14};m.prototype.$44=function(){"use strict";var a=b("performanceNow")()-this.$19;return Math.floor(this.$15+a)};m.prototype.$45=function(a){"use strict";if(this.$5[a])return;this.$5[a]=this.$68();this.$6[a]=this.$44()};m.prototype.$52=function(a){"use strict";if(this.$7[a])return;this.$7[a]=this.$68()};m.prototype.$46=function(event){"use strict";if(this.$8[event])return;this.$8[event]=this.$68()};m.prototype.$49=function(event){"use strict";if(this.$13[event])return;this.$13[event]=this.$68()};m.prototype.setDeviceCharged=function(a){"use strict";this.$38=a};m.prototype.$47=function(a,b,c){"use strict";a?this.$45(c):this.$45(b)};m.prototype.$43=function(){"use strict";this.$16=new Date().valueOf()};m.prototype.$42=function(){"use strict";return{device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth}};m.prototype.getCallDuration=function(){"use strict";var a=this.$55();return a.duration?a.duration:0};m.prototype.getConnectedStartTime=function(){"use strict";return this.$5[h.CALL_CONNECTED]?this.$5[h.CALL_CONNECTED]+this.$14:0};m.prototype.getCurrentTimeFromCallConnected=function(){"use strict";var a=this.$6[h.CALL_CONNECTED];return this.$44()-a};m.prototype.getMediaMetricTracker=function(){"use strict";return this.$41};m.CANONICAL_NULL_SUMMARY=Object.freeze(m.nullSummary());m.OLDEST_SUPPORTED_SUMMARY_VERSION=19;m.CURRENT_SUMMARY_VERSION=24;m.REPORT_KEY="reportID";e.exports=m}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBLogger","FBRTCCallSummary","FBRTCLogger","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="localstorage",h="RTC_CALL_SUMMARY_",i="summary",j=2e3,k=3,l=3*60*1e3,m=null;n.getInstance=function(){m||(m=new n());return m};function n(){this.$1=new(b("CacheStorage"))(g,h),this.$2=b("FBRTCLogger").getInstance()}n.prototype.storeCallSummary=function(a,c,d){__p&&__p();if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid FBRTCCallSummary!");return}var e=this;this.$3(function(b){__p&&__p();b[a]||(b[a]={});var f=b[a][c];if(f){f=e.$4(f);if(f&&f.getLastUpdatedTime()>d.getLastUpdatedTime()){e.$2.logToConsole("Outdated summaries");return null}}b[a][c]=e.$5(d);return b},e.$2.logError.bind(e.$2,a,c))};n.prototype.retrieveCallSummary=function(a,b){var c=this.getCallSummaries(),d=null;c[a]&&(d=c[a][b]);if(d)return this.$4(d);else return null};n.prototype.removeCallSummary=function(a,b){this.removeCallSummaries([{peerID:a,callID:b}])};n.prototype.removeCallSummaries=function(a){this.$3(function(b){var c=a.length;for(var d=0;d<c;d++){var e=a[d].peerID,f=a[d].callID;b[e]&&b[e][f]&&(delete b[e][f],this.$6(b[e])&&delete b[e])}return b}.bind(this),this.$2.logError.bind(this.$2,null,null))};n.prototype.getLoggableSummaries=function(){var a=this.getCallSummaries(),b=[];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))for(var d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)){var e=this.$4(a[c][d],l);e&&b.push(e)}return b};n.prototype.$6=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0};n.prototype.$5=function(a){a={__t:Date.now(),__d:a.toJsonString()};return a};n.prototype.$4=function(a,c){return a&&(!c||Date.now()-a.__t>=c)?b("FBRTCCallSummary").fromJsonString(a.__d):null};n.prototype.getCallSummaries=function(){var a=this.$1.get(i)||{};return a};n.prototype.$3=function(a,c,d,e){__p&&__p();d===void 0&&(d=k);(d===undefined||d===null)&&(d=k);var f=this.getCallSummaries(),g=this.getCallSummaries();f=a(f);if(f===null)return;var h=this.getCallSummaries();if(b("areEqual")(g,h))this.$1.set(i,f);else if(d>0){c("Retry lock");if(e){var l=this;setTimeout(function(){l.$3(a,c,d-1,!0)},j)}else this.$3(a,c,d-1,!0)}else c("Failed to lock")};e.exports=n}),null);
__d("FBRTCCallSummaryUploader",["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],(function(a,b,c,d,e,f){a={init:function(){var a=b("FBRTCCallSummaryStore").getInstance();b("Banzai").subscribe(b("Banzai").SEND,function(){b("FBRTCCallSummary").logSavedSummaries(a)})}};e.exports=a}),null);
__d("FBRTCLocalMessageQueue",["CacheStorage","FBRTCConsoleLogger"],(function(a,b,c,d,e,f){__p&&__p();var g="localstorage",h="RTC_",i="offer",j="offer_msg",k="data_",l=30*1e3,m=15*1e3,n=500,o=new Map();function a(){"use strict";this.$1=b("FBRTCConsoleLogger").getInstance()}a.prototype.enqueueOffer=function(a,b){"use strict";a=this.$2(a,j);this.$3(a,i,b)};a.prototype.getOffer=function(a){"use strict";a=this.$2(a,j);return this.$4(a,i)};a.prototype.removeOffer=function(a){"use strict";a=this.$2(a,j);a.remove(i)};a.prototype.enqueueMessage=function(a,b,c,d){"use strict";b=k+c.toString();c=o.get(a)||new Map();c.set(b,d);o.set(a,c);this.$1.log("Queued "+b)};a.prototype.drainQueue=function(a,b){"use strict";__p&&__p();var c=o.get(a)||new Map(),d;for(var c=c,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;var d=g[0];g=g[1];void d;b(g)}o.set(a,new Map())};a.prototype.enableDequeuing=function(a,b,c,d){"use strict";d===undefined&&(d=m),this.$5(a,b,c,d)};a.prototype.$5=function(a,b,c,d){"use strict";var e=this.$2(a,b),f=e.keys(),g=f.length;for(var h=0;h<g;h++){var i=this.$6(e,f[h]);i&&c&&c(i)}this.$1.log("Dequeued "+g+" ("+a+") with "+d+" left)");d>0&&(d-=n,setTimeout(function(){this.$5(a,b,c,d)}.bind(this),n))};a.prototype.$3=function(a,b,c){"use strict";c={__t:Date.now(),__d:c};a.set(b,c)};a.prototype.$4=function(a,b){"use strict";var c=a.get(b);if(c&&this.$7(c))return c.__d;else c&&a.remove(b);return null};a.prototype.$6=function(a,b){"use strict";var c=this.$4(a,b);if(c!==null){a.remove(b);return c}return null};a.prototype.$7=function(a){"use strict";return Date.now()-a.__t<l};a.prototype.$2=function(a,c){"use strict";return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")};e.exports=a}),null);
__d("FBRTCExperiment",["FBRTCExperimentsConfig","QE2Logger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.gen=function(a){var c={params:{},auto_exposure:!1,in_experiment:!1};c=b("FBRTCExperimentsConfig")[a]||c;a=new g(a,c);return a};g.getIncomingCallExperiments=function(){return g.gen("rtweb_incoming_call_experiments")};function g(a,b){this.$1=a,this.$2=b}g.prototype.$3=function(){this.$2.auto_exposure&&this.logExposure()};g.prototype.logExposure=function(){this.$2.in_experiment&&b("QE2Logger").logExposureForUser(this.$1)};g.prototype.getParam=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==undefined)return this.$2.params[a].toString()}return b};g.prototype.getInt=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==undefined)return parseInt(this.$2.params[a],10)}return b};g.prototype.getBool=function(a,b){var c=this.$2.params;if(this.$2.in_experiment){this.$3();if(c[a]!==undefined)return c[a]==="1"||c[a]===1||c[a]==="true"||c[a]===!0}return b};e.exports=g}),null);
__d("FBRTCCallControlActions",["FBRTCDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ACCEPT_ESCALATION:null,HANG_UP:null,PARENT_WINDOW_START_CALL:null,TOGGLE_FULL_SCREEN:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_MUTE_VIDEO:null,TOGGLE_SCREEN_SHARING:null,TOGGLE_SELF_VIEW:null,SHOW_SETTINGS:null,START_CALL:null,DECLINE_ESCALATION:null,RECEIVED_SIGNALING_MESSAGE:null,RESET_CALL:null,OPEN_SCREEN_IN_NEW:null,CLOSE_STANDALONE_SCREEN:null,REDIAL_CALL:null});a={Types:g,hangUp:function(){b("FBRTCDispatcher").dispatch({type:g.HANG_UP})},toggleMuteAudio:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_MUTE_AUDIO})},toggleMuteVideo:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_MUTE_VIDEO})},toggleFullScreen:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_FULL_SCREEN})},toggleSelfView:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_SELF_VIEW})},showSettings:function(){b("FBRTCDispatcher").dispatch({type:g.SHOW_SETTINGS})},toggleScreenSharing:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_SCREEN_SHARING})},startCall:function(){b("FBRTCDispatcher").dispatch({type:g.START_CALL})},openScreenInNewWindow:function(){b("FBRTCDispatcher").dispatch({type:g.OPEN_SCREEN_IN_NEW})},receivedSignalingMessage:function(a){b("FBRTCDispatcher").dispatch({type:g.RECEIVED_SIGNALING_MESSAGE,message_type:a.msgType,message:a})},acceptEscalation:function(){b("FBRTCDispatcher").dispatch({type:g.ACCEPT_ESCALATION})},declineEscalation:function(){b("FBRTCDispatcher").dispatch({type:g.DECLINE_ESCALATION})},resetCall:function(a){b("FBRTCDispatcher").dispatch({type:g.RESET_CALL,trigger:a})},redialCall:function(){b("FBRTCDispatcher").dispatch({type:g.REDIAL_CALL})},parentWindowStartCall:function(){b("FBRTCDispatcher").dispatch({type:g.PARENT_WINDOW_START_CALL})}};e.exports=a}),null);
__d("CollabMinimumChromeVersion",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SCREEN_SHARE_CALL:65,VIDEO_CALL:48})}),null);
__d("FBRTCSupport",["CollabMinimumChromeVersion","RTCConfig","UserAgent"],(function(a,b,c,d,e,f){var g={isWebrtcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Firefox >= 25")||b("UserAgent").isBrowser("Edge >= 15.15042")||b("UserAgent").isBrowser("Opera >= 20")},isGroupCallWebtrcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Opera >= 20")},isCollabSupported:function(){return g.isWebrtcSupported()&&(!!b("RTCConfig").CollabWhitelistedBrowserGK||b("UserAgent").isBrowser("Chrome >= "+b("CollabMinimumChromeVersion").VIDEO_CALL))},isMobileDevice:function(){return b("UserAgent").isPlatform("Android")||b("UserAgent").isPlatform("iOS")},isVideoFilterEffectSupported:function(){return!g.isMobileDevice()&&(b("UserAgent").isBrowser("Chrome >= 51")||b("UserAgent").isBrowser("Opera >= 36"))},videoEscalationByUnmuteWorkaround:function(){return b("UserAgent").isBrowser("Firefox < 60")||b("UserAgent").isBrowser("Edge")}};e.exports=g}),null);
__d("FBRTCMessageListener",["invariant","Arbiter","BonfireFeatureGating","ChannelConstants","FBRTCCallControlActions","FBRTCConstants","FBRTCLocalMessageQueue","FBRTCSupport","RTCConfig","guid","mixInEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").ChildWindowMessageType,i=45*1e3,j=[],k=null,l=null,m,n=null,o=null,p=!1,q=null,r=null,s=null;a={init:function(a,c){__p&&__p();if(p)return;p=!0;b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offer"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offerack"),function(a,b){this._onMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_multi_json"),function(a,b){this._onMultiwayMessage(b.obj)}.bind(this));b("BonfireFeatureGating").canReceiveBonfireRingInterop()&&b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("parties_notifications"),function(a,b){this._onBonfireMessage(b.obj)}.bind(this));this._localMessageQueue=new(b("FBRTCLocalMessageQueue"))();if(b("RTCConfig").PassMessagesBetweenWindowsGK){if(b("FBRTCSupport").isWebrtcSupported()&&window.addEventListener){var d=a?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener("message",d,!1)}a&&this._connectToParentWindow(c)}},setParentWindowNonce:function(a){n=a},generateNewNonce:function(){o=b("guid")();return o},setMultiwayMessageHandler:function(a){q&&g(0,1011),q=a},_emit:function(a,b){this.emit(a,b)},_onMultiwayMessage:function(a){this._emit("multiwayMessageReceived",a),q&&q(a)},setBonfireMessageHandler:function(a){r&&g(0,1012),r=a},_onBonfireMessage:function(a){this._emit("bonfireMessageReceived",a),r&&r(a)},setMessageHandler:function(a){k&&g(0,1013);k=a;while(j.length)k(j.shift())},removeMessageHandler:function(){k=null},setParentWindowStartCallHandler:function(a){s=a;return function(){s=null}},_onMessage:function(a){a.from&&(a.from=a.from.toString()),this._emit("messageReceived",a),k?k(a):j.push(a),this._passMessageToChildWindow(a)},_connectToParentWindow:function(a){if(window.opener&&window.opener.postMessage){a={type:h.CHILD_WINDOW_READY,nonce:n,childNonce:this.generateNewNonce(),peerID:a};window.opener.postMessage(a,window.location.origin)}},_verifyWindowMessage:function(event){return Boolean(event.origin===window.location.origin&&event.data&&o!==null&&event.data.nonce===o)},_handleWindowMessageToParent:function(event){if(!this._verifyWindowMessage(event))return;event.data.type===h.CHILD_WINDOW_READY&&(this.setParentWindowNonce(event.data.childNonce),this._setChildWindow(event.source),this._replayQueuedMessagesToChild(event.data.peerID,l))},_handleWindowMessageToChild:function(event){if(!this._verifyWindowMessage(event))return;event.data.type===h.CHILD_WINDOW_MESSAGE&&this._onMessage(event.data.message);event.data.type===h.CHILD_WINDOW_START_CALL&&(s?s():b("FBRTCCallControlActions").parentWindowStartCall())},_replayQueuedMessagesToChild:function(a,b){this._localMessageQueue.drainQueue(a,function(a){a={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:a};b.postMessage(a,window.location.origin)})},_setChildWindow:function(a){l=a,clearTimeout(m),m=setTimeout(function(){l=null},i),this._startCallInChildWindow(),this.generateNewNonce()},_passMessageToChildWindow:function(a){if(l){a={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:a};l.postMessage(a,window.location.origin)}},_startCallInChildWindow:function(){if(l){var a={type:h.CHILD_WINDOW_START_CALL,nonce:n};l.postMessage(a,window.location.origin)}}};b("mixInEventEmitter")(a,{messageReceived:!0,multiwayMessageReceived:!0,bonfireMessageReceived:!0});e.exports=a}),null);
__d("FBRTCMessageHandler",["Bootloader","FBRTCExperiment","FBRTCMessageListener","MessengerRTCMessageHandler"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=!1,i=!1,j=!1,k={init:function(){if(b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_messenger_on_fb",!1)){b("MessengerRTCMessageHandler").init();return}k.initInternal()},initInternal:function(){h===!1&&(h=!0,b("FBRTCMessageListener").init(!1),b("FBRTCMessageListener").once("messageReceived",function(a){k.initIncomingCallController()}),b("FBRTCMessageListener").once("multiwayMessageReceived",function(a){l(a)}),b("FBRTCMessageListener").once("bonfireMessageReceived",function(a){m(a)}))},initIncomingCallController:function(){g||(g=!0,b("Bootloader").loadModules(["FBRTCIncomingCallController","FBRTCIncomingCallDialog","FBRTCMissedVideoCallHandler","FBRTCUnsupportedBrowserMessage"],function(a,c,d,e){b("FBRTCExperiment").getIncomingCallExperiments().logExposure();var f=new a(c,e,new d());b("FBRTCMessageListener").setMessageHandler(function(a){f.onMessageReceived(a)})},"FBRTCMessageHandler"))}};function l(a){i||(i=!0,b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(c,d){b("FBRTCExperiment").getIncomingCallExperiments().logExposure();var e=new c(d,!0);b("FBRTCMessageListener").setMultiwayMessageHandler(function(a){e.onMessageReceived(a)});e.onMessageReceived(a)},"FBRTCMessageHandler"))}function m(a){j||(j=!0,b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(c,d){b("FBRTCExperiment").getIncomingCallExperiments().logExposure();var e=new c(d,!1);b("FBRTCMessageListener").setBonfireMessageHandler(function(a){e.onBonfireMessageReceived(a)});e.onBonfireMessageReceived(a)},"FBRTCMessageHandler"))}e.exports=k}),null);
__d("IgnoreMessagesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setPlatform=function(a){this.$1.platform=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={event:!0,platform:!0,thread_id:!0,vc:!0};e.exports=a}),null);
__d("MercurySyncHolesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setDifference=function(a){this.$1.difference=a;return this};a.prototype.setSeqID=function(a){this.$1.seq_id=a;return this};a.prototype.setTopicType=function(a){this.$1.topic_type=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={difference:!0,seq_id:!0,topic_type:!0,vc:!0};e.exports=a}),null);
__d("PagesCommsInboxTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setClientTime=function(a){this.$1.client_time=a;return this};a.prototype.setCustomerID=function(a){this.$1.customer_id=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setFunnel=function(a){this.$1.funnel=a;return this};a.prototype.setMessageID=function(a){this.$1.message_id=a;return this};a.prototype.setMessagingPlatform=function(a){this.$1.messaging_platform=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={client_time:!0,customer_id:!0,event:!0,funnel:!0,message_id:!0,messaging_platform:!0,page_id:!0,vc:!0};e.exports=a}),null);
__d("ChatActivity",["Arbiter","ArbiterMixin","Event","JSLogger","MercuryConfig","PresenceState","UserActivity","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("MercuryConfig").activity_limit||6e4,i=b("MercuryConfig").idle_limit||18e5,j=b("MercuryConfig").idle_poll_interval||3e5,k=b("JSLogger").create("chat_activity"),l=Date.now(),m=!0;function n(){var a=Date.now();return!!(m&&a-l<h)}c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.isActive=n,b}var o=new a();function p(){var a=l;l=Date.now();l-a>i&&(k.debug("idle_to_active",a),b("PresenceState").doSync());o.inform("activity")}b("Event").listen(window,"focus",function(){m=!0,p()});b("Event").listen(window,"blur",function(){m=!1});b("UserActivity").subscribe(function(){p()});function q(a){a=a&&a.at&&b("PresenceState").verifyNumber(a.at);typeof a!=="number"&&(a=null);return a||0}setInterval(function(){var a=Date.now(),c=q(b("PresenceState").get()),d=Math.max(l,c);a-d>i&&(k.debug("idle",{cookie:c,local:l}),o.inform("idle",a-d))},j);b("PresenceState").registerStateStorer(function(a){var b=q(a);b<l&&(a.at=l);return a});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.chat_activity={activity_limit:h,idle_limit:i,idle_poll_interval:j,last_active_time:l}});e.exports=o}),null);
__d("ChatAppActions",["ChatAppActionTypes","ChatDispatcher"],(function(a,b,c,d,e,f){"use strict";a={tti:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").TTI})},hide:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").HIDE})},unhide:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").UNHIDE})},setInitialDisplayDone:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").INITIAL_DISPLAY_DONE})},load:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").LOAD})}};e.exports=a}),null);
__d("ChatPrivacyActionController",["ChatVisibility","JSLogger","PresencePrivacy"],(function(a,b,c,d,e,f){__p&&__p();a=function a(c,d){__p&&__p();this._userID=c;this._logger=b("JSLogger").create("blackbird");this._getState=function(){return b("ChatVisibility").isOnline()?b("PresencePrivacy").allows(this._userID)?a.NORMAL:a.BLOCKED:a.OFFLINE};this._togglePrivacy=function(){__p&&__p();this._getState();switch(this._getState()){case a.OFFLINE:if(b("ChatVisibility").isOnline()){this._logger.error("tabs_already_online");break}this._logger.log("tabs_go_online",{tab_id:this._userID});b("ChatVisibility").goOnline(function(){b("PresencePrivacy").allows(this._userID)||(this._getState()!==a.BLOCKED&&this._logger.error("privacy_action_controller_blocked_inconsistency"),this._togglePrivacy())}.bind(this));break;case a.BLOCKED:b("PresencePrivacy").allow(this._userID);this._logger.log("tabs_unblock",{tab_id:this._userID});break;case a.NORMAL:b("PresencePrivacy").disallow(this._userID);this._logger.log("tabs_block",{tab_id:this._userID});break}};c=function(){d&&d(this._getState())}.bind(this);c();this._subscribeToken=b("PresencePrivacy").subscribe("privacy-changed",c)};a.OFFLINE="offline";a.BLOCKED="blocked";a.NORMAL="normal";Object.assign(a.prototype,{togglePrivacy:function(){this._logger.log("gear_menu_toggle_privacy",{tab_id:this._userID}),this._togglePrivacy()},destroy:function(){this._subscribeToken&&b("PresencePrivacy").unsubscribe(this._subscribeToken)}});e.exports=a}),null);
__d("MessengerActions",["invariant","Bootloader","EventProfiler","LogHistory","MercuryIDs","MercuryTypeaheadConstants","MessengerDispatcher","MessengerURISerializer","MessengerView","URI","goURI","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("keyMirror")({CANCEL_FILE_UPLOAD:null,EMPTY_FILES:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,REMOVE_SHARE_PREVIEW:null,PREPARE_FILES_FOR_SEND:null,REPLACE_STATE:null,SELECT_THREAD:null,UPDATE_MDOT_ME:null,UPDATE_THREAD_TAG:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null}),i=b("LogHistory").getInstance("messenger_actions"),j={Types:h,changeDetailView:function(a){l(function(b){return b.detailView!==a?{detailView:a}:null})},changeMasterView:function(a){l(function(c){if(c.masterView!==a){var d={masterView:a};c.masterView===b("MessengerView").MASTER.SEARCH&&(d.query=undefined,b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(a,b){a&&a.endFunnel(b.FUNNEL_LOGGER_TAGS.END_WITH_BACK_BUTTON)},"MessengerActions"));return d}return null})},selectThread:function(a,c){__p&&__p();if(c===b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE){!a&&g(0,5146);c=b("MercuryIDs").getUserIDFromThreadID(a);!c&&g(0,5147);var d=new(b("URI"))(),e=d.getQualifiedURI().getSubdomain();d.setDomain("facebook.com").setSubdomain(e).setPath("/"+c).setProtocol("https");window.open(d,"_blank");return}b("EventProfiler").tagCurrentActiveInteractionsAs("MessengerThreadSwitch");b("MessengerDispatcher").dispatch({type:h.SELECT_THREAD,threadID:a});l(function(c){return c.activeThreadID!==a?{activeThreadID:a,detailView:b("MessengerView").DETAIL.THREAD,mid:null}:null})},changeState:function(a){b("MessengerDispatcher").dispatch({type:h.REPLACE_STATE,nextState:a})},changeMDotMeReferral:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:j.Types.UPDATE_MDOT_ME,refCode:a,refThreadID:c})},changeThreadTag:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:j.Types.UPDATE_THREAD_TAG,messagingTags:a,threadID:c})},changeFolder:function(a){l(function(b){return b.folder!==a?{folder:a}:null})},changeFilter:function(a){l(function(b){return b.filter!==a?{filter:a}:null})},changeQuery:function(a){l(function(b){return b.query!==a?{query:a}:null})},changeQueryAll:function(a){l(function(c){return c.queryAll!==a?{query:a,masterView:b("MessengerView").MASTER.SEARCH}:null})},changeMid:function(a){l(function(b){return b.mid!==a?{mid:a}:null})},changeID:function(a){l(function(b){return b.extraQueryParams.id!==a?{extraQueryParams:babelHelpers["extends"]({},b.extraQueryParams,{id:a})}:null})},prepareFilesForSend:function(a,c,d){i.debug("Add files from "+d,a);if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.PREPARE_FILES_FOR_SEND,threadID:a,files:c})},uploadedFile:function(a,c,d){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.UPLOADED_FILE,threadID:a,uploadID:c,payload:d})},cancelFileUpload:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.CANCEL_FILE_UPLOAD,threadID:a,uploadID:c})},uploadFileFailed:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.UPLOAD_FILE_FAILED,threadID:a,uploadID:c})},cleanFiles:function(a){i.debug("clean files",a);if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.EMPTY_FILES,threadID:a})},loadingPreview:function(a,c){b("MessengerDispatcher").dispatch({type:j.Types.LINK_PREVIEW,threadID:a,match:c})},loadingShareData:function(a){b("MessengerDispatcher").dispatch({type:j.Types.LOADING_SHARE_DATA,threadID:a})},loadedShareData:function(a,c){b("MessengerDispatcher").dispatch({type:j.Types.LOADED_SHARE_DATA,threadID:a,attachmentData:c})},removeSharePreview:function(a){b("MessengerDispatcher").dispatch({type:j.Types.REMOVE_SHARE_PREVIEW,threadID:a})}};function k(a,b){return a.detailView==null}function l(a){var c=b("MessengerURISerializer").deserialize(new(b("URI"))(window.location.href));a=a(c);var d=k(c,a);a&&b("goURI")(b("MessengerURISerializer").serialize(Object.assign(c,a)),!1,d)}e.exports=j}),null);
__d("JSSet.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Array.from(a.values())}f.values=a}),null);
__d("MercuryActionStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10})}),null);
__d("MercuryFilters.bs",["MessagingTag"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessagingTag").UNREAD;d=b("MessagingTag").GROUPS;function a(){return[g]}function c(a){return a===g}e="all";f.all=e;f.unread=g;f.groups=d;f.getSupportedFilters=a;f.isSupportedFilter=c}),null);
__d("MercuryGlobalActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MARK_ALL_READ:"mga-type:mark-all-read",MARK_ALL_SEEN:"mga-type:mark-all-seen"})}),null);
__d("MercuryMessageIDs.bs",["bs_curry","KeyedCallbackManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("KeyedCallbackManager"))();function a(a,c){var d=a.filter(function(a){return a.indexOf("id")===-1}),e=function(d){return b("bs_curry")._1(c,a.map(function(a){var b=d[a];if(b!==undefined)return b;else return a}))};return g.executeOrEnqueue(d,e)}function c(a,b){g.setResource(a,b);return 0}f.getServerIDs=a;f.addServerID=c}),null);
__d("MessengerFolders.bs",["MessagingTag","MercuryFoldersConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=[b("MessagingTag").INBOX,b("MessagingTag").PENDING,b("MessagingTag").OTHER,b("MessagingTag").ACTION_ARCHIVED];var g=d.filter(function(a){if(a===b("MessagingTag").PENDING)return!b("MercuryFoldersConfig").hide_message_filtered;else if(a===b("MessagingTag").OTHER)return!b("MercuryFoldersConfig").hide_message_requests;else return!0});function a(){return[].concat(g)}function c(a){if(a.is_archived)return b("MessagingTag").ACTION_ARCHIVED;else return a.folder}f.getSupportedFolders=a;f.getFromMeta=c}),null);
__d("bs_js_json",["bs_block","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=typeof a;if(c==="string")return b("bs_block").__(0,[a]);else if(c==="number")return b("bs_block").__(1,[a]);else if(c==="boolean")if(a===!0)return 1;else return 0;else if(a===null)return 2;else if(Array.isArray(a))return b("bs_block").__(3,[a]);else return b("bs_block").__(2,[a])}function c(a,b){switch(b){case 0:return typeof a==="string";case 1:return typeof a==="number";case 2:if(a!==null&&typeof a==="object")return!Array.isArray(a);else return!1;case 3:return Array.isArray(a);case 4:return typeof a==="boolean";case 5:return a===null}}function d(a){if(typeof a==="string")return a}function e(a){if(typeof a==="number")return a}function g(a){if(typeof a==="object"&&!Array.isArray(a)&&a!==null)return b("bs_js_primitive").some(a)}function h(a){if(Array.isArray(a))return a}function i(a){if(typeof a==="boolean")return a}function j(a){if(a===null)return null}f.classify=a;f.test=c;f.decodeString=d;f.decodeNumber=e;f.decodeObject=g;f.decodeArray=h;f.decodeBoolean=i;f.decodeNull=j}),null);
__d("MessengerMessage.bs",["URI","bs_array","Utils.bs","bs_js_json","bs_caml_obj","bs_js_primitive","MercuryViewer","bs_caml_primitive","MercuryActionType","MercuryActionStatus","MercuryPayloadSource","isMessengerDotComURI","MercuryLogMessageType","MercuryMessageDeliveryState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var b=a.offline_threading_id;if(b==null)return!1;else return b===a.message_id}function c(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE))return!0;else{a=a.log_message_type;if(a==null)return!0;else return!(b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").UNSUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SERVER_ERROR)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").LIVE_LISTEN))}}function d(a){__p&&__p();var c=a.ranges;if(c==null)return 0;else{c=b("bs_array").map(function(c){__p&&__p();var a=c.entity;if(a==null)return c;else{var d=b("Utils.bs").isTruthy(a.external),e=a.url;if(d||e==null)return c;else{d=new(b("URI"))(e);e=b("isMessengerDotComURI")(b("URI").getRequestURI());var f=d.getDomain();if(e&&(f==null||f===""))e=1;else return c;if(e===1)return Object.assign(Object.assign({},c),{entity:Object.assign(Object.assign({},a),{url:d.setProtocol("https").setDomain("www.facebook.com").toString()})})}}},c);Object.assign(a,{ranges:c});return 0}}function e(){return!0}function g(a){return a.filter(function(){return!0})}function h(a){if(b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").UNKNOWN)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_INITIAL_DATA)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_THREAD_SYNC)}function i(a){return b("bs_caml_obj").caml_equal(a.author,b("MercuryViewer").getID())}function j(a){return!i(a)}function k(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNSENT)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNCONFIRMED)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").RESENDING)}function l(a){a=a.status;if(a==null)return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").SUCCESS)}function m(a,c){return b("bs_caml_primitive").caml_float_compare(a.timestamp,c.timestamp)}function n(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").FAILED_UNKNOWN_REASON)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").ERROR)}function o(a,c){__p&&__p();if(n(a))return b("MercuryMessageDeliveryState").ERROR;else if(k(a))return b("MercuryMessageDeliveryState").SENDING;else if(l(a)){a=a.timestamp<=c;if(a)return b("MercuryMessageDeliveryState").DELIVERED;else return b("MercuryMessageDeliveryState").SENT}else return b("MercuryMessageDeliveryState").UNKNOWN}function p(a){__p&&__p();try{a=b("bs_js_primitive").some(JSON.parse(a))}catch(b){a=undefined}if(a!==undefined){a=b("bs_js_json").classify(b("bs_js_primitive").valFromOption(a));if(typeof a==="number"||a.tag!==2)return undefined;else{a=a[0].persona;if(a!==undefined){a=b("bs_js_json").classify(a);if(typeof a==="number"||a.tag!==2)return undefined;else return b("bs_js_primitive").some(a[0])}else return undefined}}}function q(a){__p&&__p();if(a==null)return null;else{a=a.platform_xmd;if(a==null)return null;else{a=p(a);if(a!==undefined){a=b("bs_js_primitive").valFromOption(a);var c=a.id,d=a.name;a=a.profile_picture_url;if(c!==undefined&&d!==undefined&&a!==undefined)return{id:c,name:d,profile_picture_url:a};else return null}else return null}}}function r(a){var c=a.log_message_type;if(!(c==null)&&b("bs_caml_obj").caml_equal(c,b("MercuryLogMessageType").SERVER_ERROR))return b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE);else return!1}function s(a,b){var c=a.thread_fbid,d=a.other_user_fbid;a=a.is_from_iris;if(b==null||!b)b=1;else return!1;if(b===1)if(!(c==null)||!(d==null)||a)return!0;else return!1}f.isLocalMessage=a;f.isTitanMessage=c;f.finalizeRanges=d;f.canSaveMessage=e;f.getSavedMessages=g;f.shouldSortForPayloadSource=h;f.isOutbound=i;f.isInbound=j;f.isSending=k;f.isSent=l;f.compare=m;f.hasError=n;f.getDeliveryState=o;f.getPersonaData=p;f.getPersona=q;f.isErrorLogMessage=r;f.hasServerTimestamp=s}),null);
__d("MessengerPersonas.bs",["bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){if(a==null)return 0;else{var b=g[a.id];if(b!==undefined)return 0;else{g[a.id]=a;return 0}}}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(g[a]))}f.personas=g;f.addPersona=a;f.getNow=c}),null);
__d("MessengerFluxReduceDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("MessengerSharedMediaActions",["MessengerFluxReduceDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CURRENT_LOADED:null,DELETE_PHOTOS:null,LATEST_LOADED:null,LOAD_CURRENT:null,LOAD_MORE_LATEST:null,LOAD_MORE_PREVIOUS:null,PREVIOUS_LOADED:null}),h="MessengerSharedMedia";a={Types:g,Namespace:h,currentLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.CURRENT_LOADED,namespace:h,data:a})},deletePhotos:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:g.DELETE_PHOTOS,namespace:h,threadFBID:a,photoFBIDs:c})},loadCurrent:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_CURRENT,namespace:h,threadFBID:a,photoID:c})},loadMorePrevious:function(a,c,d){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_MORE_PREVIOUS,namespace:h,threadFBID:a,afterCursor:c,first:d})},loadMoreLatest:function(a,c,d){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_MORE_LATEST,namespace:h,threadFBID:a,beforeCursor:c,last:d})},previousLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.PREVIOUS_LOADED,namespace:h,data:a})},latestLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.LATEST_LOADED,namespace:h,data:a})}};e.exports=a}),null);
__d("MessengerJoinableModeType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRIVATE:0,JOINABLE:1})}),null);
__d("MessengerThreadUtils.bs",["FBID.bs","bs_caml_obj","MercuryIDs","MessagingTag","ImmutableObject","MessengerJoinableModeType","MessengerObjectAssociationType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){return c.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a)}).length<=1}function h(a,c,d,e){var f=b("MercuryIDs").tokenize(c),h=f.type;f=f.value;var i=h==="user";return new(b("ImmutableObject"))({thread_id:c,participants:Array.from(d),admins:{},name:"",snippet:"",snippet_sender:null,unread_count:e==null?0:e,message_count:0,image_src:null,timestamp:0,other_user_fbid:i?b("FBID.bs").ofStringExn(f):null,is_canonical_user:h==="user",is_canonical:g(a,d),is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:undefined,cannot_reply_reason:null,comm_item_owners:null,comm_source_id:null,comm_status:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,group_approval_queue:null,work_associated_group:null,groups_sync_status:null,has_email_participant:!1,has_montage:!1,header_color:null,is_canonical_neo_user:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{mode:0,link:""},last_message_timestamp:0,last_message_type:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,object_association_type:null,page_comm_item_id:null,page_thread_info:null,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!1,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],solid_color:null,subtitle:null,theme_id:null,thread_fbid:null,thread_type:null,gradient_colors:[],joinable_link:null})}function a(a,c,d,e){a=h(a,c,d,null);return b("ImmutableObject").set(a,{associated_object:e,name:e.name,joinable_mode:{mode:b("MessengerJoinableModeType").JOINABLE,link:""},object_association_type:b("MessengerObjectAssociationType").GENERAL_CHAT})}f.isCanonicalFromInitialParticipants=g;f.createNewLocalThread=h;f.createNewLocalGroupGeneralThread=a}),null);
__d("bs_belt_Id",["bs_curry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a=a[0];return[a]}function c(a){a=a[0];a=b("bs_curry").__2(a);return[a]}function d(a){return[a]}function e(a){a=b("bs_curry").__2(a);return[a]}function g(a){var b=a[0];a=a[1];return[b,a]}function h(a){var c=a[0];c=b("bs_curry").__1(c);a=a[1];a=b("bs_curry").__2(a);return[c,a]}function i(a,b){return[a,b]}function j(a,c){a=b("bs_curry").__1(a);c=b("bs_curry").__2(c);return[a,c]}f.MakeComparableU=a;f.MakeComparable=c;f.comparableU=d;f.comparable=e;f.MakeHashableU=g;f.MakeHashable=h;f.hashableU=i;f.hashable=j}),null);
__d("ParticipantId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable([a]);d=c[0];f.cmp=d}),null);
__d("bs_js_int",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a===b}b=2147483647;c=-2147483648;f.equal=a;f.max=b;f.min=c}),null);
__d("bs_js_math",["bs_js_int"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return Math.ceil(a)}function c(a){if(a>b("bs_js_int").max)return b("bs_js_int").max;else if(a<b("bs_js_int").min)return b("bs_js_int").min;else return Math.ceil(a)}function d(a){return Math.floor(a)}function g(a){if(a>b("bs_js_int").max)return b("bs_js_int").max;else if(a<b("bs_js_int").min)return b("bs_js_int").min;else return Math.floor(a)}function e(a,b){return g(Math.random()*(b-a|0))+a|0}var h=c,i=g;f.unsafe_ceil=a;f.ceil_int=c;f.ceil=h;f.unsafe_floor=d;f.floor_int=g;f.floor=i;f.random_int=e}),null);
__d("bs_belt_Array",["bs_curry","bs_js_math","bs_js_primitive","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){if(c>=0&&c<a.length)return b("bs_js_primitive").some(a[c])}function c(a,b){if(!(b>=0&&b<a.length))throw new Error('File "belt_Array.ml", line 25, characters 6-12');return a[b]}function d(a,b,c){if(b>=0&&b<a.length){a[b]=c;return!0}else return!1}function e(a,b,c){if(!(b>=0&&b<a.length))throw new Error('File "belt_Array.ml", line 31, characters 4-10');a[b]=c;return 0}function g(a,b,c){var d=a[b];a[b]=a[c];a[c]=d;return 0}function h(a){var c=a.length;for(var d=0,e=c-1|0;d<=e;++d)g(a,d,b("bs_js_math").random_int(d,c));return 0}function i(a){a=a.slice(0);h(a);return a}function j(a){var b=a.length;a=a;var c=0;b=b;for(var d=0,e=(b/2|0)-1|0;d<=e;++d)g(a,c+d|0,((c+b|0)-d|0)-1|0);return 0}function k(a){var b=a.length,c=new Array(b);for(var d=0,e=b-1|0;d<=e;++d)c[d]=a[(b-1|0)-d|0];return c}function l(a,b){if(a<=0)return[];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b;return c}}function m(a,b){if(a<=0)return[];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b(d);return c}}function n(a,c){return m(a,b("bs_curry").__1(c))}function o(a,b){a=m(a,b);h(a);return a}function p(a,c){return o(a,b("bs_curry").__1(c))}function q(a,b){b=b-a|0;if(b<0)return[];else{var c=new Array(b+1|0);for(var d=0;d<=b;++d)c[d]=a+d|0;return c}}function r(a,b,c){__p&&__p();b=b-a|0;if(b<0||c<=0)return[];else{b=(b/c|0)+1|0;var d=new Array(b);a=a;for(var e=0,b=b-1|0;e<=b;++e)d[e]=a,a=a+c|0;return d}}function s(a,b){var c=a.length,d=b.length;c=c<d?c:d;d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=[a[e],b[e]];return d}function t(a,b,c){var d=a.length,e=b.length;d=d<e?d:e;e=new Array(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=c(a[f],b[f]);return e}function u(a,c,d){return t(a,c,b("bs_curry").__2(d))}function v(a,b){var c=a.length,d=b.length,e=new Array(c+d|0);for(var f=0,g=c-1|0;f<=g;++f)e[f]=a[f];for(var a=0,f=d-1|0;a<=f;++a)e[c+a|0]=b[a];return e}function w(a){__p&&__p();var b=a.length,c=0;for(var d=0,e=b-1|0;d<=e;++d)c=c+a[d].length|0;d=new Array(c);c=0;for(var e=0,b=b-1|0;e<=b;++e){var f=a[e];for(var g=0,h=f.length-1|0;g<=h;++g)d[c]=f[g],c=c+1|0}return d}function x(a,c,d){__p&&__p();if(d<=0)return[];else{var e=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(e+c|0,0):c;e=e-c|0;e=e<d?e:d;if(e<=0)return[];else{d=new Array(e);for(var f=0,e=e-1|0;f<=e;++f)d[f]=a[c+f|0];return d}}}function y(a,c){var d=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(d+c|0,0):c;d=d-c|0;var e=new Array(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=a[c+f|0];return e}function z(a,c,d,e){__p&&__p();if(d>0){var f=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(f+c|0,0):c;f=f-c|0;f=f<d?f:d;if(f>0){for(var d=c,c=(c+f|0)-1|0;d<=c;++d)a[d]=e;return 0}else return 0}else return 0}function A(a,b,c,d,e){if(d<=b){for(var f=0,g=e-1|0;f<=g;++f)c[f+d|0]=a[f+b|0];return 0}else{for(var f=e-1|0;f>=0;--f)c[f+d|0]=a[f+b|0];return 0}}function B(a,c,d,e,f){__p&&__p();var g=a.length,h=d.length;c=c<0?b("bs_caml_primitive").caml_int_max(g+c|0,0):c;e=e<0?b("bs_caml_primitive").caml_int_max(h+e|0,0):e;f=b("bs_caml_primitive").caml_int_min(f,b("bs_caml_primitive").caml_int_min(g-c|0,h-e|0));if(e<=c){for(var g=0,h=f-1|0;g<=h;++g)d[g+e|0]=a[g+c|0];return 0}else{for(var g=f-1|0;g>=0;--g)d[g+e|0]=a[g+c|0];return 0}}function C(a,b){for(var c=0,d=a.length-1|0;c<=d;++c)b(a[c]);return 0}function D(a,c){return C(a,b("bs_curry").__1(c))}function E(a,b){var c=a.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=b(a[e]);return d}function F(a,c){return E(a,b("bs_curry").__1(c))}function G(a,b){var c=a.length,d=new Array(c),e=0;for(var f=0,c=c-1|0;f<=c;++f){var g=a[f];b(g)&&(d[e]=g,e=e+1|0)}d.length=e;return d}function H(a,c){return G(a,b("bs_curry").__1(c))}function I(a,b){var c=a.length,d=new Array(c),e=0;for(var f=0,c=c-1|0;f<=c;++f){var g=a[f];b(g,f)&&(d[e]=g,e=e+1|0)}d.length=e;return d}function J(a,c){return I(a,b("bs_curry").__2(c))}function K(a,c){var d=a.length,e=new Array(d),f=0;for(var g=0,d=d-1|0;g<=d;++g){var h=a[g];h=c(h);h!==undefined&&(e[f]=b("bs_js_primitive").valFromOption(h),f=f+1|0)}e.length=f;return e}function L(a,c){return K(a,b("bs_curry").__1(c))}function M(a,b){for(var c=0,d=a.length-1|0;c<=d;++c)b(c,a[c]);return 0}function N(a,c){return M(a,b("bs_curry").__2(c))}function O(a,b){var c=a.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=b(e,a[e]);return d}function P(a,c){return O(a,b("bs_curry").__2(c))}function Q(a,b,c){b=b;for(var d=0,e=a.length-1|0;d<=e;++d)b=c(b,a[d]);return b}function aa(a,c,d){return Q(a,c,b("bs_curry").__2(d))}function R(a,b,c){b=b;for(var d=a.length-1|0;d>=0;--d)b=c(b,a[d]);return b}function ba(a,c,d){return R(a,c,b("bs_curry").__2(d))}function S(a,c,d,e){d=d;var f=b("bs_caml_primitive").caml_int_min(a.length,c.length);for(var f=f-1|0;f>=0;--f)d=e(d,a[f],c[f]);return d}function ca(a,c,d,e){return S(a,c,d,b("bs_curry").__3(e))}function T(a,b){__p&&__p();var c=a.length;a=a;var d=0;b=b;c=c;while(!0){var e=d;if(e===c)return!0;else if(b(a[e])){d=e+1|0;continue}else return!1}}function da(a,c){return T(a,b("bs_curry").__1(c))}function U(a,b){__p&&__p();var c=a.length;a=a;var d=0;b=b;c=c;while(!0){var e=d;if(e===c)return!1;else if(b(a[e]))return!0;else{d=e+1|0;continue}}}function ea(a,c){return U(a,b("bs_curry").__1(c))}function V(a,b,c,d,e){__p&&__p();while(!0){var f=c;if(f===e)return!0;else if(d(a[f],b[f])){c=f+1|0;continue}else return!1}}function W(a,c,d){return V(a,c,0,d,b("bs_caml_primitive").caml_int_min(a.length,c.length))}function fa(a,c,d){return W(a,c,b("bs_curry").__2(d))}function X(a,c,d){__p&&__p();var e=a,f=c,g=0;d=d;a=b("bs_caml_primitive").caml_int_min(a.length,c.length);while(!0){c=g;if(c===a)return!1;else if(d(e[c],f[c]))return!0;else{g=c+1|0;continue}}}function ga(a,c,d){return X(a,c,b("bs_curry").__2(d))}function Y(a,b,c){var d=a.length,e=b.length;if(d===e)return V(a,b,0,c,d);else return!1}function ha(a,c,d){return Y(a,c,b("bs_curry").__2(d))}function Z(a,b,c){__p&&__p();var d=a.length,e=b.length;if(d>e)return 1;else if(d<e)return-1;else{e=a;a=b;b=0;c=c;d=d;while(!0){var f=b;if(f===d)return 0;else{var g=c(e[f],a[f]);if(g===0){b=f+1|0;continue}else return g}}}}function ia(a,c,d){return Z(a,c,b("bs_curry").__2(d))}function $(a,b){var c=a.length,d=0,e=0,f=new Array(c),g=new Array(c);for(var h=0,c=c-1|0;h<=c;++h){var i=a[h];b(i)?(f[d]=i,d=d+1|0):(g[e]=i,e=e+1|0)}f.length=d;g.length=e;return[f,g]}function ja(a,c){return $(a,b("bs_curry").__1(c))}function ka(a){var b=a.length,c=new Array(b),d=new Array(b);for(var e=0,b=b-1|0;e<=b;++e){var f=a[e];c[e]=f[0];d[e]=f[1]}return[c,d]}f.get=a;f.getExn=c;f.set=d;f.setExn=e;f.shuffleInPlace=h;f.shuffle=i;f.reverseInPlace=j;f.reverse=k;f.make=l;f.range=q;f.rangeBy=r;f.makeByU=m;f.makeBy=n;f.makeByAndShuffleU=o;f.makeByAndShuffle=p;f.zip=s;f.zipByU=t;f.zipBy=u;f.unzip=ka;f.concat=v;f.concatMany=w;f.slice=x;f.sliceToEnd=y;f.fill=z;f.blit=B;f.blitUnsafe=A;f.forEachU=C;f.forEach=D;f.mapU=E;f.map=F;f.keepU=G;f.keep=H;f.keepWithIndexU=I;f.keepWithIndex=J;f.keepMapU=K;f.keepMap=L;f.forEachWithIndexU=M;f.forEachWithIndex=N;f.mapWithIndexU=O;f.mapWithIndex=P;f.partitionU=$;f.partition=ja;f.reduceU=Q;f.reduce=aa;f.reduceReverseU=R;f.reduceReverse=ba;f.reduceReverse2U=S;f.reduceReverse2=ca;f.someU=U;f.some=ea;f.everyU=T;f.every=da;f.every2U=W;f.every2=fa;f.some2U=X;f.some2=ga;f.cmpU=Z;f.cmp=ia;f.eqU=Y;f.eq=ha}),null);
__d("bs_belt_SortArray",["bs_curry","bs_belt_Array"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b,c,d,e){__p&&__p();while(!0){var f=c,g=b;if(f>=d)return f;else{var h=a[f];if(e(h,g)){c=f+1|0;b=h;continue}else return f}}}function h(a,b){__p&&__p();var c=a.length;if(c===0||c===1)return c;else{var d=a[0],e=a[1];if(b(d,e)){var f=a,h=e,i=2,j=c,k=b;while(!0){var l=i,m=h;if(l>=j)return l;else{var n=f[l];if(k(m,n)){i=l+1|0;h=n;continue}else return l}}}else if(b(e,d))return-g(a,e,2,c,b)|0;else return 1}}function a(a,c){return h(a,b("bs_curry").__2(c))}function i(a,b){__p&&__p();var c=a.length;if(c===0)return!0;else{a=a;var d=0;b=b;c=c-1|0;while(!0){var e=d;if(e===c)return!0;else if(b(a[e],a[e+1|0])<=0){d=e+1|0;continue}else return!1}}}function c(a,c){return i(a,b("bs_curry").__2(c))}function j(a,c,d,e,f,g,h,i,j){__p&&__p();d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;if(j(p,n)<=0){h[m]=p;p=q+1|0;if(p<d){i=m+1|0;c=a[p];k=p;continue}else return b("bs_belt_Array").blitUnsafe(e,o,h,m+1|0,g-o|0)}else{h[m]=n;p=o+1|0;if(p<g){i=m+1|0;f=e[p];l=p;continue}else return b("bs_belt_Array").blitUnsafe(a,q,h,m+1|0,d-q|0)}}}function k(a,c,d,e,f,g,h,i,j){__p&&__p();d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k,r=j(p,n);if(r<0){h[m]=p;var s=q+1|0,t=m+1|0;if(s<d){i=t;c=a[s];k=s;continue}else{b("bs_belt_Array").blitUnsafe(e,o,h,t,g-o|0);return(t+g|0)-o|0}}else if(r===0){h[m]=p;s=q+1|0;t=o+1|0;r=m+1|0;if(s<d&&t<g){i=r;f=e[t];l=t;c=a[s];k=s;continue}else if(s===d){b("bs_belt_Array").blitUnsafe(e,t,h,r,g-t|0);return(r+g|0)-t|0}else{b("bs_belt_Array").blitUnsafe(a,s,h,r,d-s|0);return(r+d|0)-s|0}}else{h[m]=n;p=o+1|0;t=m+1|0;if(p<g){i=t;f=e[p];l=p;continue}else{b("bs_belt_Array").blitUnsafe(a,q,h,t,d-q|0);return(t+d|0)-q|0}}}}function d(a,c,d,e,f,g,h,i,j){return k(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function l(a,b,c,d,e,f,g,h,i){__p&&__p();c=b+c|0;f=e+f|0;var j=b;b=a[b];var k=e;e=d[e];h=h;while(!0){var l=h,m=e,n=k,o=b,p=j;m=i(o,m);if(m<0){var q=p+1|0;if(q<c){b=a[q];j=q;continue}else return l}else if(m===0){g[l]=o;q=p+1|0;m=n+1|0;o=l+1|0;if(q<c&&m<f){h=o;e=d[m];k=m;b=a[q];j=q;continue}else return o}else{p=n+1|0;if(p<f){e=d[p];k=p;continue}else return l}}}function e(a,c,d,e,f,g,h,i,j){return l(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function m(a,c,d,e,f,g,h,i,j){__p&&__p();d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;n=j(p,n);if(n<0){h[m]=p;p=m+1|0;var r=q+1|0;if(r<d){i=p;c=a[r];k=r;continue}else return p}else if(n===0){r=q+1|0;p=o+1|0;if(r<d&&p<g){f=e[p];l=p;c=a[r];k=r;continue}else if(r===d)return m;else{b("bs_belt_Array").blitUnsafe(a,r,h,m,d-r|0);return(m+d|0)-r|0}}else{n=o+1|0;if(n<g){f=e[n];l=n;continue}else{b("bs_belt_Array").blitUnsafe(a,q,h,m,d-q|0);return(m+d|0)-q|0}}}}function n(a,c,d,e,f,g,h,i,j){return m(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function o(a,b,c,d,e,f){for(var g=0,e=e-1|0;g<=e;++g){var h=a[b+g|0],i=(d+g|0)-1|0;while(i>=d&&f(c[i],h)>0)c[i+1|0]=c[i],i=i-1|0;c[i+1|0]=h}return 0}function p(a,b,c,d,e,f){if(e<=5)return o(a,b,c,d,e,f);else{var g=e/2|0;e=e-g|0;p(a,b+g|0,c,d+g|0,e,f);p(a,b,a,b+e|0,g,f);return j(a,b+e|0,g,c,d+g|0,e,c,d,f)}}function q(a,b){__p&&__p();var c=a.length;if(c<=5)return o(a,0,a,0,c,b);else{var d=c/2|0;c=c-d|0;var e=new Array(c);p(a,d,e,0,c,b);p(a,0,a,c,d,b);return j(a,c,d,e,0,c,a,0,b)}}function r(a,c){return q(a,b("bs_curry").__2(c))}function s(a,b){a=a.slice(0);q(a,b);return a}function t(a,c){return s(a,b("bs_curry").__2(c))}function u(a,b,c){__p&&__p();var d=a.length;if(d===0)return-1;else{var e=a[0];e=c(b,e);if(e<0)return-1;else{e=a[d-1|0];e=c(b,e);if(e>0)return-(d+1|0)|0;else{e=a;a=0;d=d-1|0;b=b;c=c;while(!0){var f=d,g=a,h=(g+f|0)/2|0,i=e[h];i=c(b,i);if(i===0)return h;else if(i<0)if(f===h)if(c(e[g],b)===0)return g;else return-(f+1|0)|0;else{d=h;continue}else if(g===h)if(c(e[f],b)===0)return f;else return-(f+1|0)|0;else{a=h;continue}}}}}}function v(a,c,d){return u(a,c,b("bs_curry").__2(d))}var w=0,x=0;f.Int=w;f.$$String=x;f.strictlySortedLengthU=h;f.strictlySortedLength=a;f.isSortedU=i;f.isSorted=c;f.stableSortInPlaceByU=q;f.stableSortInPlaceBy=r;f.stableSortByU=s;f.stableSortBy=t;f.binarySearchByU=u;f.binarySearchBy=v;f.unionU=k;f.union=d;f.intersectU=l;f.intersect=e;f.diffU=m;f.diff=n}),null);
__d("bs_belt_internalAVLtree",["bs_curry","bs_js_primitive","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==null)return a.height;else return 0}function h(a){if(a!==null){var b=a.left,c=a.right;return{key:a.key,value:a.value,height:a.height,left:h(b),right:h(c)}}else return a}function i(a,b,c,d){var e=g(a),f=g(d);return{key:b,value:c,height:e>=f?e+1|0:f+1|0,left:a,right:d}}function j(a,b){return{key:a,value:b,height:1,left:null,right:null}}function k(a,b){if(b!==null)if(a!==null)return a.height>=b.height;else return!1;else return!0}function a(a,b){if(a.value===b)return a;else return{key:a.key,value:b,height:a.height,left:a.left,right:a.right}}function l(a,b,c,d){__p&&__p();var e=a!==null?a.height:0,f=d!==null?d.height:0;if(e>(f+2|0)){var h=a.left,j=a.key,k=a.value,l=a.right;if(g(h)>=g(l))return i(h,j,k,i(l,b,c,d));else{var m=l.left,n=l.key,o=l.value;l=l.right;return i(i(h,j,k,m),n,o,i(l,b,c,d))}}else if(f>(e+2|0)){h=d.left;j=d.key;k=d.value;m=d.right;if(g(m)>=g(h))return i(i(a,b,c,h),j,k,m);else{n=h.left;o=h.key;l=h.value;h=h.right;return i(i(a,b,c,n),o,l,i(h,j,k,m))}}else return{key:b,value:c,height:e>=f?e+1|0:f+1|0,left:a,right:d}}function m(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return b.key}}function c(a){if(a!==null)return b("bs_js_primitive").some(m(a))}function d(a){if(a!==null)return m(a)}function n(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return b.key}}function e(a){if(a!==null)return b("bs_js_primitive").some(n(a))}function o(a){if(a!==null)return n(a)}function p(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return[b.key,b.value]}}function q(a){if(a!==null)return p(a)}function r(a){if(a!==null)return p(a)}function s(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return[b.key,b.value]}}function t(a){if(a!==null)return s(a)}function aa(a){if(a!==null)return s(a)}function u(a,b,c){var d=a.left,e=a.right,f=a.key;a=a.value;if(d!==null)return l(u(d,b,c),f,a,e);else{b[0]=f;c[0]=a;return e}}function ba(a){return a===null}function v(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d,c];a=d.left;continue}else return c}}function w(a,b){__p&&__p();if(a!==null){var c=w(a.left,b);if(c!==undefined)return c;else{c=a.key;var d=a.value,e=b(c,d);if(e)return[c,d];else{e=w(a.right,b);if(e!==undefined)return e;else return undefined}}}}function ca(a,c){return w(a,b("bs_curry").__2(c))}function x(a,b){__p&&__p();while(!0){var c=a;if(c!==null){x(c.left,b);b(c.key,c.value);a=c.right;continue}else return 0}}function da(a,c){return x(a,b("bs_curry").__2(c))}function y(a,b){if(a!==null){var c=y(a.left,b),d=b(a.value);b=y(a.right,b);return{key:a.key,value:d,height:a.height,left:c,right:b}}else return null}function ea(a,c){return y(a,b("bs_curry").__1(c))}function z(a,b){if(a!==null){var c=a.key,d=z(a.left,b),e=b(c,a.value);b=z(a.right,b);return{key:c,value:e,height:a.height,left:d,right:b}}else return null}function fa(a,c){return z(a,b("bs_curry").__2(c))}function A(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e!==null){var f=e.left,g=e.key,h=e.value;e=e.right;b=c(A(f,d,c),g,h);a=e;continue}else return d}}function ga(a,c,d){return A(a,c,b("bs_curry").__3(d))}function B(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.key,c.value)&&B(c.left,b)){a=c.right;continue}else return!1;else return!0}}function ha(a,c){return B(a,b("bs_curry").__2(c))}function C(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.key,c.value)||C(c.left,b))return!0;else{a=c.right;continue}else return!1}}function ia(a,c){return C(a,b("bs_curry").__2(c))}function D(a,b,c){if(a!==null)return l(D(a.left,b,c),a.key,a.value,a.right);else return j(b,c)}function E(a,b,c){if(a!==null)return l(a.left,a.key,a.value,E(a.right,b,c));else return j(b,c)}function F(a,b,c,d){__p&&__p();if(a!==null)if(d!==null){var e=a.left,f=a.key,g=a.value,h=a.right,j=a.height,k=d.left,m=d.key,n=d.value,o=d.right,p=d.height;if(j>(p+2|0))return l(e,f,g,F(h,b,c,d));else if(p>(j+2|0))return l(F(a,b,c,k),m,n,o);else return i(a,b,c,d)}else return E(a,b,c);else return D(d,b,c)}function G(a,b){if(a!==null)if(b!==null){var c=[b.key],d=[b.value],e=u(b,c,d);return F(a,c[0],d[0],e)}else return a;else return b}function ja(a,c,d,e){if(d!==undefined)return F(a,c,b("bs_js_primitive").valFromOption(d),e);else return G(a,e)}function H(a,b){if(a!==null){var c=a.key,d=a.value,e=H(a.left,b),f=b(c,d);a=H(a.right,b);if(f)return F(e,c,d,a);else return G(e,a)}else return null}function ka(a,c){return H(a,b("bs_curry").__2(c))}function I(a,c){if(a!==null){var d=a.key,e=a.value,f=I(a.left,c);e=c(d,e);a=I(a.right,c);if(e!==undefined)return F(f,d,b("bs_js_primitive").valFromOption(e),a);else return G(f,a)}else return null}function la(a,c){return I(a,b("bs_curry").__2(c))}function J(a,b){__p&&__p();if(a!==null){var c=a.key,d=a.value,e=J(a.left,b),f=e[1];e=e[0];var g=b(c,d);a=J(a.right,b);b=a[1];a=a[0];if(g)return[F(e,c,d,a),G(f,b)];else return[G(e,a),F(f,c,d,b)]}else return[null,null]}function ma(a,c){return J(a,b("bs_curry").__2(c))}function K(a){var b=a.left;a=a.right;b=b!==null?K(b):0;a=a!==null?K(a):0;return(1+b|0)+a|0}function L(a){if(a!==null)return K(a);else return 0}function M(a,b){__p&&__p();while(!0){var c=b,d=a;if(d!==null){var e=d.left,f=d.right,g=d.key;d=d.value;b=[[g,d],M(f,c)];a=e;continue}else return c}}function na(a){return M(a,0)}function N(a){__p&&__p();while(!0){var b=a;if(b!==null){var c=b.left;b=b.right;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw new Error('File "belt_internalAVLtree.ml", line 385, characters 6-12');N(c);a=b;continue}else return 0}}function O(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.key;e=e.right;f=f!==null?O(f,d,c):d;c[f]=g;d=f+1|0;if(e!==null){b=d;a=e;continue}else return d}}function P(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.right;f=f!==null?P(f,d,c):d;c[f]=e.value;d=f+1|0;if(g!==null){b=d;a=g;continue}else return d}}function Q(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.key,h=e.right;f=f!==null?Q(f,d,c):d;c[f]=[g,e.value];d=f+1|0;if(h!==null){b=d;a=h;continue}else return d}}function oa(b){if(b!==null){var a=K(b);a=new Array(a);Q(b,0,a);return a}else return[]}function pa(b){if(b!==null){var a=K(b);a=new Array(a);O(b,0,a);return a}else return[]}function qa(b){if(b!==null){var a=K(b);a=new Array(a);P(b,0,a);return a}else return[]}function R(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=R(a,b,d),f=a[b-d|0];d=R(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f[0],f[1],d)}else switch(c){case 0:return null;case 1:e=a[b];return j(e[0],e[1]);case 2:f=a[b];d=a[b-1|0];c=d;e=f;return{key:c[0],value:c[1],height:2,left:j(e[0],e[1]),right:null};case 3:d=a[b];f=a[b-1|0];c=a[b-2|0];e=c;a=f;b=d;return{key:a[0],value:a[1],height:2,left:j(b[0],b[1]),right:j(e[0],e[1])}}}function S(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=S(a,b,d),f=a[b+d|0];d=S(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f[0],f[1],d)}else switch(c){case 0:return null;case 1:e=a[b];return j(e[0],e[1]);case 2:f=a[b];d=a[b+1|0];c=d;e=f;return{key:c[0],value:c[1],height:2,left:j(e[0],e[1]),right:null};case 3:d=a[b];f=a[b+1|0];c=a[b+2|0];e=c;a=f;b=d;return{key:a[0],value:a[1],height:2,left:j(b[0],b[1]),right:j(e[0],e[1])}}}function ra(a){return S(a,0,a.length)}function T(a,b,c,d){__p&&__p();var e=L(a),f=L(b);if(e===f){a=v(a,0);b=v(b,0);c=c;d=d;while(!0){var g=b,h=a;if(h&&g){var i=g[0],j=h[0],k=c(j.key,i.key);if(k===0){var l=d(j.value,i.value);if(l===0){b=v(i.right,g[1]);a=v(j.right,h[1]);continue}else return l}else return k}else return 0}}else if(e<f)return-1;else return 1}function sa(a,c,d,e){return T(a,c,d,b("bs_curry").__2(e))}function U(a,b,c,d){__p&&__p();var e=L(a),f=L(b);if(e===f){e=v(a,0);f=v(b,0);a=c;b=d;while(!0){c=f;d=e;if(d&&c){var g=c[0],h=d[0];if(a(h.key,g.key)===0&&b(h.value,g.value)){f=v(g.right,c[1]);e=v(h.right,d[1]);continue}else return!1}else return!0}}else return!1}function ta(a,c,d,e){return U(a,c,d,b("bs_curry").__2(e))}function ua(c,d,a){__p&&__p();while(!0){var e=c;if(e!==null){var f=e.key;f=a(d,f);if(f===0)return b("bs_js_primitive").some(e.value);else{c=f<0?e.left:e.right;continue}}else return undefined}}function va(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return d.value;else{b=e<0?d.left:d.right;continue}}else return undefined}}function wa(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return d.value;else{b=e<0?d.left:d.right;continue}}else throw new Error("getExn0")}}function xa(b,c,d,a){__p&&__p();while(!0){var e=b;if(e!==null){var f=e.key;f=a(c,f);if(f===0)return e.value;else{b=f<0?e.left:e.right;continue}}else return d}}function ya(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return!0;else{b=e<0?d.left:d.right;continue}}else return!1}}function V(a){var b=a.left;a.left=b.right;b.right=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.left);d=a.height;b.height=(c>d?c:d)+1|0;return b}function W(a){var b=a.right;a.right=b.left;b.left=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.right);d=a.height;b.height=(c>d?c:d)+1|0;return b}function za(a){var b=W(a.left);a.left=b;return V(a)}function Aa(a){var b=V(a.right);a.right=b;return W(a)}function X(a){var b=g(a.left),c=g(a.right);a.height=(b>c?b:c)+1|0;return a}function Y(a){__p&&__p();var b=a.left,c=a.right,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.left;b=b.right;if(k(f,b))return X(V(a));else return X(za(a))}else if(e>(2+d|0)){f=c.left;b=c.right;if(k(b,f))return X(W(a));else return X(Aa(a))}else{a.height=(d>e?d:e)+1|0;return a}}function Z(b,c,d,a){__p&&__p();if(b!==null){var e=b.key;e=a(c,e);if(e===0){b.value=d;return b}else{var f=b.left,g=b.right;if(e<0){e=Z(f,c,d,a);b.left=e}else b.right=Z(g,c,d,a);return Y(b)}}else return j(c,d)}function Ba(c,a){__p&&__p();var d=c.length;if(d===0)return null;else{var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b[0],c[0])<0}),f;e>=0?f=S(c,0,e):(e=-e|0,f=R(c,e-1|0,e));for(var e=e,d=d-1|0;e<=d;++e){var g=c[e];f=Z(f,g[0],g[1],a)}return f}}function $(a,b){var c=b.right,d=b.left;if(d!==null){b.left=$(a,d);return Y(b)}else{a.key=b.key;return c}}var Ca=null;f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.updateValue=a;f.minKey=c;f.minKeyUndefined=d;f.maxKey=e;f.maxKeyUndefined=o;f.minimum=q;f.minUndefined=r;f.maximum=t;f.maxUndefined=aa;f.removeMinAuxWithRef=u;f.empty=Ca;f.isEmpty=ba;f.stackAllLeft=v;f.findFirstByU=w;f.findFirstBy=ca;f.forEachU=x;f.forEach=da;f.mapU=y;f.map=ea;f.mapWithKeyU=z;f.mapWithKey=fa;f.reduceU=A;f.reduce=ga;f.everyU=B;f.every=ha;f.someU=C;f.some=ia;f.join=F;f.concat=G;f.concatOrJoin=ja;f.keepSharedU=H;f.keepShared=ka;f.keepMapU=I;f.keepMap=la;f.partitionSharedU=J;f.partitionShared=ma;f.lengthNode=K;f.size=L;f.toList=na;f.checkInvariantInternal=N;f.fillArray=Q;f.toArray=oa;f.keysToArray=pa;f.valuesToArray=qa;f.fromSortedArrayAux=S;f.fromSortedArrayRevAux=R;f.fromSortedArrayUnsafe=ra;f.cmpU=T;f.cmp=sa;f.eqU=U;f.eq=ta;f.get=ua;f.getUndefined=va;f.getWithDefault=xa;f.getExn=wa;f.has=ya;f.fromArray=Ba;f.updateMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_belt_MapDict",["bs_curry","bs_js_primitive","bs_belt_internalAVLtree"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(c,d,e,a){__p&&__p();if(c!==null){var f=c.key,h=a(d,f);if(h===0)return b("bs_belt_internalAVLtree").updateValue(c,e);else{var i=c.left,j=c.right;c=c.value;if(h<0)return b("bs_belt_internalAVLtree").bal(g(i,d,e,a),f,c,j);else return b("bs_belt_internalAVLtree").bal(i,f,c,g(j,d,e,a))}}else return b("bs_belt_internalAVLtree").singleton(d,e)}function h(c,d,e,a){__p&&__p();if(c!==null){var f=c.key,g=a(d,f);if(g===0){var i=e(b("bs_js_primitive").some(c.value));if(i!==undefined)return b("bs_belt_internalAVLtree").updateValue(c,b("bs_js_primitive").valFromOption(i));else{i=c.left;var j=c.right;if(i!==null)if(j!==null){var k=[j.key],l=[j.value],m=b("bs_belt_internalAVLtree").removeMinAuxWithRef(j,k,l);return b("bs_belt_internalAVLtree").bal(i,k[0],l[0],m)}else return i;else return j}}else{k=c.left;l=c.right;m=c.value;if(g<0){i=h(k,d,e,a);if(k===i)return c;else return b("bs_belt_internalAVLtree").bal(i,f,m,l)}else{j=h(l,d,e,a);if(l===j)return c;else return b("bs_belt_internalAVLtree").bal(k,f,m,j)}}}else{g=e(undefined);if(g!==undefined)return b("bs_belt_internalAVLtree").singleton(d,b("bs_js_primitive").valFromOption(g));else return c}}function a(c,d,e,a){return h(c,d,b("bs_curry").__1(e),a)}function i(c,d,a){__p&&__p();var e=c.left,f=c.key,g=c.right,h=a(d,f);if(h===0)if(e!==null)if(g!==null){var j=[g.key],k=[g.value],l=b("bs_belt_internalAVLtree").removeMinAuxWithRef(g,j,k);return b("bs_belt_internalAVLtree").bal(e,j[0],k[0],l)}else return e;else return g;else if(h<0)if(e!==null){j=i(e,d,a);if(j===e)return c;else return b("bs_belt_internalAVLtree").bal(j,f,c.value,g)}else return c;else if(g!==null){k=i(g,d,a);if(k===g)return c;else return b("bs_belt_internalAVLtree").bal(e,f,c.value,k)}else return c}function c(c,d,a){if(c!==null)return i(c,d,a);else return b("bs_belt_internalAVLtree").empty}function d(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=g(b,f[0],f[1],a)}return b}function j(c,d,e,a){__p&&__p();var f=c.left,g=c.key,h=c.value,i=c.right,k=a(d,g);if(k===0){e[0]=b("bs_js_primitive").some(h);return[f,i]}else if(k<0)if(f!==null){k=j(f,d,e,a);return[k[0],b("bs_belt_internalAVLtree").join(k[1],g,h,i)]}else return[b("bs_belt_internalAVLtree").empty,c];else if(i!==null){k=j(i,d,e,a);return[b("bs_belt_internalAVLtree").join(f,g,h,k[0]),k[1]]}else return[c,b("bs_belt_internalAVLtree").empty]}function e(c,d,a){if(c!==null){var e=[undefined];c=j(c,d,e,a);return[c,e[0]]}else return[[b("bs_belt_internalAVLtree").empty,b("bs_belt_internalAVLtree").empty],undefined]}function k(c,d,e,a){__p&&__p();if(c!==null)if(d!==null)if(c.height>=d.height){var f=c.left,g=c.key,h=c.value,i=c.right,l=[undefined],m=j(d,g,l,a);l=l[0];f=k(f,m[0],e,a);h=e(g,b("bs_js_primitive").some(h),l);l=k(i,m[1],e,a);return b("bs_belt_internalAVLtree").concatOrJoin(f,g,h,l)}else{i=d.left;m=d.key;f=d.value;g=d.right;h=[undefined];l=j(c,m,h,a);h=h[0];i=k(l[0],i,e,a);h=e(m,h,b("bs_js_primitive").some(f));f=k(l[1],g,e,a);return b("bs_belt_internalAVLtree").concatOrJoin(i,m,h,f)}else return b("bs_belt_internalAVLtree").keepMapU(c,function(a,c){return e(a,b("bs_js_primitive").some(c),undefined)});else if(d!==null)return b("bs_belt_internalAVLtree").keepMapU(d,function(a,c){return e(a,undefined,b("bs_js_primitive").some(c))});else return b("bs_belt_internalAVLtree").empty}function l(c,d,e,a){return k(c,d,b("bs_curry").__3(e),a)}function m(c,d,a){__p&&__p();var e=d.length;if(c!==null){c=c;d=d;var f=0;e=e;a=a;while(!0){var g=f,h=c;if(g<e){var j=d[g];j=i(h,j,a);if(j!==null){f=g+1|0;c=j;continue}else return j}else return h}}else return b("bs_belt_internalAVLtree").empty}var n=b("bs_belt_internalAVLtree").empty,o=b("bs_belt_internalAVLtree").isEmpty,p=b("bs_belt_internalAVLtree").has,q=b("bs_belt_internalAVLtree").cmpU,r=b("bs_belt_internalAVLtree").cmp,s=b("bs_belt_internalAVLtree").eqU,t=b("bs_belt_internalAVLtree").eq,u=b("bs_belt_internalAVLtree").findFirstByU,v=b("bs_belt_internalAVLtree").findFirstBy,w=b("bs_belt_internalAVLtree").forEachU,x=b("bs_belt_internalAVLtree").forEach,y=b("bs_belt_internalAVLtree").reduceU,z=b("bs_belt_internalAVLtree").reduce,A=b("bs_belt_internalAVLtree").everyU,B=b("bs_belt_internalAVLtree").every,C=b("bs_belt_internalAVLtree").someU,D=b("bs_belt_internalAVLtree").some,E=b("bs_belt_internalAVLtree").size,F=b("bs_belt_internalAVLtree").toList,G=b("bs_belt_internalAVLtree").toArray,H=b("bs_belt_internalAVLtree").fromArray,I=b("bs_belt_internalAVLtree").keysToArray,J=b("bs_belt_internalAVLtree").valuesToArray,K=b("bs_belt_internalAVLtree").minKey,L=b("bs_belt_internalAVLtree").minKeyUndefined,M=b("bs_belt_internalAVLtree").maxKey,N=b("bs_belt_internalAVLtree").maxKeyUndefined,O=b("bs_belt_internalAVLtree").minimum,P=b("bs_belt_internalAVLtree").minUndefined,Q=b("bs_belt_internalAVLtree").maximum,R=b("bs_belt_internalAVLtree").maxUndefined,S=b("bs_belt_internalAVLtree").get,T=b("bs_belt_internalAVLtree").getUndefined,U=b("bs_belt_internalAVLtree").getWithDefault,V=b("bs_belt_internalAVLtree").getExn,W=b("bs_belt_internalAVLtree").checkInvariantInternal,X=b("bs_belt_internalAVLtree").keepSharedU,Y=b("bs_belt_internalAVLtree").keepShared,Z=b("bs_belt_internalAVLtree").partitionSharedU,$=b("bs_belt_internalAVLtree").partitionShared,aa=b("bs_belt_internalAVLtree").mapU,ba=b("bs_belt_internalAVLtree").map,ca=b("bs_belt_internalAVLtree").mapWithKeyU,da=b("bs_belt_internalAVLtree").mapWithKey;f.empty=n;f.isEmpty=o;f.has=p;f.cmpU=q;f.cmp=r;f.eqU=s;f.eq=t;f.findFirstByU=u;f.findFirstBy=v;f.forEachU=w;f.forEach=x;f.reduceU=y;f.reduce=z;f.everyU=A;f.every=B;f.someU=C;f.some=D;f.size=E;f.toList=F;f.toArray=G;f.fromArray=H;f.keysToArray=I;f.valuesToArray=J;f.minKey=K;f.minKeyUndefined=L;f.maxKey=M;f.maxKeyUndefined=N;f.minimum=O;f.minUndefined=P;f.maximum=Q;f.maxUndefined=R;f.get=S;f.getUndefined=T;f.getWithDefault=U;f.getExn=V;f.checkInvariantInternal=W;f.remove=c;f.removeMany=m;f.set=g;f.updateU=h;f.update=a;f.mergeU=k;f.merge=l;f.mergeMany=d;f.keepU=X;f.keep=Y;f.partitionU=Z;f.partition=$;f.split=e;f.mapU=aa;f.map=ba;f.mapWithKeyU=ca;f.mapWithKey=da}),null);
__d("bs_belt_Map",["bs_curry","bs_belt_MapDict"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){c=c[0];return{cmp:c,data:b("bs_belt_MapDict").fromArray(a,c)}}function c(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_MapDict").remove(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function d(c,d){var a=c.cmp;c=c.data;c=b("bs_belt_MapDict").removeMany(c,d,a);return{cmp:a,data:c}}function e(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").set(c.data,d,e,a)}}function g(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").mergeMany(c.data,d,a)}}function h(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").updateU(c.data,d,e,a)}}function i(a,c,d){return h(a,c,b("bs_curry").__1(d))}function j(c,d){var a=c.cmp;c=b("bs_belt_MapDict").split(c.data,d,a);d=c[0];return[[{cmp:a,data:d[0]},{cmp:a,data:d[1]}],c[1]]}function k(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").mergeU(c.data,d.data,e,a)}}function l(a,c,d){return k(a,c,b("bs_curry").__3(d))}function m(a){return{cmp:a[0],data:b("bs_belt_MapDict").empty}}function n(a){return b("bs_belt_MapDict").isEmpty(a.data)}function o(a,c){return b("bs_belt_MapDict").findFirstByU(a.data,c)}function p(a,c){return b("bs_belt_MapDict").findFirstByU(a.data,b("bs_curry").__2(c))}function q(a,c){return b("bs_belt_MapDict").forEachU(a.data,c)}function r(a,c){return b("bs_belt_MapDict").forEachU(a.data,b("bs_curry").__2(c))}function s(a,c,d){return b("bs_belt_MapDict").reduceU(a.data,c,d)}function t(a,c,d){return s(a,c,b("bs_curry").__3(d))}function u(a,c){return b("bs_belt_MapDict").everyU(a.data,c)}function v(a,c){return b("bs_belt_MapDict").everyU(a.data,b("bs_curry").__2(c))}function w(a,c){return b("bs_belt_MapDict").someU(a.data,c)}function x(a,c){return b("bs_belt_MapDict").someU(a.data,b("bs_curry").__2(c))}function y(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").keepU(a.data,c)}}function z(a,c){return y(a,b("bs_curry").__2(c))}function A(c,d){var a=c.cmp;c=b("bs_belt_MapDict").partitionU(c.data,d);return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function B(a,c){return A(a,b("bs_curry").__2(c))}function C(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").mapU(a.data,c)}}function D(a,c){return C(a,b("bs_curry").__1(c))}function E(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").mapWithKeyU(a.data,c)}}function F(a,c){return E(a,b("bs_curry").__2(c))}function G(a){return b("bs_belt_MapDict").size(a.data)}function H(a){return b("bs_belt_MapDict").toList(a.data)}function I(a){return b("bs_belt_MapDict").toArray(a.data)}function J(a){return b("bs_belt_MapDict").keysToArray(a.data)}function K(a){return b("bs_belt_MapDict").valuesToArray(a.data)}function L(a){return b("bs_belt_MapDict").minKey(a.data)}function M(a){return b("bs_belt_MapDict").minKeyUndefined(a.data)}function N(a){return b("bs_belt_MapDict").maxKey(a.data)}function O(a){return b("bs_belt_MapDict").maxKeyUndefined(a.data)}function P(a){return b("bs_belt_MapDict").minimum(a.data)}function Q(a){return b("bs_belt_MapDict").minUndefined(a.data)}function R(a){return b("bs_belt_MapDict").maximum(a.data)}function S(a){return b("bs_belt_MapDict").maxUndefined(a.data)}function T(a,c){return b("bs_belt_MapDict").get(a.data,c,a.cmp)}function U(a,c){return b("bs_belt_MapDict").getUndefined(a.data,c,a.cmp)}function V(a,c,d){return b("bs_belt_MapDict").getWithDefault(a.data,c,d,a.cmp)}function W(a,c){return b("bs_belt_MapDict").getExn(a.data,c,a.cmp)}function X(a,c){return b("bs_belt_MapDict").has(a.data,c,a.cmp)}function Y(a){return b("bs_belt_MapDict").checkInvariantInternal(a.data)}function Z(a,c,d){return b("bs_belt_MapDict").eqU(a.data,c.data,a.cmp,d)}function aa(a,c,d){return Z(a,c,b("bs_curry").__2(d))}function $(a,c,d){return b("bs_belt_MapDict").cmpU(a.data,c.data,a.cmp,d)}function ba(a,c,d){return $(a,c,b("bs_curry").__2(d))}function ca(a){return a.data}function da(a){a=a.cmp;return[a]}function ea(a,b){return{cmp:a[0],data:b}}var fa=0,ga=0,ha=0;f.Int=fa;f.$$String=ga;f.Dict=ha;f.make=m;f.isEmpty=n;f.has=X;f.cmpU=$;f.cmp=ba;f.eqU=Z;f.eq=aa;f.findFirstByU=o;f.findFirstBy=p;f.forEachU=q;f.forEach=r;f.reduceU=s;f.reduce=t;f.everyU=u;f.every=v;f.someU=w;f.some=x;f.size=G;f.toArray=I;f.toList=H;f.fromArray=a;f.keysToArray=J;f.valuesToArray=K;f.minKey=L;f.minKeyUndefined=M;f.maxKey=N;f.maxKeyUndefined=O;f.minimum=P;f.minUndefined=Q;f.maximum=R;f.maxUndefined=S;f.get=T;f.getUndefined=U;f.getWithDefault=V;f.getExn=W;f.remove=c;f.removeMany=d;f.set=e;f.updateU=h;f.update=i;f.mergeMany=g;f.mergeU=k;f.merge=l;f.keepU=y;f.keep=z;f.partitionU=A;f.partition=B;f.split=j;f.mapU=C;f.map=D;f.mapWithKeyU=E;f.mapWithKey=F;f.getData=ca;f.getId=da;f.packIdData=ea;f.checkInvariantInternal=Y}),null);
__d("bs_belt_internalMapString",["bs_curry","bs_js_primitive","bs_belt_SortArray","bs_caml_primitive","bs_belt_internalAVLtree"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e)return b("bs_belt_internalAVLtree").updateValue(a,d);else{var f=a.value;if(c<e)return b("bs_belt_internalAVLtree").bal(g(a.left,c,d),e,f,a.right);else return b("bs_belt_internalAVLtree").bal(a.left,e,f,g(a.right,c,d))}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function a(a,c){__p&&__p();while(!0){var d=a;if(d!==null){var e=d.key;if(c===e)return b("bs_js_primitive").some(d.value);else{a=c<e?d.left:d.right;continue}}else return undefined}}function c(a,b){__p&&__p();while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return c.value;else{a=b<d?c.left:c.right;continue}}else return undefined}}function d(a,b){__p&&__p();while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return c.value;else{a=b<d?c.left:c.right;continue}}else throw new Error("getExn")}}function e(a,b,c){__p&&__p();while(!0){var d=a;if(d!==null){var e=d.key;if(b===e)return d.value;else{a=b<e?d.left:d.right;continue}}else return c}}function h(a,b){__p&&__p();while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return!0;else{a=b<d?c.left:c.right;continue}}else return!1}}function i(a,c){__p&&__p();if(a!==null){var d=a.left,e=a.key,f=a.right;if(c===e)if(d!==null)if(f!==null){var g=[f.key],h=[f.value],j=b("bs_belt_internalAVLtree").removeMinAuxWithRef(f,g,h);return b("bs_belt_internalAVLtree").bal(d,g[0],h[0],j)}else return d;else return f;else if(c<e)return b("bs_belt_internalAVLtree").bal(i(d,c),e,a.value,f);else return b("bs_belt_internalAVLtree").bal(d,e,a.value,i(f,c))}else return a}function j(a,c){__p&&__p();var d=c.left,e=c.key,f=c.value,g=c.right;if(a===e)return[d,b("bs_js_primitive").some(f),g];else if(a<e)if(d!==null){var h=j(a,d);return[h[0],h[1],b("bs_belt_internalAVLtree").join(h[2],e,f,g)]}else return[b("bs_belt_internalAVLtree").empty,undefined,c];else if(g!==null){h=j(a,g);return[b("bs_belt_internalAVLtree").join(d,e,f,h[0]),h[1],h[2]]}else return[c,undefined,b("bs_belt_internalAVLtree").empty]}function k(a,c){if(c!==null)return j(a,c);else return[b("bs_belt_internalAVLtree").empty,undefined,b("bs_belt_internalAVLtree").empty]}function l(a,c,d){__p&&__p();if(a!==null)if(a.height>=(c!==null?c.height:0)){var e=a.left,f=a.key,g=a.value,h=a.right,i=k(f,c);return b("bs_belt_internalAVLtree").concatOrJoin(l(e,i[0],d),f,d(f,b("bs_js_primitive").some(g),i[1]),l(h,i[2],d))}else e=1;else if(c!==null)e=1;else return b("bs_belt_internalAVLtree").empty;if(e===1)if(c!==null){f=c.left;g=c.key;h=c.value;i=c.right;e=k(g,a);return b("bs_belt_internalAVLtree").concatOrJoin(l(e[0],f,d),g,d(g,e[1],b("bs_js_primitive").some(h)),l(e[2],i,d))}else return 0}function m(a,c,d){return l(a,c,b("bs_curry").__3(d))}function n(a,c,d){__p&&__p();while(!0){var e=c,f=a;if(f&&e){var g=e[0],h=f[0],i=b("bs_caml_primitive").caml_string_compare(h.key,g.key);if(i===0){var j=d(h.value,g.value);if(j===0){c=b("bs_belt_internalAVLtree").stackAllLeft(g.right,e[1]);a=b("bs_belt_internalAVLtree").stackAllLeft(h.right,f[1]);continue}else return j}else return i}else return 0}}function o(c,d,a){var e=b("bs_belt_internalAVLtree").size(c),f=b("bs_belt_internalAVLtree").size(d);if(e===f)return n(b("bs_belt_internalAVLtree").stackAllLeft(c,0),b("bs_belt_internalAVLtree").stackAllLeft(d,0),a);else if(e<f)return-1;else return 1}function p(a,c,d){return o(a,c,b("bs_curry").__2(d))}function q(c,d,a){__p&&__p();while(!0){var e=d,f=c;if(f&&e){var g=e[0],h=f[0];if(h.key===g.key&&a(h.value,g.value)){d=b("bs_belt_internalAVLtree").stackAllLeft(g.right,e[1]);c=b("bs_belt_internalAVLtree").stackAllLeft(h.right,f[1]);continue}else return!1}else return!0}}function r(c,d,a){var e=b("bs_belt_internalAVLtree").size(c),f=b("bs_belt_internalAVLtree").size(d);if(e===f)return q(b("bs_belt_internalAVLtree").stackAllLeft(c,0),b("bs_belt_internalAVLtree").stackAllLeft(d,0),a);else return!1}function s(a,c,d){return r(a,c,b("bs_curry").__2(d))}function t(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e){a.key=c;a.value=d;return a}else{var f=a.left,g=a.right;if(c<e){e=t(f,c,d);a.left=e}else a.right=t(g,c,d);return b("bs_belt_internalAVLtree").balMutate(a)}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function u(a){__p&&__p();var c=a.length;if(c===0)return b("bs_belt_internalAVLtree").empty;else{var d=b("bs_belt_SortArray").strictlySortedLengthU(a,function(a,b){return a[0]<b[0]}),e;d>=0?e=b("bs_belt_internalAVLtree").fromSortedArrayAux(a,0,d):(d=-d|0,e=b("bs_belt_internalAVLtree").fromSortedArrayRevAux(a,d-1|0,d));for(var d=d,c=c-1|0;d<=c;++d){var f=a[d];e=t(e,f[0],f[1])}return e}}var v=0,w=0,x=0;f.N=v;f.A=w;f.S=x;f.add=g;f.get=a;f.getUndefined=c;f.getExn=d;f.getWithDefault=e;f.has=h;f.remove=i;f.splitAux=j;f.split=k;f.mergeU=l;f.merge=m;f.compareAux=n;f.cmpU=o;f.cmp=p;f.eqAux=q;f.eqU=r;f.eq=s;f.addMutate=t;f.fromArray=u}),null);
__d("bs_belt_MapString",["bs_curry","bs_js_primitive","bs_belt_internalAVLtree","bs_belt_internalMapString"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e)return b("bs_belt_internalAVLtree").updateValue(a,d);else{var f=a.value;if(c<e)return b("bs_belt_internalAVLtree").bal(g(a.left,c,d),e,f,a.right);else return b("bs_belt_internalAVLtree").bal(a.left,e,f,g(a.right,c,d))}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function h(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e){var f=d(b("bs_js_primitive").some(a.value));if(f!==undefined)return b("bs_belt_internalAVLtree").updateValue(a,b("bs_js_primitive").valFromOption(f));else{f=a.left;var g=a.right;if(f!==null)if(g!==null){var i=[g.key],j=[g.value],k=b("bs_belt_internalAVLtree").removeMinAuxWithRef(g,i,j);return b("bs_belt_internalAVLtree").bal(f,i[0],j[0],k)}else return f;else return g}}else{i=a.left;j=a.right;k=a.value;if(c<e){f=h(i,c,d);if(i===f)return a;else return b("bs_belt_internalAVLtree").bal(f,e,k,j)}else{g=h(j,c,d);if(j===g)return a;else return b("bs_belt_internalAVLtree").bal(i,e,k,g)}}}else{f=d(undefined);if(f!==undefined)return b("bs_belt_internalAVLtree").singleton(c,b("bs_js_primitive").valFromOption(f));else return a}}function a(a,c,d){return h(a,c,b("bs_curry").__1(d))}function i(a,c){__p&&__p();var d=a.left,e=a.key,f=a.right;if(c===e)if(d!==null)if(f!==null){var g=[f.key],h=[f.value],j=b("bs_belt_internalAVLtree").removeMinAuxWithRef(f,g,h);return b("bs_belt_internalAVLtree").bal(d,g[0],h[0],j)}else return d;else return f;else if(c<e)if(d!==null){g=i(d,c);if(g===d)return a;else return b("bs_belt_internalAVLtree").bal(g,e,a.value,f)}else return a;else if(f!==null){h=i(f,c);return b("bs_belt_internalAVLtree").bal(d,e,a.value,h)}else return a}function c(a,c){if(a!==null)return i(a,c);else return b("bs_belt_internalAVLtree").empty}function d(a,c){__p&&__p();var d=c.length;if(a!==null){a=a;c=c;var e=0;d=d;while(!0){var f=e,g=a;if(f<d){var h=c[f];h=i(g,h);if(h!==null){e=f+1|0;a=h;continue}else return h}else return g}}else return b("bs_belt_internalAVLtree").empty}function e(a,b){var c=b.length;a=a;for(var d=0,c=c-1|0;d<=c;++d){var e=b[d];a=g(a,e[0],e[1])}return a}var j=b("bs_belt_internalAVLtree").empty,k=b("bs_belt_internalAVLtree").isEmpty,l=b("bs_belt_internalMapString").has,m=b("bs_belt_internalMapString").cmpU,n=b("bs_belt_internalMapString").cmp,o=b("bs_belt_internalMapString").eqU,p=b("bs_belt_internalMapString").eq,q=b("bs_belt_internalAVLtree").findFirstByU,r=b("bs_belt_internalAVLtree").findFirstBy,s=b("bs_belt_internalAVLtree").forEachU,t=b("bs_belt_internalAVLtree").forEach,u=b("bs_belt_internalAVLtree").reduceU,v=b("bs_belt_internalAVLtree").reduce,w=b("bs_belt_internalAVLtree").everyU,x=b("bs_belt_internalAVLtree").every,y=b("bs_belt_internalAVLtree").someU,z=b("bs_belt_internalAVLtree").some,A=b("bs_belt_internalAVLtree").size,B=b("bs_belt_internalAVLtree").toList,C=b("bs_belt_internalAVLtree").toArray,D=b("bs_belt_internalMapString").fromArray,E=b("bs_belt_internalAVLtree").keysToArray,F=b("bs_belt_internalAVLtree").valuesToArray,G=b("bs_belt_internalAVLtree").minKey,H=b("bs_belt_internalAVLtree").minKeyUndefined,I=b("bs_belt_internalAVLtree").maxKey,J=b("bs_belt_internalAVLtree").maxKeyUndefined,K=b("bs_belt_internalAVLtree").minimum,L=b("bs_belt_internalAVLtree").minUndefined,M=b("bs_belt_internalAVLtree").maximum,N=b("bs_belt_internalAVLtree").maxUndefined,O=b("bs_belt_internalMapString").get,P=b("bs_belt_internalMapString").getUndefined,Q=b("bs_belt_internalMapString").getWithDefault,R=b("bs_belt_internalMapString").getExn,S=b("bs_belt_internalAVLtree").checkInvariantInternal,T=b("bs_belt_internalMapString").mergeU,U=b("bs_belt_internalMapString").merge,V=b("bs_belt_internalAVLtree").keepSharedU,W=b("bs_belt_internalAVLtree").keepShared,X=b("bs_belt_internalAVLtree").partitionSharedU,Y=b("bs_belt_internalAVLtree").partitionShared,Z=b("bs_belt_internalMapString").split,$=b("bs_belt_internalAVLtree").mapU,aa=b("bs_belt_internalAVLtree").map,ba=b("bs_belt_internalAVLtree").mapWithKeyU,ca=b("bs_belt_internalAVLtree").mapWithKey;f.empty=j;f.isEmpty=k;f.has=l;f.cmpU=m;f.cmp=n;f.eqU=o;f.eq=p;f.findFirstByU=q;f.findFirstBy=r;f.forEachU=s;f.forEach=t;f.reduceU=u;f.reduce=v;f.everyU=w;f.every=x;f.someU=y;f.some=z;f.size=A;f.toList=B;f.toArray=C;f.fromArray=D;f.keysToArray=E;f.valuesToArray=F;f.minKey=G;f.minKeyUndefined=H;f.maxKey=I;f.maxKeyUndefined=J;f.minimum=K;f.minUndefined=L;f.maximum=M;f.maxUndefined=N;f.get=O;f.getUndefined=P;f.getWithDefault=Q;f.getExn=R;f.checkInvariantInternal=S;f.remove=c;f.removeMany=d;f.set=g;f.updateU=h;f.update=a;f.mergeU=T;f.merge=U;f.mergeMany=e;f.keepU=V;f.keep=W;f.partitionU=X;f.partition=Y;f.split=Z;f.mapU=$;f.map=aa;f.mapWithKeyU=ba;f.mapWithKey=ca}),null);
__d("bs_belt_internalAVLset",["bs_curry","bs_js_primitive","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==null)return a.height;else return 0}function h(a){if(a!==null){var b=a.left,c=a.right;return{value:a.value,height:a.height,left:h(b),right:h(c)}}else return a}function i(a,b,c){var d=a!==null?a.height:0,e=c!==null?c.height:0;return{value:b,height:d>=e?d+1|0:e+1|0,left:a,right:c}}function j(a){return{value:a,height:1,left:null,right:null}}function k(a,b){if(b!==null)if(a!==null)return a.height>=b.height;else return!1;else return!0}function l(a,b,c){__p&&__p();var d=a!==null?a.height:0,e=c!==null?c.height:0;if(d>(e+2|0)){var f=a.left,g=a.value,h=a.right;if(k(f,h))return i(f,g,i(h,b,c));else{var j=h.left,l=h.value;h=h.right;return i(i(f,g,j),l,i(h,b,c))}}else if(e>(d+2|0)){f=c.left;g=c.value;j=c.right;if(k(j,f))return i(i(a,b,f),g,j);else{l=f.left;h=f.value;f=f.right;return i(i(a,b,l),h,i(f,g,j))}}else return{value:b,height:d>=e?d+1|0:e+1|0,left:a,right:c}}function m(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return b.value}}function a(a){if(a!==null)return b("bs_js_primitive").some(m(a))}function c(a){if(a!==null)return m(a)}function n(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return b.value}}function d(a){if(a!==null)return b("bs_js_primitive").some(n(a))}function e(a){if(a!==null)return n(a)}function o(a,b){var c=a.left,d=a.right;a=a.value;if(c!==null)return l(o(c,b),a,d);else{b[0]=a;return d}}function p(a){return a===null}function q(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d,c];a=d.left;continue}else return c}}function r(a,b){__p&&__p();while(!0){var c=a;if(c!==null){r(c.left,b);b(c.value);a=c.right;continue}else return 0}}function s(a,c){return r(a,b("bs_curry").__1(c))}function t(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e!==null){var f=e.left,g=e.value;e=e.right;b=c(t(f,d,c),g);a=e;continue}else return d}}function u(a,c,d){return t(a,c,b("bs_curry").__2(d))}function v(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.value)&&v(c.left,b)){a=c.right;continue}else return!1;else return!0}}function w(a,c){return v(a,b("bs_curry").__1(c))}function x(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.value)||x(c.left,b))return!0;else{a=c.right;continue}else return!1}}function y(a,c){return x(a,b("bs_curry").__1(c))}function z(a,b){if(a!==null)return l(z(a.left,b),a.value,a.right);else return j(b)}function A(a,b){if(a!==null)return l(a.left,a.value,A(a.right,b));else return j(b)}function B(a,b,c){__p&&__p();if(a!==null)if(c!==null){var d=a.height,e=c.height;if(d>(e+2|0))return l(a.left,a.value,B(a.right,b,c));else if(e>(d+2|0))return l(B(a,b,c.left),c.value,c.right);else return i(a,b,c)}else return A(a,b);else return z(c,b)}function C(a,b){if(a!==null)if(b!==null){var c=[b.value],d=o(b,c);return B(a,c[0],d)}else return a;else return b}function D(a,b){__p&&__p();if(a!==null){var c=a.value,d=D(a.left,b),e=d[1];d=d[0];var f=b(c);a=D(a.right,b);b=a[1];a=a[0];if(f)return[B(d,c,a),C(e,b)];else return[C(d,a),B(e,c,b)]}else return[null,null]}function E(a,c){return D(a,b("bs_curry").__1(c))}function F(a){var b=a.left;a=a.right;b=b!==null?F(b):0;a=a!==null?F(a):0;return(1+b|0)+a|0}function G(a){if(a!==null)return F(a);else return 0}function H(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d.value,H(d.right,c)];a=d.left;continue}else return c}}function I(a){return H(a,0)}function J(a){__p&&__p();while(!0){var b=a;if(b!==null){var c=b.left;b=b.right;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw new Error('File "belt_internalAVLset.ml", line 302, characters 6-12');J(c);a=b;continue}else return 0}}function K(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.value;e=e.right;f=f!==null?K(f,d,c):d;c[f]=g;d=f+1|0;if(e!==null){b=d;a=e;continue}else return d}}function L(a,b,c,d){__p&&__p();while(!0){var e=a,f=e.left,g=e.value;e=e.right;f!==null&&L(f,b,c,d);if(d(g)){f=b.forward;c[f]=g;b.forward=f+1|0}else{f=b.backward;c[f]=g;b.backward=f-1|0}if(e!==null){a=e;continue}else return 0}}function M(a,b,c,d){__p&&__p();while(!0){var e=b,f=a,g=f.left,h=f.value;f=f.right;g=g!==null?M(g,e,c,d):e;e=d(h)?(c[g]=h,g+1|0):g;if(f!==null){b=e;a=f;continue}else return e}}function N(b){if(b!==null){var a=F(b);a=new Array(a);K(b,0,a);return a}else return[]}function O(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=O(a,b,d),f=a[b-d|0];d=O(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f,d)}else switch(c){case 0:return null;case 1:return j(a[b]);case 2:e=a[b];f=a[b-1|0];return{value:f,height:2,left:j(e),right:null};case 3:d=a[b];c=a[b-1|0];f=a[b-2|0];return{value:c,height:2,left:j(d),right:j(f)}}}function P(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=P(a,b,d),f=a[b+d|0];d=P(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f,d)}else switch(c){case 0:return null;case 1:return j(a[b]);case 2:e=a[b];f=a[b+1|0];return{value:f,height:2,left:j(e),right:null};case 3:d=a[b];c=a[b+1|0];f=a[b+2|0];return{value:c,height:2,left:j(d),right:j(f)}}}function aa(a){return P(a,0,a.length)}function Q(a,b){__p&&__p();if(a!==null){var c=a.left,d=a.value,e=a.right,f=Q(c,b),g=b(d);b=Q(e,b);if(g)if(c===f&&e===b)return a;else return B(f,d,b);else return C(f,b)}else return null}function ba(a,c){return Q(a,b("bs_curry").__1(c))}function R(b,c){if(b!==null){var a=F(b);a=new Array(a);b=M(b,0,a,c);return P(a,0,b)}else return null}function ca(a,c){return R(a,b("bs_curry").__1(c))}function S(b,c){if(b!==null){var a=F(b),d=new Array(a),e=a-1|0,f={forward:0,backward:e};L(b,f,d,c);b=f.forward;return[P(d,0,b),O(d,e,a-b|0)]}else return[null,null]}function da(a,c){return S(a,b("bs_curry").__1(c))}function ea(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value;e=a(c,e);if(e===0)return!0;else{b=e<0?d.left:d.right;continue}}else return!1}}function T(a,b,c){__p&&__p();var d=G(a),e=G(b);if(d===e){a=q(a,0);b=q(b,0);c=c;while(!0){var f=b,g=a;if(g&&f){var h=f[0],i=g[0],j=c(i.value,h.value);if(j===0){b=q(h.right,f[1]);a=q(i.right,g[1]);continue}else return j}else return 0}}else if(d<e)return-1;else return 1}function fa(a,b,c){return T(a,b,c)===0}function U(b,c,a){__p&&__p();while(!0){var d=c,e=b;if(e!==null)if(d!==null){var f=e.left,g=e.value;e=e.right;var h=d.left,j=d.value;d=d.right;j=a(g,j);if(j===0)if(U(f,h,a)){c=d;b=e;continue}else return!1;else if(j<0)if(U(i(f,g,null),h,a)){b=e;continue}else return!1;else if(U(i(null,g,e),d,a)){b=f;continue}else return!1}else return!1;else return!0}}function ga(c,d,a){__p&&__p();while(!0){var e=c;if(e!==null){var f=e.value,g=a(d,f);if(g===0)return b("bs_js_primitive").some(f);else{c=g<0?e.left:e.right;continue}}else return undefined}}function ha(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value,f=a(c,e);if(f===0)return e;else{b=f<0?d.left:d.right;continue}}else return undefined}}function ia(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value,f=a(c,e);if(f===0)return e;else{b=f<0?d.left:d.right;continue}}else throw new Error("getExn0")}}function V(a){var b=a.left;a.left=b.right;b.right=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.left);d=a.height;b.height=(c>d?c:d)+1|0;return b}function W(a){var b=a.right;a.right=b.left;b.left=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.right);d=a.height;b.height=(c>d?c:d)+1|0;return b}function ja(a){var b=W(a.left);a.left=b;return V(a)}function ka(a){var b=V(a.right);a.right=b;return W(a)}function X(a){var b=g(a.left),c=g(a.right);a.height=(b>c?b:c)+1|0;return a}function Y(a){__p&&__p();var b=a.left,c=a.right,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.left;b=b.right;if(k(f,b))return X(V(a));else return X(ja(a))}else if(e>(2+d|0)){f=c.left;b=c.right;if(k(b,f))return X(W(a));else return X(ka(a))}else{a.height=(d>e?d:e)+1|0;return a}}function Z(a,b,c){__p&&__p();if(b!==null){var d=b.value;d=a(c,d);if(d===0)return b;else{var e=b.left,f=b.right;if(d<0){d=Z(a,e,c);b.left=d}else b.right=Z(a,f,c);return Y(b)}}else return j(c)}function la(c,a){__p&&__p();var d=c.length;if(d===0)return null;else{var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b,c)<0}),f;e>=0?f=P(c,0,e):(e=-e|0,f=O(c,e-1|0,e));for(var e=e,d=d-1|0;e<=d;++e)f=Z(a,f,c[e]);return f}}function $(a,b){var c=b.right,d=b.left;if(d!==null){b.left=$(a,d);return Y(b)}else{a.value=b.value;return c}}var ma=null;f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.minimum=a;f.minUndefined=c;f.maximum=d;f.maxUndefined=e;f.removeMinAuxWithRef=o;f.empty=ma;f.isEmpty=p;f.stackAllLeft=q;f.forEachU=r;f.forEach=s;f.reduceU=t;f.reduce=u;f.everyU=v;f.every=w;f.someU=x;f.some=y;f.joinShared=B;f.concatShared=C;f.keepSharedU=Q;f.keepShared=ba;f.keepCopyU=R;f.keepCopy=ca;f.partitionSharedU=D;f.partitionShared=E;f.partitionCopyU=S;f.partitionCopy=da;f.lengthNode=F;f.size=G;f.toList=I;f.checkInvariantInternal=J;f.fillArray=K;f.toArray=N;f.fromSortedArrayAux=P;f.fromSortedArrayRevAux=O;f.fromSortedArrayUnsafe=aa;f.has=ea;f.cmp=T;f.eq=fa;f.subset=U;f.get=ga;f.getUndefined=ha;f.getExn=ia;f.fromArray=la;f.addMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_belt_SetDict",["bs_belt_internalAVLset"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(c,d,a){__p&&__p();if(c!==null){var e=c.value,f=a(d,e);if(f===0)return c;else{var h=c.left,i=c.right;if(f<0){f=g(h,d,a);if(f===h)return c;else return b("bs_belt_internalAVLset").bal(f,e,i)}else{f=g(i,d,a);if(f===i)return c;else return b("bs_belt_internalAVLset").bal(h,e,f)}}}else return b("bs_belt_internalAVLset").singleton(d)}function h(c,d,a){__p&&__p();if(c!==null){var e=c.left,f=c.value,g=c.right,i=a(d,f);if(i===0)if(e!==null)if(g!==null){var j=[g.value],k=b("bs_belt_internalAVLset").removeMinAuxWithRef(g,j);return b("bs_belt_internalAVLset").bal(e,j[0],k)}else return e;else return g;else if(i<0){j=h(e,d,a);if(j===e)return c;else return b("bs_belt_internalAVLset").bal(j,f,g)}else{k=h(g,d,a);if(k===g)return c;else return b("bs_belt_internalAVLset").bal(e,f,k)}}else return c}function a(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=g(b,f,a)}return b}function c(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=h(b,f,a)}return b}function i(a,c,d){__p&&__p();var e=c.left,f=c.value,g=c.right,h=a(d,f);if(h===0)return[e,g];else if(h<0)if(e!==null){h=i(a,e,d);return[h[0],b("bs_belt_internalAVLset").joinShared(h[1],f,g)]}else return[b("bs_belt_internalAVLset").empty,c];else if(g!==null){h=i(a,g,d);return[b("bs_belt_internalAVLset").joinShared(e,f,h[0]),h[1]]}else return[c,b("bs_belt_internalAVLset").empty]}function j(a,c,d,e){__p&&__p();var f=c.left,g=c.value,h=c.right,i=a(d,g);if(i===0){e[0]=!0;return[f,h]}else if(i<0)if(f!==null){i=j(a,f,d,e);return[i[0],b("bs_belt_internalAVLset").joinShared(i[1],g,h)]}else return[b("bs_belt_internalAVLset").empty,c];else if(h!==null){i=j(a,h,d,e);return[b("bs_belt_internalAVLset").joinShared(f,g,i[0]),i[1]]}else return[c,b("bs_belt_internalAVLset").empty]}function d(c,d,a){if(c!==null){var e=[!1];a=j(a,c,d,e);return[a,e[0]]}else return[[b("bs_belt_internalAVLset").empty,b("bs_belt_internalAVLset").empty],!1]}function k(c,d,a){__p&&__p();if(c!==null)if(d!==null){var e=c.height,f=d.height;if(e>=f)if(f===1)return g(c,d.value,a);else{f=c.left;var h=c.value,j=c.right,l=i(a,d,h);return b("bs_belt_internalAVLset").joinShared(k(f,l[0],a),h,k(j,l[1],a))}else if(e===1)return g(d,c.value,a);else{f=d.left;h=d.value;j=d.right;l=i(a,c,h);return b("bs_belt_internalAVLset").joinShared(k(l[0],f,a),h,k(l[1],j,a))}}else return c;else return d}function l(c,d,a){__p&&__p();if(c!==null&&d!==null){var e=c.left,f=c.value;c=c.right;var g=[!1];d=j(a,d,f,g);e=l(e,d[0],a);c=l(c,d[1],a);if(g[0])return b("bs_belt_internalAVLset").joinShared(e,f,c);else return b("bs_belt_internalAVLset").concatShared(e,c)}else return b("bs_belt_internalAVLset").empty}function m(c,d,a){__p&&__p();if(c!==null&&d!==null){var e=c.left,f=c.value,g=c.right,h=[!1];d=j(a,d,f,h);e=m(e,d[0],a);g=m(g,d[1],a);if(h[0])return b("bs_belt_internalAVLset").concatShared(e,g);else return b("bs_belt_internalAVLset").joinShared(e,f,g)}else return c}e=b("bs_belt_internalAVLset").empty;var n=b("bs_belt_internalAVLset").fromArray,o=b("bs_belt_internalAVLset").fromSortedArrayUnsafe,p=b("bs_belt_internalAVLset").isEmpty,q=b("bs_belt_internalAVLset").has,r=b("bs_belt_internalAVLset").subset,s=b("bs_belt_internalAVLset").cmp,t=b("bs_belt_internalAVLset").eq,u=b("bs_belt_internalAVLset").forEachU,v=b("bs_belt_internalAVLset").forEach,w=b("bs_belt_internalAVLset").reduceU,x=b("bs_belt_internalAVLset").reduce,y=b("bs_belt_internalAVLset").everyU,z=b("bs_belt_internalAVLset").every,A=b("bs_belt_internalAVLset").someU,B=b("bs_belt_internalAVLset").some,C=b("bs_belt_internalAVLset").keepSharedU,D=b("bs_belt_internalAVLset").keepShared,E=b("bs_belt_internalAVLset").partitionSharedU,F=b("bs_belt_internalAVLset").partitionShared,G=b("bs_belt_internalAVLset").size,H=b("bs_belt_internalAVLset").toList,I=b("bs_belt_internalAVLset").toArray,J=b("bs_belt_internalAVLset").minimum,K=b("bs_belt_internalAVLset").minUndefined,L=b("bs_belt_internalAVLset").maximum,M=b("bs_belt_internalAVLset").maxUndefined,N=b("bs_belt_internalAVLset").get,O=b("bs_belt_internalAVLset").getUndefined,P=b("bs_belt_internalAVLset").getExn,Q=b("bs_belt_internalAVLset").checkInvariantInternal;f.empty=e;f.fromArray=n;f.fromSortedArrayUnsafe=o;f.isEmpty=p;f.has=q;f.add=g;f.mergeMany=a;f.remove=h;f.removeMany=c;f.union=k;f.intersect=l;f.diff=m;f.subset=r;f.cmp=s;f.eq=t;f.forEachU=u;f.forEach=v;f.reduceU=w;f.reduce=x;f.everyU=y;f.every=z;f.someU=A;f.some=B;f.keepU=C;f.keep=D;f.partitionU=E;f.partition=F;f.size=G;f.toList=H;f.toArray=I;f.minimum=J;f.minUndefined=K;f.maximum=L;f.maxUndefined=M;f.get=N;f.getUndefined=O;f.getExn=P;f.split=d;f.checkInvariantInternal=Q}),null);
__d("bs_belt_Set",["bs_curry","bs_belt_SetDict"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){c=c[0];return{cmp:c,data:b("bs_belt_SetDict").fromArray(a,c)}}function c(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_SetDict").remove(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function d(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_SetDict").add(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function e(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").mergeMany(c.data,d,a)}}function g(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").removeMany(c.data,d,a)}}function h(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").union(c.data,d.data,a)}}function i(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").intersect(c.data,d.data,a)}}function j(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").diff(c.data,d.data,a)}}function k(c,d){var a=c.cmp;return b("bs_belt_SetDict").subset(c.data,d.data,a)}function l(c,d){var a=c.cmp;c=b("bs_belt_SetDict").split(c.data,d,a);d=c[0];return[[{cmp:a,data:d[0]},{cmp:a,data:d[1]}],c[1]]}function m(a){return{cmp:a[0],data:b("bs_belt_SetDict").empty}}function n(a){return b("bs_belt_SetDict").isEmpty(a.data)}function o(a,c){var d=a.cmp;return b("bs_belt_SetDict").cmp(a.data,c.data,d)}function p(a,c){return b("bs_belt_SetDict").eq(a.data,c.data,a.cmp)}function q(a,c){return b("bs_belt_SetDict").forEachU(a.data,c)}function r(a,c){return b("bs_belt_SetDict").forEachU(a.data,b("bs_curry").__1(c))}function s(a,c,d){return b("bs_belt_SetDict").reduceU(a.data,c,d)}function t(a,c,d){return s(a,c,b("bs_curry").__2(d))}function u(a,c){return b("bs_belt_SetDict").everyU(a.data,c)}function v(a,c){return b("bs_belt_SetDict").everyU(a.data,b("bs_curry").__1(c))}function w(a,c){return b("bs_belt_SetDict").someU(a.data,c)}function x(a,c){return b("bs_belt_SetDict").someU(a.data,b("bs_curry").__1(c))}function y(a,c){return{cmp:a.cmp,data:b("bs_belt_SetDict").keepU(a.data,c)}}function z(a,c){return y(a,b("bs_curry").__1(c))}function A(a,c){c=b("bs_belt_SetDict").partitionU(a.data,c);a=a.cmp;return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function B(a,c){return A(a,b("bs_curry").__1(c))}function C(a){return b("bs_belt_SetDict").size(a.data)}function D(a){return b("bs_belt_SetDict").toList(a.data)}function E(a){return b("bs_belt_SetDict").toArray(a.data)}function F(a){return b("bs_belt_SetDict").minimum(a.data)}function G(a){return b("bs_belt_SetDict").minUndefined(a.data)}function H(a){return b("bs_belt_SetDict").maximum(a.data)}function I(a){return b("bs_belt_SetDict").maxUndefined(a.data)}function J(a,c){return b("bs_belt_SetDict").get(a.data,c,a.cmp)}function K(a,c){return b("bs_belt_SetDict").getUndefined(a.data,c,a.cmp)}function L(a,c){return b("bs_belt_SetDict").getExn(a.data,c,a.cmp)}function M(a,c){return b("bs_belt_SetDict").has(a.data,c,a.cmp)}function N(a,c){return{cmp:c[0],data:b("bs_belt_SetDict").fromSortedArrayUnsafe(a)}}function O(a){return a.data}function P(a){a=a.cmp;return[a]}function Q(a,b){return{cmp:a[0],data:b}}function R(a){return b("bs_belt_SetDict").checkInvariantInternal(a.data)}var S=0,T=0,U=0;f.Int=S;f.$$String=T;f.Dict=U;f.make=m;f.fromArray=a;f.fromSortedArrayUnsafe=N;f.isEmpty=n;f.has=M;f.add=d;f.mergeMany=e;f.remove=c;f.removeMany=g;f.union=h;f.intersect=i;f.diff=j;f.subset=k;f.cmp=o;f.eq=p;f.forEachU=q;f.forEach=r;f.reduceU=s;f.reduce=t;f.everyU=u;f.every=v;f.someU=w;f.some=x;f.keepU=y;f.keep=z;f.partitionU=A;f.partition=B;f.size=C;f.toArray=E;f.toList=D;f.minimum=F;f.minUndefined=G;f.maximum=H;f.maxUndefined=I;f.get=J;f.getUndefined=K;f.getExn=L;f.split=l;f.checkInvariantInternal=R;f.getData=O;f.getId=P;f.packIdData=Q}),null);
__d("bs_js_dict",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){delete a[b];return 0};function a(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e){var f=b[e];d[e]=[f,a[f]]}return d}function b(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=a[b[e]];return d}function c(a){__p&&__p();var b={};a=a;while(!0){var c=a;if(c){var d=c[0];b[d[0]]=d[1];a=c[1];continue}else return b}}function d(a){var b={},c=a.length;for(var d=0,c=c-1|0;d<=c;++d){var e=a[d];b[e[0]]=e[1]}return b}function e(a,b){var c={},d=Object.keys(b),e=d.length;for(var f=0,e=e-1|0;f<=e;++f){var g=d[f];c[g]=a(b[g])}return c}f.unsafeDeleteKey=g;f.entries=a;f.values=b;f.fromList=c;f.fromArray=d;f.map=e}),null);
__d("SkinToneEmoji.bs",["bs_caml_array","EmojiFormat.bs","MessengerEmojiConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){var c=b("MessengerEmojiConfig").emoji_colors;c=c.filter(function(b){return b===a});return c.length!==0}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-1|0);else return i(a.slice(0,a.length-2|0))}else return a}function a(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function c(a){return m(j(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(j(a))))}e=65039;f.emoji_modifier_code=e;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isToneModifier=k;f.getTone=l;f.removeTone=m;f.applyTone=a;f.removeAllModifiers=c;f.hasVariations=d}),null);
__d("MessengerEmojiTransitionMapping.bs",["bs_caml_array","EmojiFormat.bs","SkinToneEmoji.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f3cc":case"1f46e":case"1f46f":case"1f471":case"1f473":case"1f477":case"1f481":case"1f482":case"1f486":case"1f487":case"1f575":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64d":case"1f64e":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"26f9":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){if(a===9792)return!0;else return a===9794}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-2|0);else return i(a.slice(0,a.length-3|0))}else return a}function n(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([8205,b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function a(a){return n(a,9792)}function c(a){return m(b("SkinToneEmoji.bs").removeTone(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(b("SkinToneEmoji.bs").removeTone(a))))}function e(a){a=b("EmojiFormat.bs").codeArrayToCodeString(m(b("SkinToneEmoji.bs").removeTone(a)));switch(a){case"1f46a":case"1f48f":case"1f491":return!0;default:return!1}}var o=65039,p=9792,q=9794,r=8205;f.emoji_modifier_code=o;f.gender_female=p;f.gender_male=q;f.zero_join=r;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isGenderModifier=k;f.getGender=l;f.removeGender=m;f.applyGender=n;f.makeFemale=a;f.removeAllModifiers=c;f.hasGender=d;f.isBlacklisted=e}),null);
__d("MessengerGroupLinkActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CREATE_LINK:"create_link",REVOKE_LINK:"revoke_link",SHARE_LINK:"share_link",DELETE_ON_UNSUBSCRIBE:"delete_on_unsubscribe"})}),null);
__d("MessengerGroupsSyncStatusChangeMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1855592967826245"};c.getQueryID=function(){"use strict";return"1621038754641387"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerThreadThemeUpdateWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1727493033983591"};c.getQueryID=function(){"use strict";return"643682629309288"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("XChatRemoveParticipantAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/remove_participants/",{elem_id:{type:"String"},uid:{type:"Int"},tid:{type:"String"}})}),null);
__d("XGroupsJoinChatController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/join_chat/",{link_hash:{type:"String"}})}),null);
__d("XMercuryThreadLikeIconController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/like_icon/",{emoji:{type:"String",defaultValue:""}})}),null);
__d("XMessagingBlockMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/block_messages/",{})}),null);
__d("XMessagingGroupJoinThroughHashController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/join_through_hash/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinThroughPrivateLinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/join_through_invite/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinableAcceptController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_accept/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupJoinableInviteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_invite/",{thread_fbid:{type:"String"},user_ids:{type:"IntSet"}})}),null);
__d("XMessagingGroupJoinableRejectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_reject/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupSetApprovalController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_approval_mode/",{set_mode:{type:"Enum",enumType:0},thread_fbid:{type:"String"}})}),null);
__d("XMessagingJoinableLinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_link_action/",{action:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveAdminsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_admins/",{thread_fbid:{type:"String"},admin_ids:{type:"FBIDSet"},add:{type:"Bool",defaultValue:!1}})}),null);
__d("XMessagingSaveGroupThreadDescriptionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_group_thread_description/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveNicknameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_nickname/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveThreadColorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_color/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveThreadEmojiController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_emoji/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingUnblockMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/unblock_messages/",{})}),null);
__d("XNFXIgnoreMessagesActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/ignore_messages/",{thread_fbid:{type:"Int",required:!0},location:{type:"Enum",required:!0,enumType:1},frx_context:{type:"String"},__asyncDialog:{type:"Int"}})}),null);
__d("XNFXMessengerBlockActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/block_messages/",{thread_fbid:{type:"Int",required:!0},responsible_id:{type:"Int"},location:{type:"Enum",required:!0,enumType:1},frx_context:{type:"String"},__asyncDialog:{type:"Int"}})}),null);
__d("MercurySendMessageFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTO_RETRY_CNT:"auto_retry_cnt",MANUAL_RETRY_CNT:"manual_retry_cnt"})}),null);
__d("MercuryErrorType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SERVER:1,TRANSPORT:2,TIMEOUT:3})}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/unseen_thread_ids/",{})}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_mentions_mute_thread/",{})}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_reactions_mute_thread/",{})}),null);
__d("MessengerAttachmentTransformerForSend.bs",["bs_array","bs_caml_array","MercuryAttachmentType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();c=c.node;if(c==null)return{attach_type:b("MercuryAttachmentType").ERROR};else{if(c.__typename==="ExtensibleMessageAttachment"){var e=c.story_attachment;e={legacy_attachment_id:c.legacy_attachment_id,story_attachment:e==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(e)}}else e=null;var f=c.__typename==="Sticker"?c:null,g=c.__typename,h;switch(g){case"MessageAnimatedImage":case"MessageAudio":case"MessageFile":case"MessageImage":case"MessageVideo":h=[c];break;default:h=null}g=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments({blob_attachments:h});c=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:e,blob_attachments:g,sticker:f},d);if(c.length!==0)return b("bs_caml_array").caml_array_get(c,0);else return{}}}function a(a,c,d){return b("bs_array").map(function(b){return g(a,b,d)},c)}f._transform=g;f.transform=a}),null);
__d("XMessagingSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/send/",{})}),null);
__d("MercurySyncDeltaTypes",[],(function(a,b,c,d,e,f){"use strict";a={AdminAddedToGroupThread:"AdminAddedToGroupThread",AdminRemovedFromGroupThread:"AdminRemovedFromGroupThread",AdminTextMessage:"AdminTextMessage",ChangeViewerStatus:"ChangeViewerStatus",DeliveryReceipt:"DeliveryReceipt",ForcedFetch:"ForcedFetch",MarkRead:"MarkRead",MarkUnread:"MarkUnread",MarkFolderSeen:"MarkFolderSeen",MessageDelete:"MessageDelete",NewMessage:"NewMessage",NoOp:"NoOp",PagesManagerEvent:"PagesManagerEvent",ParticipantLeftGroupThread:"ParticipantLeftGroupThread",ParticipantsAddedToGroupThread:"ParticipantsAddedToGroupThread",ReadReceipt:"ReadReceipt",ReplaceMessage:"ReplaceMessage",RTCEventLog:"RTCEventLog",ThreadAction:"ThreadAction",ThreadDelete:"ThreadDelete",ThreadFolder:"ThreadFolder",ThreadMuteSettings:"ThreadMuteSettings",ThreadName:"ThreadName",JoinableMode:"JoinableMode",ApprovalMode:"ApprovalMode",ApprovalQueue:"ApprovalQueue",ClientPayload:"ClientPayload",GenieMessage:"GenieMessage",MontageMessage:"MontageMessage",RtcCallData:"RtcCallData"};e.exports=a}),null);
__d("MercurySyncTopicType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DELTA:"delta",DELTAFLOW:"deltaflow",DELTAFLOWREJECT:"deltaflowreject"})}),null);
__d("MSuggestionDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("MSuggestionActions",["MSuggestionDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SAVE_ALL_SUGGESTIONS:null,REMOVE_ALL_SUGGESTIONS:null,REMOVE_SUGGESTIONS_BY_TYPE:null});var g={Types:a,saveAllSuggestions:function(a,c){b("MSuggestionDispatcher").dispatch({type:g.Types.SAVE_ALL_SUGGESTIONS,threadID:a,suggestions:c})},removeAllSuggestions:function(a){a&&b("MSuggestionDispatcher").dispatch({type:g.Types.REMOVE_ALL_SUGGESTIONS,threadID:a})},removeSuggestionsByType:function(a,c){b("MSuggestionDispatcher").dispatch({type:g.Types.REMOVE_SUGGESTIONS_BY_TYPE,threadID:a,typeID:c})}};e.exports=g}),null);
__d("MercuryMessageCustomizations",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=JSON.parse(a),c=[];Object.keys(b).forEach(function(a){c.push({customization_type:a,customization_value:b[a]})});return c}e.exports={parseCustomizations:a}}),null);
__d("MercuryProfileRanges",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!a.id&&a.i?{id:a.i,offset:a.o,length:a.l}:a}e.exports={extractFromDelta:function(a){a=(a=a)!=null?(a=a.data)!=null?a.prng:a:a;if(!a)return undefined;var b=[];try{b=JSON.parse(a);if(b.length>0)return b.map(g)}catch(a){}return b}}}),null);
__d("MessageThreadReadStateEffect",[],(function(a,b,c,d,e,f){"use strict";var g={MARK_READ:1,MARK_UNREAD:2,KEEP_AS_IS:3};a=function(a,b){var c=b.messageMetadata.skipBumpThread;a=a!==b.messageMetadata.actorFbId?g.MARK_UNREAD:g.KEEP_AS_IS;c&&(a=g.KEEP_AS_IS);return b.messageMetadata.threadReadStateEffect?b.messageMetadata.threadReadStateEffect:a};e.exports={MessageThreadReadStateEffectType:g,extractThreadStateEffectFromDelta:a}}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){var e=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),f=c.extensible_attachment,g;if(f==null)g=null;else{var h=f.story_attachment;g={legacy_attachment_id:f.legacy_attachment_id,story_attachment:h==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(h)}}return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:e,sticker:c.sticker},d)}f.transform=a}),null);
__d("ClientSyncProtocol_GroupsSyncAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPT_IN:0,OPT_OUT:1})}),null);
__d("LiveLocationStopReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EXPIRED:1,CANCELED:2,ARRIVED:3})}),null);
__d("RepliedToMessageStatusForGraphQL",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VALID:"VALID",DELETED:"DELETED",TEMPORARILY_UNAVAILABLE:"TEMPORARILY_UNAVAILABLE"})}),null);
__d("MercurySyncDeliveryReceiptTransformer",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{delivery_receipts:[{other_user_fbid:a.threadKey.otherUserFbId?a.threadKey.otherUserFbId:"",thread_fbid:a.threadKey.threadFbId?a.threadKey.threadFbId:"",time:parseInt(a.deliveredWatermarkTimestampMs,10)}]}}e.exports={transform:a}}),null);
__d("MercurySyncMarkFolderChangeTransformer",["MercuryActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").CHANGE_FOLDER,other_user_fbid:a.threadKey.otherUserFbId,new_folder:b("MessagingTag").IRIS_MAPPING[a.folder]}}e.exports={transform:a}}),null);
__d("MercurySyncMarkFolderSeenTransformer",["MercuryGlobalActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.folders.map(function(c){return{action_type:b("MercuryGlobalActionType").MARK_ALL_SEEN,folder:b("MessagingTag").IRIS_MAPPING[c],timestamp:parseInt(a.timestamp,10)}})}e.exports={transform:a}}),null);
__d("MercurySyncMarkReadTransformer",["MercuryActionType","MercuryGlobalActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.folders&&a.folders.length>0?a.folders.map(function(c){return{action_type:b("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:b("MessagingTag").IRIS_MAPPING[c],timestamp:parseInt(a.watermarkTimestamp,10)}}):a.threadKeys.map(function(c){return{action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!0,timestamp:parseInt(a.watermarkTimestamp,10),folder:b("MessagingTag").INBOX}})}e.exports={transform:a}}),null);
__d("MercurySyncMarkUnreadTransformer",["MercuryActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.threadKeys.map(function(c){return{action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!1,timestamp:parseInt(a.watermarkTimestamp,10),folder:b("MessagingTag").INBOX}})}e.exports={transform:a}}),null);
__d("MercurySyncMessageDeleteTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").DELETE_MESSAGES,message_ids:a.messageIds,other_user_fbid:a.threadKey.otherUserFbId,thread_fbid:a.threadKey.threadFbId}}e.exports={transform:a}}),null);
__d("PagesMessagingEventType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FLAG:1,CREATE_ADMIN_NOTE:2,PRIORITY_UPDATE:3})}),null);
__d("MercurySyncPagesManagerEventTransformer",["MercuryActionType","PagesMessagingEventType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=JSON.parse(a.jsonBlob),d=c&&c.type;if(!d)return undefined;switch(d){case b("PagesMessagingEventType").FLAG:d=!!(c&&c.flagData&&c.flagData.state);c={action_type:b("MercuryActionType").CHANGE_FLAG,mark_as_flag:d,other_user_fbid:a.threadKey.otherUserFbId,thread_fbid:a.threadKey.threadFbId};return c;default:return undefined}}e.exports={transform:a}}),null);
__d("MercurySyncReadReceiptTransformer",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b={watermark:parseInt(a.watermarkTimestampMs,10),action:parseInt(a.actionTimestampMs,10)},c=a.threadKey.otherUserFbId||a.actorFbId;a=a.threadKey.otherUserFbId||a.threadKey.threadFbId;var d={roger:{}};d.roger[a]={};d.roger[a][c]=b;return d}e.exports={transform:a}}),null);
__d("MercurySyncRtcCallDataTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.messageMetadata.threadKey&&a.messageMetadata.threadKey.threadFbId?a.messageMetadata.threadKey.threadFbId.toString():undefined,d=a.initiator&&a.initiator.userFbId?a.initiator.userFbId.toString():undefined;return{action_type:b("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:c,call_state:a.callState,server_info_data:a.serverInfoData,initiator_fbid:d}}e.exports={transform:a}}),null);
__d("MessagingThreadAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_INVALID:"ACTION_INVALID",ACTION_ARCHIVED:"ACTION_ARCHIVED",ACTION_UNARCHIVED:"ACTION_UNARCHIVED"})}),null);
__d("MercurySyncThreadActionTransformer",["MercuryActionType","MessagingThreadAction"],(function(a,b,c,d,e,f){"use strict";function a(a){a={action_type:b("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:a.threadKey.threadFbId,other_user_fbid:a.threadKey.otherUserFbId,archived:a.action===b("MessagingThreadAction").ACTION_ARCHIVED};return a}e.exports={transform:a}}),null);
__d("MercurySyncThreadAdminsAddToGroupTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").ADD_GROUP_ADMINS,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,added_admin_ids:a.addedAdmins.map(function(a){return a.userFbId})}}e.exports={transform:a}}),null);
__d("MercurySyncThreadAdminsRemovedFromGroupTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,removed_admin_ids:a.removedAdminFbIds}}e.exports={transform:a}}),null);
__d("MessengerApprovalModeTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN:0,APPROVALS:1})}),null);
__d("MercurySyncThreadApprovalModeTransformer",["MercuryActionType","MessengerApprovalModeTypes"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,approval_mode:b("MessengerApprovalModeTypes")[a.mode]}}e.exports={transform:a}}),null);
__d("MessengerApprovalQueueTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUESTED:"REQUESTED",REMOVED:"REMOVED"})}),null);
__d("MessengerGroupRequestSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD:0,JOIN_THROUGH_LINK:1})}),null);
__d("MercurySyncThreadApprovalQueueTransformer",["MercuryActionType","MercuryIDs","MessengerApprovalQueueTypes","MessengerGroupRequestSource"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"ADD":return b("MessengerGroupRequestSource").ADD;case"JOIN_THROUGH_LINK":return b("MessengerGroupRequestSource").JOIN_THROUGH_LINK;default:return b("MessengerGroupRequestSource").ADD}}function a(a){if(a.inviterFbId)return{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,removed_group_id:a.action===b("MessengerApprovalQueueTypes").REMOVED?a.recipientFbId:null,added_group_id:a.action===b("MessengerApprovalQueueTypes").REQUESTED?{requester:{id:a.recipientFbId},inviter:{id:a.inviterFbId},request_source:g(a.requestSource),request_timestamp:a.requestTimestamp}:null};var c=b("MercuryIDs").getParticipantIDFromUserID(a.recipientFbId);return{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,removed_id:a.action===b("MessengerApprovalQueueTypes").REMOVED?c:null,added_id:a.action===b("MessengerApprovalQueueTypes").REQUESTED?c:null}}e.exports={transform:a}}),null);
__d("MercurySyncThreadDeleteTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.threadKeys.map(function(a){return{action_type:b("MercuryActionType").DELETE_THREAD,other_user_fbid:a.otherUserFbId,thread_fbid:a.threadFbId}})}e.exports={transform:a}}),null);
__d("MercurySyncThreadJoinableModeTransformer",["MercuryActionType","MessengerJoinableModeType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").JOINABLE_MODE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,joinable_mode:{mode:b("MessengerJoinableModeType")[a.mode],link:a.link}}}e.exports={transform:a}}),null);
__d("MercurySyncThreadMuteSettingsTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){a={action_type:b("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:a.threadKey.threadFbId,other_user_fbid:a.threadKey.otherUserFbId,mute_until:parseInt(a.expireTime,10)};return a}e.exports={transform:a}}),null);
__d("ChatTitleBarBlinker",["ChatActivity","DocumentTitle","JSLogger","MercuryThreadInformer","MercuryNotificationRenderer","PresenceState","MercuryTimestampTracker"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=b("MercuryThreadInformer").get();var g=b("MercuryTimestampTracker").get(),h=b("JSLogger").create("chat_title"),i=null,j=0,k=!1;function l(){if(i){i.stop();i=null;return!0}return!1}function m(a){a=a||g.getLastUserMessageTimestamp();j<=a&&(j=a,(l()||k)&&b("PresenceState").doSync())}f={blink:function(a,c){!i&&j<c&&b("MercuryNotificationRenderer").renderDocumentTitle(a,function(a){i||(i=b("DocumentTitle").blink(a))})},stopBlinking:function(){m()},blinkingElsewhere:function(){k=!0}};function n(a){a=b("PresenceState").verifyNumber(a.sb2);return!a||a<=j?null:a}function a(a){a=a&&n(a);a&&(j=a,h.debug("load",j),l(),k=!1)}function c(a){var b=n(a);b||(h.debug("store",j),a.sb2=j,k=!1);return a}b("PresenceState").registerStateStorer(c);b("PresenceState").registerStateLoader(a);d.subscribe("thread-read-changed",function(a,b){a=g.getLastUserMessageTimestamp();var c=0;for(var d in b)b[d].mark_as_read&&b[d].timestamp>=a&&b[d].timestamp>c&&(c=b[d].timestamp);c&&m(c)});b("ChatActivity").subscribe("activity",function(){return m()});c=b("PresenceState").getInitial();c&&(j=n(c)||0);e.exports=f}),null);
__d("ChatTabTypeaheadDataSource",["MercuryConfig","MercuryTypeaheadConstants","MercuryTypeaheadDataSource"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("MercuryTypeaheadDataSource"));g=c&&c.prototype;function a(a){"use strict";a=a||{},a.maxResults=b("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX,a.showDefaultList=b("MercuryConfig").ChatComposer,g.constructor.call(this,a),this.$ChatTabTypeaheadDataSource1=!0}a.prototype.buildData=function(a){"use strict";__p&&__p();var c=[],d=[],e=[],f=[],h=[],i=[],j=[],k=!this.$ChatTabTypeaheadDataSource1;a.forEach(function(a){__p&&__p();var i=g.getEntry.call(this,a);switch(i.render_type){case b("MercuryTypeaheadConstants").FRIEND_TYPE:c.push(a);break;case b("MercuryTypeaheadConstants").THREAD_TYPE:this.$ChatTabTypeaheadDataSource1&&d.push(a);break;case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:e.push(a);break;case b("MercuryTypeaheadConstants").FB4C_TYPE:f.push(a);break;case b("MercuryTypeaheadConstants").PAGE_TYPE:k||h.push(a);break;case b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:i=!k||i.can_add_to_group_chat;i&&j.push(a);break;default:break}}.bind(this),this);a=i.concat(c,f,d,h,e,j);return g.buildData.call(this,a)};a.prototype.query=function(a,b,c,d){"use strict";return g.query.call(this,a,b,c,d)};a.prototype.respond=function(a,b,c){"use strict";return g.respond.call(this,a,b,c)};a.prototype.setShowThreads=function(a){"use strict";this.$ChatTabTypeaheadDataSource1=a};e.exports=a}),null);
__d("FantaGetMessageActions",["FantaDispatcher","FantaTabActions","MercuryCanonicalGroupThreadManager","MercuryIDs","MercuryTypeaheadConstants","keyMirror","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("requireWeak")("FantaAppStore",function(a){return g=a});var h=b("keyMirror")({ADD_PARTICIPANTS:null,CLEAR_PARTICIPANTS:null,CLEAR_PREVIEW:null,FETCH_MORE_MESSAGES:null,ON_BOOTLOAD_TYPEAHEAD:null,ON_GET_PARTICIPANT_RESPONSE:null,ON_GET_THREAD_PREVIEW_RESPONSE:null,ON_GET_THREAD_RESPONSE:null,ON_MESSAGE_STORE_RESPONSE:null,ON_PAGE_NULL_RESPONSE:null,ON_PRIVACY_STATE_CHANGE:null,ON_SHOW_CONTEXT_BANNER_TIMER:null,ON_GET_THREAD_HREF_RESPONSE:null,REFRESH_THREAD:null,THREADS_UPDATED:null});a={Types:h,addParticipants:function(a,c){__p&&__p();var d=c.length===1&&c[0].getInfo().render_type===b("MercuryTypeaheadConstants").THREAD_TYPE,e;if(d){d=c[0].getInfo().mercury_thread;d=b("MercuryIDs").getThreadIDFromThreadFBID(d.thread_fbid);b("FantaTabActions").replaceTab(a,d);return}if(c.length===1){d=c[0].info&&c[0].info.uid;d&&(e=b("MercuryIDs").getThreadIDFromUserID(d))}else if(c.length===0){b("FantaDispatcher").dispatch({type:h.CLEAR_PARTICIPANTS,tabID:a});return}else{var f=b("MercuryCanonicalGroupThreadManager").get();d=c.map(function(a){return a.info.uid});b("FantaDispatcher").dispatch({type:h.CLEAR_PREVIEW,tabID:a,tokens:c});var i=f.getCanonicalGroupThreadIDForParticipants(Array.from(d),function(d){f.unsubscribe(i);if(g){var e=g.getState();if(!e.tabGroup.tabs.get(a))return}d&&b("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:d,tabID:a,tokens:c})})}e&&b("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:e,tabID:a,tokens:c})},onBootloadTypeahead:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_BOOTLOAD_TYPEAHEAD,tabID:a,thread:c})},fetchMoreMessages:function(a){b("FantaDispatcher").dispatch({type:h.FETCH_MORE_MESSAGES,threadID:a})},refreshThread:function(a){b("FantaDispatcher").dispatch({type:h.REFRESH_THREAD,threadID:a})},onGetThreadResponse:function(a){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_RESPONSE,thread:a})},onGetThreadPreviewResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_PREVIEW_RESPONSE,tabID:a,thread:c})},onParticipantResponse:function(a){b("FantaDispatcher").dispatch({type:h.ON_GET_PARTICIPANT_RESPONSE,tabID:a})},onShowContextBannerTimer:function(a){b("FantaDispatcher").dispatch({type:h.ON_SHOW_CONTEXT_BANNER_TIMER,threadID:a})},onMessageStoreResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_MESSAGE_STORE_RESPONSE,messages:a,tabID:c})},threadsUpdated:function(a){b("FantaDispatcher").dispatch({type:h.THREADS_UPDATED,threads:a})},onPrivacyStateChange:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_PRIVACY_STATE_CHANGE,threadID:a,privacyState:c})},onPageNullResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_PAGE_NULL_RESPONSE,threadID:a,nullStateCTA:c})},onGetThreadHrefResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_HREF_RESPONSE,tabID:a,href:c})}};e.exports=a}),null);
__d("FantaTabSheetActions",["FantaDispatcher","LogHistory","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,ON_BOOTLOAD_EVENT_REMINDER:null,ON_WORK_DO_NOT_DISTURB_RESPONSE:null,ON_MENTORSHIP_PROGRAM_RESPONSE:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_APPOINTMENT_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_AWAY_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_MENTORSHIP_PROGRAM_SHEET:null}),h=b("LogHistory").getInstance("fanta_sheets");function i(a){b("FantaDispatcher").dispatch(a),h.log(a.type,a.tabID)}a={Types:g,openUserFocusSheet:function(a){i({type:g.OPEN_USER_FOCUS_SHEET,tabID:a})},openBypassFocusSheet:function(a){i({type:g.OPEN_BYPASS_FOCUS_SHEET,tabID:a})},closeUserFocusAndBypassSheet:function(a){i({type:g.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:a})},openAddMoreFriendsSheet:function(a){i({type:g.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddMoreFriendsSheet:function(a){i({type:g.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddFriendsSheet:function(a){i({type:g.CLOSE_ADD_FRIENDS_SHEET,tabID:a})},openNameConversationSheet:function(a){i({type:g.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:a})},closeNameConversationSheet:function(a){i({type:g.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:a})},openReadOnlySheet:function(a){i({type:g.OPEN_READ_ONLY_SHEET,tabID:a})},closeReadOnlySheet:function(a){i({type:g.CLOSE_READ_ONLY_SHEET,tabID:a})},openReadOnlyPermanentSheet:function(a){i({type:g.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:a})},closeReadOnlyPermanentSheet:function(a){i({type:g.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:a})},openEmployeeAwaySheet:function(a){i({type:g.OPEN_EMPLOYEE_AWAY_SHEET,tabID:a})},openEmployeePersonalUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},closeEmployeePersonalUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},openEmployeeWorkUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:a})},closeEmployeeWorkUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:a})},openMentorshipProgramSheet:function(a){i({type:g.OPEN_MENTORSHIP_PROGRAM_SHEET,tabID:a})},onIsPageTab:function(a,b){i({type:g.ON_IS_PAGE_TAB,pageIndicator:b,tabID:a})},onBootloadEventReminder:function(a){i({type:g.ON_BOOTLOAD_EVENT_REMINDER,tabID:a})},openAppointmentBannerSheet:function(a){i({type:g.OPEN_APPOINTMENT_SHEET,tabID:a})},onWorkDoNotDisturbResponse:function(a,b,c){i({type:g.ON_WORK_DO_NOT_DISTURB_RESPONSE,tabID:a,status:b,description:c})},onMentorshipProgramResponse:function(a,b,c){i({type:g.ON_MENTORSHIP_PROGRAM_RESPONSE,tabID:a,groupID:c,programName:b})}};e.exports=a}),null);
__d("MercurySheetPolicy",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={ChatThreadIsMutedTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatUserFocusSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserFocusBypassSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserBlockedTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatUploadWarningTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatThreadIsMessageBlockedSheet:{isPermanent:!0,isSheetWithInput:!1},ChatReadOnlyTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatReadOnlyPermanentTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatOfflineTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNoRecipientsTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNewMessagesTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatNameConversationTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatEmployeeAwaySheet:{isPermanent:!0,isSheetWithInput:!1},ChatEventReminderTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatAppointmentBanner:{isPermanent:!0,isSheetWithInput:!1},ChatMontageSheet:{isPermanent:!1,isSheetWithInput:!1},ChatJoinCallSheet:{isPermanent:!0,isSheetWithInput:!1},FantaAddFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},FantaAddMoreFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},ChatRoomAssociatedObjectSheet:{isPermanent:!1,isSheetWithInput:!1},ChatMentorshipProgramSheet:{isPermanent:!1,isSheetWithInput:!1},ChatGroupsSyncTabSheet:{isPermanent:!0,isSheetWithInput:!1}};a={canReplaceOpenSheet:function(a,b){var c=this.getType(b),d=this.isPermanent(b);b=this.isSheetWithInput(b);var e=this.getType(a),f=this.isPermanent(a);a=this.isSheetWithInput(a);if(a)return!!(c!==e&&b);if(f&&!d)return!1;return e===this.sheets.ChatThreadIsMessageBlockedSheet?!1:!0},getType:function(a){var b=a.getType||a.type&&a.type.getType||function(){return a};b=b.call(a);return b},isPermanent:function(a){if(typeof a==="string"&&g[a])return g[a].isPermanent;var b=a.isPermanent||a.type&&a.type.isPermanent||function(){return!1};b=b.call(a);return b},isSheetWithInput:function(a){if(typeof a==="string"&&g[a])return g[a].isSheetWithInput;var b=a.isSheetWithInput||a.type&&a.type.isSheetWithInput||function(){return!1};b=b.call(a);return b},sheets:b("keyMirror")(g)};e.exports=a}),null);
__d("TimeSpentRoomTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT"})}),null);
__d("MessengerGroupAdminModelStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUIRED:"required",OPTIONAL:"optional",NOT_SUPPORTED:"not_supported"})}),null);
__d("MessengerParticipantAddModeTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD:"ADD",INVITE:"INVITE",ADD_INVITE:"ADD_INVITE"})}),null);
__d("MessengerAdminGroupUtils",["fbt","CurrentUser","MercuryConfig","MercuryIDs","MessageRequestUtils","MessageThreadAssociatedObjectUtils","MessagingSourceEnum","MessengerApprovalModeTypes","MessengerGroupAdminModelStatus","MessengerGroupAdminType","MessengerJoinableModeType","MessengerParticipantAddModeTypes","QE2Logger","WorkModeConfig","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="messenger_use_new_group_participant_suggestion_ranking",i="show_nullstate_chat_tab_group_chat",j={isJoinableAndOpenThread:function(a){return this.isJoinableThread(a)&&this.isApprovalOpenThread(a)},isJoinableAndApprovalRequiredThread:function(a){return!!(this.isJoinableThread(a)&&a&&a.approval_mode===b("MessengerApprovalModeTypes").APPROVALS)},isWorkGroupSyncedChat:function(a){return!!(b("gkx")("678597")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},isWorkSyncedChatThreadCreationMessage:function(a){return!!(a.log_message_data&&a.log_message_data.name&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_CREATION)!==-1)},isWorkSyncedChatThreadMemberSyncMessage:function(a){return!!(a.tags&&a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC)!==-1)},shouldAddToApprovalQueue:function(a,b){return!!(this.isJoinableAndApprovalRequiredThread(a)&&a&&!j.isAdmin(a.admins,b))},isJoinableThread:function(a){return!!(b("gkx")("678598")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE)},isGroupChat:function(a){return!!(a&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},shouldInvite:function(a){return!!(b("gkx")("678598")&&a&&a.participant_add_mode===b("MessengerParticipantAddModeTypes").INVITE)},isApprovalOpenThread:function(a){return!!(b("gkx")("678598")&&a&&a.approval_mode===b("MessengerApprovalModeTypes").OPEN)},isAdminRequired:function(a){return!!(a&&a.admin_model_status===b("MessengerGroupAdminModelStatus").REQUIRED)},isOwner:function(a,b){return a&&(this.isJoinableThread(b)||this.isAdminRequired(b))},canSeeJoinableGroupOptions:function(a,c){var d=b("WorkModeConfig").is_work_user,e=j.showJoinableApprovalToggle(a,c);c=j.showApprovalQueue(a,c);return!d&&this.isJoinableThread(a)&&(c||e)},canSeeGroupOptionsSection:function(a,c){var d=b("WorkModeConfig").is_work_user;c=this.isAdmin(a.admins,c);var e=b("MessageRequestUtils").isMessageRequest(a);return(a.work_associated_group||!d)&&c&&this.isAdminRequired(a)&&!e},canSeeBotsInGroupTypeahead:function(){var a=b("CurrentUser").isWorkUser();return a&&b("gkx")("678599")},canMakeOthersAdmins:function(a,b,c){return this.isOwner(a,c)&&!b},canMakeSelfAdmin:function(a,b){return(this.isJoinableThread(b)||this.isAdminRequired(b))&&Object.keys(b.admins).length===0&&a},canRemoveAdmin:function(a,c,d,e){if(this.isAdminRequired(e)&&Object.keys(e.admins).length===1)return!1;switch(d){case b("MessengerGroupAdminType").CHAT_SUPER_ADMIN:return!1;default:return this.isOwner(a,e)&&c}},canRemoveFromGroup:function(a,c,d){switch(c){case b("MessengerGroupAdminType").CHAT_SUPER_ADMIN:return!1;default:return this.isAdminRequired(d)||this.isWorkGroupSyncedChat(d)?a:this.isOwner(a,d)||!this.isJoinableThread(d)}},showJoinableApprovalToggle:function(a,b){if(a.associated_object&&!a.associated_object.approval_mode_toggleable)return!1;b=j.isAdmin(a.admins,b);return j.isOwner(b,a)},showApprovalQueue:function(a,b){b=j.isAdmin(a.admins,b);b=j.isOwner(b,a);var c=this.getPendingRequestNumber(a);if(a&&this.isAdminRequired(a))return this.isAdminRequired(a)&&b&&c>0;else{a=j.isJoinableAndApprovalRequiredThread(a);return a&&b&&c>0}},showParticipantsModal:function(a,b,c){return this.isJoinableThread(c)&&!a&&!b},useNewGroupMemberSuggestionRanking:function(){b("QE2Logger").logExposureForUser(h);return b("MercuryConfig").MNGPS},showDefaultListForNewPersonAddChatTab:function(){b("QE2Logger").logExposureForUser(i);return b("MercuryConfig").ChatGroupChat},showDefaultListForNewChatTab:function(){return b("MercuryConfig").ChatComposer},canUpdateThreadCustomization:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},canUpdateThreadDescription:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},isAdmin:function(a,c){if(!a)return!1;if(b("MercuryIDs").isValid(c)){var d=b("MercuryIDs").getUserIDFromParticipantID(c);return!!d&&a[d]!==undefined}return a[c]!==undefined},getLeaveGroupBodyText:function(a,b){return this.isOwner(a,b)?g._("Si vous quittez ce groupe, vous n\u2019en serez plus propri\u00e9taire, et d\u2019autres membres pourront le g\u00e9rer. Vous ne pourrez plus envoyer ou recevoir de nouveaux messages."):g._("Vous ne recevrez plus de messages de cette conversation et les personnes verront que vous l\u2019avez quitt\u00e9e.")},getLeaveGroupTitleText:function(a,b){return this.isOwner(a,b)?g._("Quitter cette conversation\u00a0?"):g._("Quitter la conversation\u00a0?")},getLeaveGroupButtonText:function(a,b){return this.isOwner(a,b)?g._("Quitter la conversation"):g._("Quitter")},getMakeOwnerBodyText:function(a,b,c){if(a)return b?g._("En tant qu\u2019administrateur du groupe vous pourrez g\u00e9rer qui peut adh\u00e9rer et personnaliser cette conversion."):g._("En tant qu\u2019administrateur du groupe, {owner's name} pourra g\u00e9rer qui peut adh\u00e9rer et personnaliser cette conversation.",[g._param("owner's name",c)]);else return b?g._("En tant que propri\u00e9taire du groupe, vous pourrez en g\u00e9rer la propri\u00e9t\u00e9 et retirer des membres de la conversation. Seuls les propri\u00e9taires peuvent ajouter d\u2019autres propri\u00e9taires."):g._("En tant que propri\u00e9taire du groupe, {owner's name} pourra en g\u00e9rer la propri\u00e9t\u00e9 et retirer des membres de la conversation. Il pourra supprimer le droit de propri\u00e9t\u00e9 d\u2019autres propri\u00e9taires.",[g._param("owner's name",c)])},getMakeOwnerTitleText:function(a,b){if(a)return b?g._("Devenir administrateur du groupe\u00a0?"):g._("Nommer administrateur du groupe\u00a0?");else return b?g._("Devenir le propri\u00e9taire du groupe\u00a0?"):g._("Ajouter un propri\u00e9taire au groupe\u00a0?")},getMakeOwnerButtonText:function(a,b){if(a)return b?g._("Devenir administrateur"):g._("Nommer administrateur");else return b?g._("Devenez propri\u00e9taire"):g._("D\u00e9finir comme propri\u00e9taire")},getRemoveOwnerBodyText:function(a,b,c,d){if(b&&c)return a?null:g._("Vous ne g\u00e9rerez plus les propri\u00e9taires du groupe et ne pourrez plus supprimer de membres de cette conversation. Vous serez toujours un participant au groupe. Tout autre membre pourra devenir propri\u00e9taire du groupe.");else if(b&&!c)return a?g._("Vous ne pourrez plus g\u00e9rer qui peut adh\u00e9rer ni personnaliser cette conversation."):g._("Vous ne g\u00e9rerez plus les propri\u00e9taires du groupe et ne pourrez plus supprimer de membres de cette conversation. Vous serez toujours un participant au groupe.");else return a?g._("{owner's name} ne pourra plus g\u00e9rer qui peut adh\u00e9rer ni personnaliser cette conversation.",[g._param("owner's name",d)]):g._("{owner's name} ne g\u00e9rera plus la propri\u00e9t\u00e9 du groupe et ne pourra plus retirer des membres de la conversation. Il restera participant dans le groupe.",[g._param("owner's name",d)])},getRemoveOwnerTitleText:function(a){return a?g._("Supprimer des administrateurs du groupe\u00a0?"):g._("Supprimer des propri\u00e9taires du groupe\u00a0?")},getRemoveOwnerButtonText:function(a){return a?g._("Supprimer"):g._("Supprimer des propri\u00e9taires")},getPendingRequestNumber:function(a){if(a&&a.approval_queue_ids&&a.approval_queue_ids.length)return a.approval_queue_ids.length;else if(a&&this.isAdminRequired(a)&&a.group_approval_queue&&a.group_approval_queue.length)return a.group_approval_queue.length;return 0}};e.exports=j}),null);
__d("MessengerRoomPrivacyMode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WHITELISTED_MODE:0,PUBLIC_MODE:1})}),null);
__d("FantaComposeViewReducers",["Bootloader","FantaGetMessageActions","FantaTabSheetActions","MercuryDataSourceWrapper","MercurySheetPolicy","MercuryTypeaheadConstants","MessengerAdminGroupUtils","MessengerRoomPrivacyMode","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaGetMessageActions").Types,h=b("FantaTabSheetActions").Types;function a(a,b){switch(b.type){case g.ON_GET_THREAD_RESPONSE:case g.ON_GET_THREAD_PREVIEW_RESPONSE:var c=b.thread;b=b.tabID||c.thread_id;a=i(a,c,b)}return a}function i(a,c,d){c.participants.length===0&&(a=j(a,d,c),a=l(a,d,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet));return a}function c(a,b){switch(b.type){case g.ON_BOOTLOAD_TYPEAHEAD:b=b.thread;var c=b.thread_id;a=j(a,c,b)}return a}function j(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c);if(!e||e.typeahead)return a;b("ifRequired")("ChatTabTypeaheadRenderer",function(f){__p&&__p();b("ifRequired")("ContextualTypeaheadView",function(g){__p&&__p();b("ifRequired")("MercuryTypeahead",function(h){__p&&__p();if(!a.mercury.tabContents.get(c))return;var i=!!(d&&d.participants&&d.participants.length===0),j=!!(d&&d.associated_object&&d.associated_object.privacy_mode===b("MessengerRoomPrivacyMode").WHITELISTED_MODE),k=i?b("MercuryDataSourceWrapper").chat_typeahead_source:j?b("MercuryDataSourceWrapper").chat_add_people_froup_source:b("MercuryDataSourceWrapper").chat_add_people_source;k.setShowThreads(i);i?k.setShowDefaultList(b("MessengerAdminGroupUtils").showDefaultListForNewChatTab()):j||k.setShowDefaultList(b("MessengerAdminGroupUtils").showDefaultListForNewPersonAddChatTab());j&&k.setQueryData({thread_id:d.thread_fbid});i=new h(k,g);i.setViewOption("renderer",f);i.setExcludedParticipantsFromThreadMeta(d);e=e.merge({typeahead:i});a=a.setIn(["mercury","tabContents",c],e)},function(){return k(c,d)})},function(){return k(c,d)})},function(){return k(c,d)});return a}function d(a,c){switch(c.type){case h.OPEN_ADD_MORE_FRIENDS_SHEET:var d=c.tabID,e=a.mercury.tabContents.get(d).thread;if(e){a=j(a,d,e);return l(a,c.tabID,b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet)}}return a}function k(a,c){b("Bootloader").loadModules(["ChatTabTypeaheadRenderer","ContextualTypeaheadView","MercuryTypeahead"],function(d,e,f){b("FantaGetMessageActions").onBootloadTypeahead(a,c)},"FantaComposeViewReducers")}function l(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c),f=a.tabGroup.tabs.get(c);if(!f||!e)return a;f=e;f=f.openSheet;if(f&&!b("MercurySheetPolicy").canReplaceOpenSheet(f,d))return a;e=e.merge({openSheet:d});a=a.setIn(["mercury","tabContents",c],e);return a}function f(a,c){switch(c.type){case g.ADD_PARTICIPANTS:var d=c.tokens;c=c.tabID;d=d.length===1&&d[0].getInfo().render_type===b("MercuryTypeaheadConstants").THREAD_TYPE;if(!d)return l(a,c,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return a}e.exports={addParticipants:f,onBootloadTypeahead:c,onGetThreadResponse:a,openAddMoreFriends:d}}),null);
__d("FantaMessageActions",["Bootloader","CurrentUser","FantaDispatcher","MercuryConfig","MercuryIDs","MercuryLocalIDs","MercuryViewer","MessengerState.bs","emptyFunction","ifRequired","keyMirror","requireWeak","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("requireWeak")("FantaAppStore",function(a){return g=a});var h=b("keyMirror")({ADD_GROUP_PARTICIPANTS:null,ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:null,ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:null,CANCEL_FILE_UPLOAD:null,CANCEL_REPLY_TO_MESSAGE:null,COMPOSER_TEXT_UPDATE:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,PREPARE_FILES_FOR_SEND:null,RECEIVED_NEW_MESSAGE:null,REMOVE_SHARE_PREVIEW:null,REPLY_TO_MESSAGE:null,SEND_HOT_LIKE:null,SEND_MESSAGE:null,SEND_PHOTO:null,SEND_STICKER:null,UPDATE_GROUP_NAME:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null});function i(){var a=document.createElement("form");a.action=b("MercuryConfig").upload_url;a.method="post";return a}function j(a,b){var c=document.createElement("input");c.type="file";c.name="attachment[]";c.multiple=!0;b&&(c.onchange=b);a.appendChild(c);return c}function k(a){__p&&__p();var c=b("MercuryViewer").getID();if(!a.length)return null;a=a.filter(function(a){return a!==c});var d;if(a.length===0)return null;else a.length===1?d=b("MercuryIDs").getThreadIDFromParticipantID(a[0]):(d=b("MercuryLocalIDs").generateThreadID(),a.unshift(c),b("MessengerState.bs").createNewLocalThread(b("CurrentUser").getID(),d,a));return d}var l={Types:h,prepareFilesForSend:function(a,c,d,e){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:h.PREPARE_FILES_FOR_SEND,tabID:a,files:c,composer:d}),e&&e()})},openUploadFilePicker:function(a,b){var c=i();c=j(c,function(){l.prepareFilesForSend(a,this.files,b)});c.click()},uploadedFile:function(a,c,d){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:h.UPLOADED_FILE,tabID:a,uploadID:c,payload:d})})},uploadFileFailed:function(a,c){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:h.UPLOAD_FILE_FAILED,tabID:a,uploadID:c})})},replyToMessage:function(a,c){b("FantaDispatcher").dispatch({type:h.REPLY_TO_MESSAGE,threadID:c,message:a})},cancelReplyToMessage:function(a){b("FantaDispatcher").dispatch({type:h.CANCEL_REPLY_TO_MESSAGE,threadID:a})},cancelFileUpload:function(a,c){this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch({type:h.CANCEL_FILE_UPLOAD,tabID:a,uploadID:c})})},linkPreview:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LINK_PREVIEW,tabID:a,uri:c})})},loadedShareData:function(a,c,d){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LOADED_SHARE_DATA,tabID:a,attachmentData:c,composer:d})})},loadingShareData:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LOADING_SHARE_DATA,composer:c,tabID:a})})},removeSharePreview:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.REMOVE_SHARE_PREVIEW,tabID:a,composer:c})})},receivedNewMessage:function(a,c){b("FantaDispatcher").dispatch({type:h.RECEIVED_NEW_MESSAGE,tabID:a,message:c})},updateGroupName:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.UPDATE_GROUP_NAME,threadID:a,newName:c})})},addParticipants:function(a,c){__p&&__p();b("ifRequired")("FantaAppStore",function(d){__p&&__p();d=d.getState().mercury.tabContents.get(a);if(!d)return;var e=d.thread;d=d.typeahead;if(!d||!e)return;var f=b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a);if(e.is_canonical_user||f){f=d.getSelectedParticipantIDs();d=e.participants;d=k(d.concat(f));d?e.is_canonical_user?this.addGroupParticipantsAsOpenTab(d,a,c):this.addGroupParticipantsAsReplaceTab(d,a,c):this.addGroupParticipant(a,c)}else this.addGroupParticipant(a,c)}.bind(this))},addGroupParticipant:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS,threadID:a,onSendSuccess:c})})},addGroupParticipantsAsOpenTab:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB,fromTabID:c,onSendSuccess:d,tabID:a})})},addGroupParticipantsAsReplaceTab:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB,newTabID:a,onSendSuccess:d,tabID:c})})},sendMessage:function(a,c,d,e){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SEND_MESSAGE,threadID:a,message:c,composer:d,onSendSuccess:e})})},sendPhoto:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SEND_PHOTO,onSendSuccess:d,photoData:c,threadID:a})})},sendHotLike:function(a,c,d,e,f){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SEND_HOT_LIKE,emoji:c,onSendSuccess:f,size:d,source:e,threadID:a})})},sendSticker:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SEND_STICKER,threadID:a,stickerID:c,onSendSuccess:d})})},composerTextUpdate:function(a,c,d){c.length>0&&b("ifRequired")("FantaReducersSendMessages",b("emptyFunction"),function(){return this.dispatchOrBootloadSendMessages(b("emptyFunction"))}.bind(this)),this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.COMPOSER_TEXT_UPDATE,composer:d,message:c,threadID:a})})},dispatchOrBootloadSendMessages:function(a){b("ifRequired")("FantaReducersSendMessages",function(){b("setImmediate")(a)},function(){b("Bootloader").loadModules(["FantaReducersSendMessages"],function(c){g&&(g.addReducers(c),b("setImmediate")(a))},"FantaMessageActions")})},dispatchOrBootloadUploader:function(a){b("ifRequired")("FantaReducersFileUploader",function(){a()},function(){b("Bootloader").loadModules(["FantaReducersFileUploader"],function(b){g&&(g.addReducers(b),a())},"FantaMessageActions")})},dispatchOrBootloadSharePreview:function(a){b("ifRequired")("FantaReducersSharePreview",function(){a()},function(){b("Bootloader").loadModules(["FantaReducersSharePreview"],function(b){g&&(g.addReducers(b),a())},"FantaMessageActions")})}};e.exports=l}),null);
__d("FantaReducersCookie",["FantaMessageActions","FantaTabActions","PresenceState","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("throttle").acrossTransitions(b("PresenceState").doSync,500);function a(a,b){switch(b.type){case g.RECEIVED_NEW_MESSAGE:case h.CLOSE_ALL_TABS:case h.CLOSE_AND_TAB_NEXT:case h.CLOSE_TAB:case h.DELETE_TAB:case h.MINIMIZE_ALL_TABS:case h.MINIMIZE_TAB:case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.REPLACE_TAB:case g.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:case g.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:case h.UNMINIMIZE_TAB:i();return j(a)}return a}function c(a,b){switch(b.type){case h.LOAD_FROM_DATA:var c=a.tabGroup;b=b.tabData;c=c.updatedTime;c=c>=b.updatedTime||b.updatedTime===undefined?c:b.updatedTime;return a.mergeIn(["tabGroup"],{updatedTime:c})}return a}function j(a){return a.mergeIn(["tabGroup"],{updatedTime:Date.now()})}e.exports={updateCookie:a,loadFromData:c}}),null);
__d("FantaReducersDockCalculator",["Arbiter","FantaMessageActions","FantaTabActions","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaMessageActions").Types,i=null;function j(a){i=a,b("setImmediate")(function(){b("Arbiter").inform("FantaReducersDockCalculator/shouldRecalculate")})}function k(a){if(!i||a.size!==i.size)j(a);else{var b=!1;a.forEach(function(a){var c=i&&i.get(a.id);(!c||a.isMinimized!==c.isMinimized)&&(b=!0)});b&&j(a)}}function a(a,b){var c=a.tabGroup.tabs;switch(b.type){case g.CLOSE_ALL_TABS:case g.CLOSE_AND_TAB_NEXT:case g.CLOSE_TAB:case g.DELETE_TAB:case g.MINIMIZE_ALL_TABS:case g.MINIMIZE_TAB:case g.OPEN_TAB:case g.OPEN_TAB_WITH_INTERSTITIAL_DATA:case g.UNMINIMIZE_TAB:case h.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:j(c);break;case g.LOAD_FROM_DATA:case h.RECEIVED_NEW_MESSAGE:k(c);break}return a}e.exports={recalculateDock:a}}),null);
__d("FantaReducersLogging",["Bootloader","FantaMessageActions","FantaTabActions","FantaTabSheetActions","gkx","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaMessageActions").Types,i=b("FantaTabSheetActions").Types;function a(a,c){__p&&__p();if(!b("gkx")("678592"))return a;switch(c.type){case i.OPEN_ADD_MORE_FRIENDS_SHEET:case g.OPEN_TAB:if(c.type===g.OPEN_TAB&&c.entryPoint!=="compose_link"&&c.entryPoint!=="jewel_new_message")return a;var d=a.mercury.tabContents.get(c.tabID);d&&b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger","MessengerSecondarySearchFunnelConstants"],function(a,b){var e;switch(c.entryPoint){case"compose_link":e=b.ENTRY_SURFACES.SIDEBAR;break;case"jewel_new_message":e=b.ENTRY_SURFACES.JEWEL;break;default:e=b.ENTRY_SURFACES.EXISTING_TAB}a.startFunnel(b.CLIENTS.WWW,b.SEARCH_SURFACES.OMNIPICKER,e,c.type===i.OPEN_ADD_MORE_FRIENDS_SHEET?d.id:null,d.loggingID)},"FantaReducersLogging");break}return a}function c(a,c){switch(c.type){case g.CLOSE_ALL_TABS:case g.CLOSE_AND_TAB_NEXT:case g.CLOSE_TAB:case g.DELETE_TAB:case g.OPEN_TAB:case g.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:b("requestIdleCallback")(function(){var c=a.tabGroup.allowedRaisedTabs,d=a.tabGroup.getRaisedandUnraisedTabs(),e=d.raisedTabs;d=d.unraisedTabs;var f=e.count(),g=f+d.count();b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(c).setOpenTabs(g).setVisibleTabs(f).log()},"FantaReducersLogging")})}return a}e.exports={updateVisibleTabs:c,logSearchEventsAfterAction:a}}),null);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={isAvailable:function(a,c){var d;a=this.getStatus(a,c);c=b("MercuryIDs").getUserIDFromThreadID(c);c&&(d=b("ShortProfiles").getNow(c));return a===b("AvailableListConstants").ACTIVE&&(d===undefined||d===null||!d.is_messenger_only)},getStatus:function(a,c){__p&&__p();var d=b("AvailableListConstants").OFFLINE;c=b("MercuryIDs").getUserIDFromThreadID(c);if(c)d=b("PresenceStatus").get(c);else if(a&&a.participants){c=a.participants.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)});d=b("PresenceStatus").getGroup(c)}b("ChatVisibility").isOnline()||(d=b("AvailableListConstants").OFFLINE);return d}}}),null);
__d("FantaTypeJoinableThread",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={admins:[],approvalMode:0,associatedObject:null,description:null,friendsInParticipants:[],imageURL:null,isViewerSubscribed:!1,isWorkpaceChat:!1,joinableMode:{mode:0,link:""},linkHash:"",participants:[],threadID:null,threadFBID:null,threadName:null};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeSharePreview",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={isLoading:!1,params:null,type:null,uri:null};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeFileUploader",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=Object.freeze({ANIMATED_IMAGE:"animated_image",AUDIO:"audio",FILE:"file",GENERIC_ATTACHMENT:"generic_attachment",IMAGE:"image",VIDEO:"video"});d={uploadedFiles:b("immutable").Map(),uploadingFiles:b("immutable").Map()};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;a.prototype.getTypeIDs=function(a){return this.uploadedFiles.reduce(function(b,c){c.type===a&&c.uploadedID&&(b=b.concat(c.uploadedID));return b},[])};function a(){g.apply(this,arguments)}a.fileTypes=c;e.exports=a}),null);
__d("FantaTypeComposer",["FantaTypeFileUploader","FantaTypeSharePreview","immutable"],(function(a,b,c,d,e,f){"use strict";var g,h=0;c={fileUploader:new(b("FantaTypeFileUploader"))(),sharePreview:new(b("FantaTypeSharePreview"))(),text:"",replyingToMessage:null,version:h};d=babelHelpers.inherits(a,b("immutable").Record(c));g=d&&d.prototype;function a(){g.constructor.call(this,{version:++h})}e.exports=a}),null);
__d("FantaTypeTabContents",["ChatPrivacyActionController","FantaGetMessageActions","FantaTypeComposer","MercuryIDs","emptyFunction","immutable","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c={composer:new(b("FantaTypeComposer"))(),hasFetchedAll:!1,highlightNewMessage:!1,id:"",isMontageOpen:!1,isMultiCompany:null,isNewMessageTab:!1,isScrolledToBottom:!0,joinableInterstitialData:null,jumpToMessage:null,loggingID:null,membershipParticipants:null,mentorship:null,messages:b("immutable").List(),messageStore:null,nullStateCTA:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,participants:null,privacyController:null,showContextBanner:!1,showUnseenMessages:b("emptyFunction"),signatureID:null,thread:null,threadHref:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null,uri:null,workAvailabilityHumanReadable:null,workAvailabilityStatus:null};d=babelHelpers.inherits(a,b("immutable").Record(c));g=d&&d.prototype;function a(a){var c,d=b("MercuryIDs").getUserIDFromThreadID(a.id);d&&(c=new(b("ChatPrivacyActionController"))(d,function(c){b("setImmediate")(function(){b("FantaGetMessageActions").onPrivacyStateChange(a.id,c)})}));g.constructor.call(this,babelHelpers["extends"]({privacyController:c},a))}e.exports=a}),null);
__d("FantaReducersMercury",["Arbiter","AsyncSignal","AvailableList","AvailableListConstants","Bootloader","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTabSheetActions","FantaTypeJoinableThread","FantaTypeSharePreview","FantaTypeTabContents","JSLogger","MercuryIDs","MercuryThreadIDMap","TimeSlice","WebMessengerThreadPermalinks","getPageIDFromThreadID","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadIDMap").get(),h=b("JSLogger").create("FantaReducersMercury"),i=b("FantaMessageActions").Types,j=b("FantaTabActions").Types,k=b("FantaGetMessageActions").Types,l=1;function m(){return Math.floor(Math.random()*2147483648).toString(16)}function a(a,c){__p&&__p();switch(c.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:var d=c.tabID,e=c.defaultText,f=c.defaultPreview;b("ifRequired")("FantaTabsReactApp",function(c){!b("MercuryIDs").isValidThreadID(d)?(a=a.deleteIn(["tabGroup","tabs",d]),t(d)):A(a,d)},function(){return a=n(a,c.tabID)});a=o(a,d);var g=m(),h=a.mercury.tabContents.get(d);h=h.merge({isNewMessageTab:!!c.isNewMessageTab,loggingID:l++,signatureID:g});a=a.setIn(["mercury","tabContents",d],h);new(b("AsyncSignal"))("/ajax/chat/opentab_tracking.php",{threadID:d,userID:b("MercuryIDs").getUserIDFromThreadID(d),signatureID:g}).send();if(c.interstitialData){g=new(b("FantaTypeJoinableThread"))(c.interstitialData);h=h.merge({joinableInterstitialData:g});a=a.setIn(["mercury","tabContents",d],h)}e&&(a=a.setIn(["mercury","tabContents",d,"composer","text"],e));f&&(a=a.setIn(["mercury","tabContents",d,"composer","sharePreview"],new(b("FantaTypeSharePreview"))({params:null,type:null,uri:f})));b("Arbiter").inform("jewel/hide");return a}return a}function n(a,c){b("ifRequired")("FantaTabsSlimApp",function(d){!b("MercuryIDs").isValidThreadID(c)?(a=a.deleteIn(["tabGroup","tabs",c]),t(c)):A(a,c)},function(){A(a,c)});return a}function c(a,b){switch(b.type){case i.RECEIVED_NEW_MESSAGE:a=o(a,b.tabID)}return a}function o(a,c){__p&&__p();var d=a.mercury.tabContents.get(c);if(!d){var e=b("getPageIDFromThreadID")(c);e&&b("Bootloader").loadModules(["PagesMercuryChatTabIndicatorHandler"],function(a){var d=b("AvailableListConstants").OFFLINE,f=new a(e,d,function(a){b("setImmediate")(function(){return b("FantaTabActions").setPageIndicatorDescription(c,a)})},function(){b("setImmediate")(function(){return b("FantaTabActions").clearPageIndicatorDescription(c)})});b("setImmediate")(function(){b("FantaTabSheetActions").onIsPageTab(c,f)});f.checkResponsiveness()},"FantaReducersMercury");return a.setIn(["mercury","tabContents",c],new(b("FantaTypeTabContents"))({id:c}))}return a}function d(a,b){switch(b.type){case j.SET_PAGE_INDICATOR_DESCRIPTION:var c=b.tabID;b=b.description;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({pageIndicatorDescription:b||""});a=a.setIn(["mercury","tabContents",c],d)}return a}function f(a,b){switch(b.type){case j.CLEAR_PAGE_INDICATOR_DESCRIPTION:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({pageIndicatorDescription:""});a=a.setIn(["mercury","tabContents",b],c)}return a}function p(a,b){switch(b.type){case j.REPLACE_TAB:case i.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:a=s(a,b.newTabID);a=o(a,b.newTabID);return a}return a}function q(a,b){__p&&__p();switch(b.type){case k.ADD_PARTICIPANTS:var c=b.tabID;b=b.previewTabID;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({threadPreviewID:b});a=a.setIn(["mercury","tabContents",c],d);return a}return a}function r(a,c){switch(c.type){case k.CLEAR_PARTICIPANTS:c=c.tabID;var d=a.mercury.tabContents.get(c),e=d?d.loggingID:null;d=d?d.isNewMessageTab:!1;a=a.setIn(["mercury","tabContents",c],new(b("FantaTypeTabContents"))({id:c,isNewMessageTab:d,loggingID:e}))}return a}function s(a,c){b("ifRequired")("FantaTabsReactApp",function(d){b("MercuryIDs").isValidThreadID(c)||(a=a.deleteIn(["tabGroup","tabs",c]),t(c))},function(){b("ifRequired")("FantaTabsSlimApp",function(d){b("MercuryIDs").isValidThreadID(c)||(a=a.deleteIn(["tabGroup","tabs",c]),t(c))})});return a}function t(a){g.getClientIDFromServerID(a,function(c){return b("setImmediate")(function(){b("MercuryIDs").isValidThreadID(c)?b("FantaTabActions").openTab(c):h.error("invalid id",a)})})}function u(a,b){switch(b.type){case j.FOCUS_TAB:A(a,b.tabID)}return a}function v(a,b){switch(b.type){case j.CLOSE_TAB:b=b.tabID;a=x(a,b)}return a}function w(a,b){switch(b.type){case j.DELETE_TAB:b=b.tabID;a=x(a,b);a=a.deleteIn(["mercury","tabContents",b])}return a}function x(a,c){b("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteThread(c)});return a}function y(a,c){switch(c.type){case j.CLOSE_ALL_TABS:b("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteAllThreads()});return a}return a}function z(a,b){switch(b.type){case j.FOCUS_NEXT_TAB:case j.FOCUS_PREVIOUS_TAB:case j.CLOSE_AND_TAB_NEXT:b=a.tabGroup.focusedTabID;b&&A(a,b)}return a}function A(a,c){__p&&__p();var d=b("MercuryIDs").getUserIDFromThreadID(c);if(d){var e=function(){b("AvailableList").updateForID(d)};b("TimeSlice").guard(e,"superfluous request to first open DD",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()}e=a.mercury.tabContents.get(c);if(e){a=e.thread;e=e.pageIndicator;e&&e.notifyPageOnlineStatusChanged(b("FantaAvailableStatus").getStatus(a,c))}}function B(a,b){switch(b.type){case j.UNMINIMIZE_TAB:A(a,b.tabID)}return a}function C(a,b){__p&&__p();switch(b.type){case j.LOAD_FROM_DATA:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=o(a,e)}}return a}function D(a,c){a=a.mercury.tabContents.get(c);(!a||!a.uri)&&b("WebMessengerThreadPermalinks").getThreadURI(c,function(a){b("setImmediate")(function(){return b("FantaTabActions").setPermanentUri(c,a)})})}function E(a,b){__p&&__p();switch(b.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.RECEIVED_NEW_MESSAGE:case i.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:D(a,b.tabID);break;case j.LOAD_FROM_DATA:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;D(o(a,e),e)}}return a}function F(a,b){switch(b.type){case j.SET_PERMANENT_URI:var c=b.tabID;b=b.uri;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({uri:b});a=a.setIn(["mercury","tabContents",c],d)}return a}e.exports={addParticipants:q,clearPageIndicatorDescription:f,clearParticipants:r,closeAllTabs:y,closeTab:v,deleteTab:w,focusTab:u,focusTabEvents:z,loadFromData:C,loadUri:E,openTab:a,receivedNewMessage:c,replaceTab:p,setPageIndicatorDescription:d,setUri:F,unminimizeTab:B}}),null);
__d("MercuryIgnoredBlockedParticipants.bs",["bs_belt_Set","bs_caml_obj","MercuryIDs","CurrentUser","bs_js_primitive","WorkForeignEntityInfo.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){d=d.participants.filter(function(c){return c!==b("MercuryIDs").getParticipantIDFromUserID(a)});return d.filter(function(a){return b("bs_belt_Set").has(c,a)!==!1})}function a(a,b,c){if(c.is_canonical)return!1;else return g(a,b,c).length>0}function c(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function d(a,c,d){var e=d.is_canonical;if(e){e=d.participants.filter(function(c){return b("bs_caml_obj").caml_notequal(c,b("MercuryIDs").getParticipantIDFromUserID(a))});return!e.every(function(a){return!b("bs_belt_Set").has(c,a)})}else return!1}function e(a,c,d){if(!a.is_canonical_user||b("bs_js_primitive").nullable_to_opt(a.other_user_fbid)===b("bs_js_primitive").some(c))return!1;else if(!b("CurrentUser").isWorkUser()||d==null)return!0;else if(d==null)return!1;else return!b("WorkForeignEntityInfo.bs").isCoworker(d)}f.findIntersection=g;f.isPresentInGroupThread=a;f.participantsInGroupThread=c;f.qualifiesAs=d;f.shouldShowBlock=e}),null);
__d("FantaReducersMessages",["CurrentUser","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeComposer","ImmutableObject","MercuryBrowserAlerts","MessengerParticipants.bs","WorkForeignEntityType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("FantaGetMessageActions").Types;function a(a,c){switch(c.type){case g.RECEIVED_NEW_MESSAGE:c=c.message;b("MercuryBrowserAlerts").messageReceived(c);return a}return a}function c(a,b){switch(b.type){case g.COMPOSER_TEXT_UPDATE:var c=b.composer,d=b.message;b=b.threadID;var e=a.mercury.tabContents.get(b);return!e||e&&e.composer.version!==c.version?a:a.mergeIn(["mercury","tabContents",b,"composer"],{text:d})}return a}function d(a,c){switch(c.type){case g.REPLY_TO_MESSAGE:var d=c.message;c=c.threadID;var e=a.mercury.tabContents.get(c);return!e?a:a.mergeIn(["mercury","tabContents",c,"composer"],{replyingToMessage:new(b("ImmutableObject"))(babelHelpers["extends"]({},d))})}return a}function f(a,b){switch(b.type){case g.CANCEL_REPLY_TO_MESSAGE:b=b.threadID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=null;return a.mergeIn(["mercury","tabContents",b,"composer"],{replyingToMessage:c})}return a}function j(a,c){switch(c.type){case h.CLOSE_TAB:case h.CLOSE_AND_TAB_NEXT:return!a.mercury.tabContents.get(c.tabID)?a:a.setIn(["mercury","tabContents",c.tabID,"composer"],new(b("FantaTypeComposer"))())}return a}function k(a,c){switch(c.type){case h.CLOSE_ALL_TABS:c=a.mercury.tabContents;c.forEach(function(c){c=c.id;a=a.setIn(["mercury","tabContents",c,"composer"],new(b("FantaTypeComposer"))())});return a}return a}function l(a,b){switch(b.type){case h.SCROLL_BOTTOM_CHANGED:var c=b.tabID,d=b.isScrolledToBottom;b=b.showUnseenMessages;var e=a.mercury.tabContents.get(c);if(!e)return a;e=e.merge({isScrolledToBottom:d,showUnseenMessages:b});a=a.setIn(["mercury","tabContents",c],e)}return a}function m(a,b){switch(b.type){case h.JUMP_TO_MESSAGE:var c=b.tabID;b=b.mid;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({jumpToMessage:b});a=a.setIn(["mercury","tabContents",c],d)}return a}function n(a,b){switch(b.type){case h.WIPE_JUMP_TO_MESSAGE:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({jumpToMessage:null});a=a.setIn(["mercury","tabContents",b],c)}return a}function o(a,b){switch(b.type){case h.SHOW_UNSEEN_MESSAGES:b=b.tabID;b=a.mercury.tabContents.get(b);b&&b.showUnseenMessages()}return a}function p(a,c){__p&&__p();switch(c.type){case i.ON_GET_THREAD_RESPONSE:c=c.thread;var d=c.thread_id,e=a.mercury.tabContents.get(d);if(!e)return a;var f=null;b("CurrentUser").isWorkUser()&&c.participants&&(f=c.participants.map(b("MessengerParticipants.bs").getNow,b("MessengerParticipants.bs")).find(function(a){return((a=a)!=null?(a=a.work_foreign_entity_info)!=null?a.type:a:a)===b("WorkForeignEntityType").FOREIGN})!==undefined);e=e.merge({thread:c,isMultiCompany:f});a=a.setIn(["mercury","tabContents",d],e);break}return a}function q(a,b){switch(b.type){case h.HIGHLIGHT_NEW_MESSAGE:return!a.mercury.tabContents.get(b.tabId)?a:a.setIn(["mercury","tabContents",b.tabId,"highlightNewMessage"],!0)}return a}function r(a,b){switch(b.type){case h.UNHIGHLIGHT_NEW_MESSAGE:return!a.mercury.tabContents.get(b.tabId)?a:a.setIn(["mercury","tabContents",b.tabId,"highlightNewMessage"],!1)}return a}e.exports={cancelReplyToMessage:f,closeAllTabs:k,closeTab:j,composerTextUpdate:c,highlightNewMessage:q,jumpToMessage:m,onGetThreadResponse:p,receivedNewMessage:a,replyToMessage:d,scrollBottomChanged:l,showUnseenMessages:o,unhighlightNewMessage:r,wipeJumpToMessage:n}}),null);
__d("FantaReducersPreLogging",["Bootloader","FantaMessageActions","FantaTabActions","FantaTabSheetActions","MessengerSecondarySearchFunnelConstants","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaTabSheetActions").Types,i=b("FantaMessageActions").Types;c=b("MessengerSecondarySearchFunnelConstants").END_ACTIONS;var j=c.ABANDON,k=c.SEND,l=b("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION;function a(a,c){__p&&__p();if(!b("gkx")("678592"))return a;switch(c.type){case g.CLOSE_TAB:case g.CLOSE_AND_TAB_NEXT:case h.CLOSE_ADD_FRIENDS_SHEET:case h.CLOSE_ADD_MORE_FRIENDS_SHEET:a=m(a,c.tabID,l,j);break;case g.CLOSE_ALL_TABS:a.mercury.tabContents.forEach(function(b){a=m(a,b.id,l,j)});break;case i.ADD_GROUP_PARTICIPANTS:a=m(a,c.threadID,l,k,!0);break;case i.SEND_HOT_LIKE:case i.SEND_MESSAGE:case i.SEND_PHOTO:case i.SEND_STICKER:a=m(a,c.threadID,l,k);break}return a}function m(a,c,d,e,f){if(!b("gkx")("678592"))return a;var g=a.mercury.tabContents.get(c),h=g?g.loggingID:null,i=g?g.threadPreviewID:null;h&&b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger"],function(b){a=a.setIn(["mercury","tabContents",c],g.merge({loggingID:null}));var j;e===k&&(f===null||f===undefined)?j=g&&g.messages.size===0:j=f;b.endFunnel(d,e,h,i?i.split(":")[1]:c,j)},"FantaReducersPreLogging");return a}e.exports={logSearchEvents:a}}),null);
__d("FantaTypeTab",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={focusCounter:0,id:"",isHovered:!1,isMinimized:!1,openCounter:0,entryPoint:"unknown"};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeTabGroup",["FantaConst","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").OrderedMap({});c={allowedRaisedTabs:b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:b("immutable").Map({}),updatedTime:0};var i=function(a){return a.openCounter*-1},j=function(a){return a.focusCounter*-1};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;a.prototype.getRaisedandUnraisedTabs=function(){if(this.tabs.size===0||this.allowedRaisedTabs===0)return{raisedTabs:h,unraisedTabs:h};if(this.tabs.size===1&&this.allowedRaisedTabs>=1)return{raisedTabs:this.tabs.toOrderedMap(),unraisedTabs:h};var a=this.tabs.sortBy(j),b=a.slice(this.allowedRaisedTabs);a=a.take(this.allowedRaisedTabs).sortBy(i);return{raisedTabs:a,unraisedTabs:b}};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaReducersTabs",["Bootloader","EventProfiler","FantaConst","FantaMessageActions","FantaTabActions","FantaTypeTab","FantaTypeTabGroup","LogHistory","MessengerDiscoveryEntryPoint","PinnedConversationNubsConfig","TimeSlice","URI","isWebMessengerURI","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i="tab_",j=b("LogHistory").getInstance("fanta_tabs"),k=1,l=1,m=1;function a(a,c){__p&&__p();switch(c.type){case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:case g.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:j.debug(c.type,JSON.stringify({id:c.tabID}));if(l===1){b("EventProfiler").tagCurrentActiveInteractionsAs("FirstChatTabOpen");var d=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,b){a.markerStart(b.FIRSTCHATTABOPEN_WWW,0,d)},"FantaReducersTabs")}return q(a,c.tabID||i+m++,!0,c.entryPoint)}return a}function c(a,b){__p&&__p();switch(b.type){case h.REPLACE_TAB:case g.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:var c=b.tabID,d=b.newTabID,e=a.tabGroup;e=e.tabs;e=e.get(c);j.debug(b.type,JSON.stringify({id:c,isExisting:!!e,newID:d}));if(e){b=e.id===a.tabGroup.focusedTabID;a=a.setIn(["tabGroup","tabs",d],e.merge({id:d})).deleteIn(["tabGroup","tabs",c]);return q(a,d,b,"replace_tab")}return q(a,d,!1,"replace_tab")}return a}function d(a,b){switch(b.type){case h.MINIMIZE_TAB:return r(a,b.tabID,!0)}return a}function f(a,b){switch(b.type){case h.UNMINIMIZE_TAB:return r(a,b.tabID,!1)}return a}function n(a,b){switch(b.type){case h.FOCUS_TAB:b=b.tabID;return x(a,b)}return a}function o(a,b){switch(b.type){case h.BLUR_TAB:return y(a,b.tabID)}return a}function p(a,c){__p&&__p();switch(c.type){case g.RECEIVED_NEW_MESSAGE:var d=c.tabID,e=a.tabGroup.tabs.get(d);j.debug(c.type,JSON.stringify({id:d,isOpen:!!e}));if(!e){c=a.tabGroup.focusedTabID;a=q(a,d,!1,"message_received");var f=a.tabGroup.allowedRaisedTabs;e=a.tabGroup.getRaisedandUnraisedTabs();var h=e.raisedTabs;e=e.unraisedTabs;var i=h.count(),k=i+e.count();b("TimeSlice").guard(function(){b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(f).setOpenTabs(k).setVisibleTabs(i).log()},"FantaReducersTabs")},"name",{propagationType:b("TimeSlice").PropagationType.ORPHAN})();h=b("URI").getNextURI();if(b("isWebMessengerURI")(h))return a=r(a,d,!0);else if(c)return x(a,c)}}return a}function q(a,c,d,e){e===void 0&&(e="unknown");var f=a.tabGroup;f=f.tabs;f=f.get(c);!f?(f=new(b("FantaTypeTab"))({id:c,focusCounter:k,openCounter:l++,entryPoint:e}),a=a.setIn(["tabGroup","tabs",c],f)):f.isMinimized&&d&&(a=r(a,c,!1));return d?x(a,c):a}function r(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isMinimized:c}));return a}function s(a,b){__p&&__p();switch(b.type){case h.MINIMIZE_ALL_TABS:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=r(a,e,!0)}return a}return a}function t(a,b){switch(b.type){case h.CLOSE_TAB:case h.DELETE_TAB:var c=b.tabID;j.debug(b.type,JSON.stringify({id:c}));return u(a,c)}return a}function u(a,b){a=y(a,b);return a.deleteIn(["tabGroup","tabs",b]).deleteIn(["mercury","tabContents",b])}function v(a,b){switch(b.type){case h.CLOSE_ALL_TABS:j.debug(b.type);a=y(a,a.tabGroup.focusedTabID);return a.setIn(["tabGroup","tabs"],a.tabGroup.tabs.clear()).setIn(["mercury","tabContents"],a.mercury.tabContents.clear())}return a}function w(a,b){switch(b.type){case h.CLOSE_AND_TAB_NEXT:j.debug(b.type,JSON.stringify({id:b.tabID}));a=u(a,b.tabID);return G(a)}return a}function x(a,b,c){c===void 0&&(c=!1);var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{focusCounter:k++}));d=c?null:b;a=a.mergeIn(["tabGroup"],{focusedTabID:d});return a}function y(a,b){return a.tabGroup.focusedTabID===b?a.mergeIn(["tabGroup"],{focusedTabID:null}):a}function z(a,b){switch(b.type){case h.HOVERED_TAB:b=b.tabID;return B(a,b,!0)}return a}function A(a,b){switch(b.type){case h.UNHOVERED_TAB:b=b.tabID;return B(a,b,!1)}return a}function B(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isHovered:c}));return a}function C(a,c){__p&&__p();switch(c.type){case h.SET_ALLOWED_RAISED_TABS:var d=c.allowedRaisedTabs,e=a.tabGroup.allowedRaisedTabs;if(d!==e){j.debug(c.type,JSON.stringify({count:d}));b("PinnedConversationNubsConfig").chatTabTypingPriority||(d=Math.max(1,d));var f=a.tabGroup.tabs.count(),g=f>d?d:f;c=d>e&&f>e;e=d<e&&f>d;(c||e)&&b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(d).setOpenTabs(f).setVisibleTabs(g).log()},"FantaReducersTabs")}return D(a,d)}return a}function D(a,c){c===void 0&&(c=b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS);if(c===a.tabGroup.allowedRaisedTabs)return a;b("PinnedConversationNubsConfig").chatTabTypingPriority||(c=Math.max(1,c));return a.mergeIn(["tabGroup"],{allowedRaisedTabs:c})}function E(a,c){__p&&__p();switch(c.type){case h.LOAD_FROM_DATA:var d=a.tabGroup,e=c.tabData,f=d.updatedTime;if(f>=e.updatedTime||e.updatedTime===undefined)return a;a=D(a.set("tabGroup",new(b("FantaTypeTabGroup"))()),d.allowedRaisedTabs);var g=[];e.tabs.sort(function(a,b){return a.openCounter-b.openCounter}).forEach(function(c){g.push(c.id),a=q(a,c.id,!1,[b("MessengerDiscoveryEntryPoint").FB_HEADER_DOCK_LOADED_FROM_BROWSER_COOKIE]),c.isMinimized&&(a=r(a,c.id,c.isMinimized))});e.tabs.sort(function(a,b){return a.focusCounter-b.focusCounter}).forEach(function(b){a=x(a,b.id,!0)});j.debug(c.type,JSON.stringify({updatedTime:f,newerTime:e.updatedTime,opened:g}));a=e.focusedTabID?x(a,e.focusedTabID,!0):y(a)}return a}function F(a,b){switch(b.type){case h.FOCUS_NEXT_TAB:return G(a)}return a}function G(a){__p&&__p();var b=a.tabGroup.focusedTabID,c=a.tabGroup.getRaisedandUnraisedTabs();c=c.raisedTabs;var d=c.count();if(d===0)return a;else if(c.count()===1)return x(a,c.first().id);d=c.skipUntil(function(a){return a.id===b}).rest();if(d.count()===0)return x(a,c.first().id);else return x(a,d.first().id)}function H(a,b){__p&&__p();switch(b.type){case h.FOCUS_PREVIOUS_TAB:var c=a.tabGroup.focusedTabID;b=a.tabGroup.getRaisedandUnraisedTabs();b=b.raisedTabs;if(b.count()<2)return a;var d=b.reverse().skipUntil(function(a){return a.id===c}).rest();if(d.count()===0)return x(a,b.last().id);else return x(a,d.first().id)}return a}e.exports={blurTab:o,closeAllTabs:v,closeAndTabNext:w,closeTab:t,focusNextTab:F,focusPreviousTab:H,focusTab:n,hoveredTab:z,loadFromData:E,minimizAllTabs:s,minimizeTab:d,openTab:a,receivedNewMessage:p,replaceTab:c,setAllowedRaisedTabs:C,unhoveredTab:A,unminimizeTab:f}}),null);
__d("FantaTypeMercuryState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={tabContents:b("immutable").Map({})};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTypeAppState",["FantaTypeMercuryState","FantaTypeTabGroup","immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={tabGroup:new(b("FantaTypeTabGroup"))(),mercury:new(b("FantaTypeMercuryState"))()};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaAppStore",["FantaComposeViewReducers","FantaDispatcher","FantaReducersCookie","FantaReducersDockCalculator","FantaReducersLogging","FantaReducersMercury","FantaReducersMessages","FantaReducersPreLogging","FantaReducersTabs","FantaTypeAppState","FluxReduceStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[].concat(Object.values(b("FantaReducersPreLogging")),Object.values(b("FantaReducersTabs")),Object.values(b("FantaReducersMercury")),Object.values(b("FantaReducersMessages")),Object.values(b("FantaReducersDockCalculator")),Object.values(b("FantaReducersCookie")),Object.values(b("FantaComposeViewReducers")),Object.values(b("FantaReducersLogging")));g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("FantaTypeAppState"))()};a.prototype.ignoreReducer=function(a){var b=Object.values(a);h=h.filter(function(a){return!b.find(function(b){return b===a})})};a.prototype.addReducers=function(a){this.ignoreReducer(a),h=h.concat(Object.values(a))};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;c=new a(b("FantaDispatcher"));e.exports=c}),null);
__d("FantaCookieUtil",["CurrentUser","FantaConst","MercuryIDs","MessengerDiscoveryEntryPoint","MessengerState.bs","WorkModeConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={convertCookieData:function(a,c,d){__p&&__p();var e={tabs:[],focusedTabID:null,updatedTime:0,interstitialData:d};d=[];var f=this._getCookieKeys();a=a||{};a[f.tabs]&&(d=a[f.tabs]);d.forEach(function(a){e.tabs.push({id:a.i,isMinimized:!a.r,openCounter:a.o,focusCounter:a.f})});if(c)for(var d=c.tabs.values(),c=Array.isArray(d),g=0,d=c?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(c){if(g>=d.length)break;h=d[g++]}else{g=d.next();if(g.done)break;h=g.value}h=h;b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),h.id)&&e.tabs.push({id:h.id,isMinimized:h.isMinimized,openCounter:h.openCounter,focusCounter:h.focusCounter})}e.focusedTabID=a[f.focusedTabID];e.updatedTime=a[f.updatedTime];return e},createCookieData:function(a,c){__p&&__p();var d=[],e=this._getCookieKeys();if(c[e.updatedTime]>a.updatedTime)return c;for(var f=a.tabs.values(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;!b("MercuryIDs").isLocalThread(i.id)&&!this._shouldDisableForCookie(i.id,i.entryPoint)&&d.push({i:i.id,r:i.isMinimized?undefined:1,o:i.openCounter,f:i.focusCounter})}c[e.tabs]=d;c[e.focusedTabID]=a.focusedTabID;c[e.updatedTime]=a.updatedTime;return c},_shouldDisableForCookie:function(a,c){if(!c.includes(b("MessengerDiscoveryEntryPoint").FB_PAGE_USER_MESSAGE_PROMPT))return!1;c=b("MessengerState.bs").getThreadMessagesRangeNow(b("CurrentUser").getID(),a,0,1)[0];return c===undefined},_getCookieKeys:function(){var a=b("WorkModeConfig").is_work_user;return{tabs:a?b("FantaConst").cookieIDs.WORK_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_COOKIE_ID,focusedTabID:a?b("FantaConst").cookieIDs.WORK_FOCUS_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_FOCUS_COOKIE_ID,updatedTime:a?b("FantaConst").cookieIDs.WORK_TIME_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_TIME_COOKIE_ID}}};e.exports=a}),null);
__d("FantaMercuryThreadEventsBootloaded",["Bootloader","CurrentUser","MercuryThreadInformer","MercuryViewer","MessengerState.bs","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadInformer").get();a={onMessagesReceived:function(a){__p&&__p();g.subscribe("messages-received",function(c,d){__p&&__p();if(!b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()){c=function(c){__p&&__p();var e=d[c],f=function(d){var f=e[d];if(f.author!=b("MercuryViewer").getID()){if(!f.is_unread)return"continue";b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),c,function(d){b("Bootloader").loadModules(["ChatTabPolicy"],function(b){b.messageIsAllowed(d,f,function(){a(c,f)})},"FantaMercuryThreadEventsBootloaded")})}};for(var g=0;g<e.length;g++){var h=f(g);if(h==="continue")continue}};for(var e in d)c(e)}})}};e.exports=a}),null);
__d("FantaTabViewportManager",["Arbiter","DockTabsViewportCalculator","DockTabsViewportFantaTabUtils","FantaTabActions","ifRequired","immutable","isWebMessengerURI","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=b("DockTabsViewportCalculator").getInstance(a);if(!c)return;c.registerFantaTabCallbacks({fantaTabModelStateGetter:function(){var a=b("immutable").Map({});b("ifRequired")("FantaAppStore",function(b){a=b.getState().tabGroup.tabs});return a},onAvailableWidthChanged:function(a){var c=b("DockTabsViewportFantaTabUtils").getTabCountToFitWidth(a),d=function(){b("FantaTabActions").setAllowedRaisedTabs(c)};b("ifRequired")("FantaAppStore",function(a){a=a.getState().tabGroup.allowedRaisedTabs;c!==a&&b("setImmediate")(d)},function(){b("setImmediate")(d)})}});b("Arbiter").subscribe("FantaReducersDockCalculator/shouldRecalculate",function(){c.forceRecalculateChatTabs()});c.forceRecalculateFBDockWidth();b("Arbiter").subscribe("page_transition",function(a,c){b("isWebMessengerURI")(c.uri)&&b("setImmediate")(function(){return b("FantaTabActions").minimizeAllTabs()})})}e.exports={init:a}}),null);
__d("P2PSendMoneyDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=36,i;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),i=new Map(),b("P2PDispatcher").register(this.onEventDispatched.bind(this))}a.prototype.onEventDispatched=function(a){var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").CHAT_SEND_VIEW_OPENED:this.handleChatSendViewOpened(c);this.emit("change");break;case b("P2PActionConstants").CHAT_SEND_VIEW_CLOSED:this.handleChatSendViewClosed(c);this.emit("change");break}};a.prototype.getStateByThreadID=function(a){return i.get(a)};a.prototype.handleChatSendViewOpened=function(a){i.set(a.threadID,{amount:a.amount,groupSendRecipientUserIDs:a.groupSendRecipientUserIDs,groupSendReceiptDetails:a.groupSendReceiptDetails,groupThreadFBID:a.groupThreadFBID,onCompletion:a.onCompletion,openRequestTab:a.openRequestTab,memoText:a.memoText&&a.memoText.substr(0,h),platformData:a.platformData,referrer:a.referrer,paymentRequestID:a.paymentRequestID,sendMoneyDialogShown:!0,sendMoneyNUXDismissed:a.sendMoneyNUXDismissed,useModal:a.useModal})};a.prototype.handleChatSendViewClosed=function(a){i.set(a.threadID,{amount:"",groupSendRecipientUserIDs:[],groupSendReceiptDetails:null,groupThreadFBID:"",onCompletion:null,openRequestTab:!1,memoText:null,platformData:null,referrer:null,paymentRequestID:null,sendMoneyDialogShown:!1,sendMoneyNUXDismissed:!1,useModal:!1})};a.prototype.isAnyChatSendViewOpen=function(){__p&&__p();for(var a=i.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(d.sendMoneyDialogShown)return!0}return!1};e.exports=new a()}),null);
__d("FantaTabsAppBase",["Bootloader","ChatAppActions","ChatAppStore","ChatPerfInstrumentation","CSS","JSLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.init=function(a,c,d){__p&&__p();if(this.isInitialized()){b("JSLogger").create("chat_app").error("repeated_init");return}this.$1=a;this.tabsElem=c;var e=b("ChatAppStore").addListener(function(){var a=b("ChatAppStore").getPreviousState(),c=b("ChatAppStore").getState();a.initialDisplayDone===!1&&c.initialDisplayDone===!0&&(b("ChatPerfInstrumentation").logDisplayDone(),e.remove())});b("ChatPerfInstrumentation").init();this.$2(d);this.initializeFantaData(d.interstitial_data);this.initializeFantaUI();this.$3();b("ChatAppActions").tti();b("ChatPerfInstrumentation").logTTI()};a.prototype.isInitialized=function(){return!!b("ChatAppStore").getState().isInitialized};a.prototype.isHidden=function(){var a=b("ChatAppStore").getState();return!!(!a.isInitialized||a.isHidden)};a.prototype.hide=function(){if(this.isHidden())return;b("CSS").hide(this.$1);b("ChatAppActions").hide()};a.prototype.unhide=function(){var a=b("ChatAppStore").getState();a.isInitialized?a.isHidden&&(b("CSS").show(this.$1),d(["Dock"],function(a){a.resizeAllFlyouts()}),b("ChatAppActions").unhide()):a.isLoaded||(d(["UIPagelet"],function(a){a.loadFromEndpoint("ChatTabsPagelet","ChatTabsPagelet"),a.loadFromEndpoint("BuddylistPagelet","BuddylistPagelet")}),b("ChatAppActions").load())};a.prototype.initializeFantaData=function(a){};a.prototype.initializeFantaUI=function(){};a.prototype.$2=function(a){d(["MercuryDeliveryState","MessengerParticipants.bs","MercuryServerPayloadPreprocessor","MessengerState.bs","MercurySyncEnvironment","P2PSendMoneyDialogStore"],function(c,d,e,f,g,h){c.get(),d,g.setUp(),b("ChatPerfInstrumentation").logInitStores(),a.graphql_payload?b("Bootloader").loadModules(["ChatInitialDataTransformer.bs"],function(b){var c=a.graphql_payload;b=b.transform(c);b.message_blocked_ids=c.message_blocked_ids;b.message_ignored_ids=c.message_ignored_ids;b.payload_source=c.payload_source;e.get().handleUpdate(b)},"FantaTabsAppBase"):e.get().handleUpdate(a.initial_data)})};a.prototype.$3=function(){d(["HotLikeSound","ChatOptions"],function(a,c){a.setCheckSoundEnabledFunc(function(){return c.getSetting("sound")}),b("ChatPerfInstrumentation").logInitSound()})};function a(){}e.exports=a}),null);
__d("FantaTabsEagerBootloader",["Bootloader","emptyFunction","ifRequired"],(function(a,b,c,d,e,f){"use strict";var g=function(a){b("ifRequired")("FantaAppStore",function(b){return b.addReducers(a)}),g=b("emptyFunction")};a={bootload:function(){b("ifRequired")("FantaTabsSlimApp",function(a){a.silentPumpUp()}),b("Bootloader").loadModules(["FantaReducersGetMessages","FantaTabsReactApp","MessengerGraphQLThreadFetcher.bs"],function(a){g(a)},"FantaTabsEagerBootloader")}};e.exports=a}),null);
__d("MNCommerceDialogContainerMount",["MNCommerceDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").createElement(b("MNCommerceDialogContainer.react"),null),a)}};e.exports=a}),null);
__d("NotificationJewelReminderLoader",["promiseDone"],(function(a,b,c,d,e,f){e.exports={init:function(a,c){b("promiseDone")(a.load(),function(a){a.init(c)})}}}),null);
__d("P2PDialogContainerMount",["P2PDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").createElement(b("P2PDialogContainer.react"),null),a)}};e.exports=a}),null);
__d("PagesPlatformDialogContainerMount",["PagesPlatformDialogContainer.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={mount:function(a){b("ReactDOM").render(b("React").createElement(b("PagesPlatformDialogContainer.react"),null),a)}};e.exports=a}),null);
__d("MessengerRTCMessageHandler",["Bootloader","FBRTCCallSummaryUploader","FBRTCExperiment","FBRTCMessageListener","URI","isFacebookURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=!1,i=!1;function j(){b("isFacebookURI")(new(b("URI"))(window.top.location.href))&&b("FBRTCExperiment").getIncomingCallExperiments().logExposure()}a={init:function(){b("FBRTCCallSummaryUploader").init(),b("FBRTCMessageListener").init(!1),b("FBRTCMessageListener").once("messageReceived",function(a){k()}),b("FBRTCMessageListener").once("multiwayMessageReceived",function(a){l(a)}),b("FBRTCMessageListener").once("bonfireMessageReceived",function(a){m(a)})}};function k(){g||(g=!0,j(),b("Bootloader").loadModules(["FBRTCIncomingCallController","MessengerRTCIncomingDialogController","MessengerRTCMissedCallDialogController","FBRTCUnsupportedBrowserMessage"],function(a,c,d,e){var f=new a(c,e,d);b("FBRTCMessageListener").setMessageHandler(function(a){f.onMessageReceived(a)})},"MessengerRTCMessageHandler"))}function l(a){h||(h=!0,j(),b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(c,d){var e=new c(d,!1);b("FBRTCMessageListener").setMultiwayMessageHandler(function(a){e.onMessageReceived(a)});e.onMessageReceived(a)},"MessengerRTCMessageHandler"))}function m(a){i||(i=!0,j(),b("Bootloader").loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(c,d){var e=new c(d);b("FBRTCMessageListener").setBonfireMessageHandler(function(a){e.onBonfireMessageReceived(a)});e.onBonfireMessageReceived(a)},"MessengerRTCMessageHandler"))}e.exports=a}),null);